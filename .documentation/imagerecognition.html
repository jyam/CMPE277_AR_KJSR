<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Wikitude SDK Android 4.0 Documentation</title>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans&subset=latin">
    <link type="text/css" rel="stylesheet" href="css/reset.css">
    <link type="text/css" rel="stylesheet" href="css/docs.css">
    <link type="text/css" rel="stylesheet" href="css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="css/github.min.css">
    <link type="text/css" rel="stylesheet" href="css/default.min.css">
    
    <script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="js/highlight-8.0.min.js"></script>
    <script type="text/javascript" src="js/lunr.min-0.5.3.js"></script>
    <script type="text/javascript" src="js/deprecated.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            // Every image referenced from a Markdown document
            $("#content img").each(function() {
                // Let's put a caption if there is one
                if($(this).attr("alt"))
                    $(this).wrap('<figure class="image"></figure>')
                        .after('<figcaption>'+$(this).attr("alt")+'</figcaption>');
                });
        });
    </script>

    <script type="text/javascript">
    hljs.initHighlightingOnLoad();
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            if(isVersionDeprecated())
                document.getElementById('deprecatedNote').style.display='block';
            document.getElementById("documentationSelect").onchange = function() {
                var selectedOption = this.value;
                 console.log(selectedOption);
                 window.top.location.href = "http://www.wikitude.com/developer/documentation/" + selectedOption;
                }
        });
    </script>
</head>
<body>
    <div id="page">
        <a name="top" />
         

<div id="sidebar">
    <div id="topnav">
    <img src="images/140529_WT_SDK_Logo_01_v3.png">
    <h1><a href="">Documentation</a></h1>
    <h2>Wikitude SDK Android</h2>
    
    <div id="version">version: 4.0</div>
    
    <div id="deprecatedNote" class="warning" style="display:none;">Note you are viewing the documentation of a deprecated version. Please check <a href="http://www.wikitude.com/developer/documentation">www.wikitude.com/developer/documentation</a></div>
   
    
    Other versions:
    <select id="documentationSelect">
        
            <option value="android"  selected > Android </option>
        
            <option value="epson"  > Epson </option>
        
            <option value="ios"  > iOS </option>
        
            <option value="glass"  > Google Glass </option>
        
            <option value="vuzix"  > Vuzix </option>
        
            <option value="htmlcss"  > Web </option>
        
            <option value="phonegap"  > PhoneGap </option>
        
            <option value="titanium"  > Titanium </option>
        
            <option value="xamarin"  > Xamarin </option>
        
            <option value=""  > --- </option>
        
            <option value="cloud"  > Targets API </option>
        
    </select>
    


    <form action="search.html"><input id="search" type="text" placeholder="Search documentation" name="q" /></form>


    </div>

     <div id="mainnav">
    <nav id="toc">
        
    <ol>
    
        <li>
            <a href="gettingstartedandroid.html#getting-started">Getting started</a>
            
                
    <ol>
    
        <li>
            <a href="setupguideandroid.html#setup-guide-android">Setup Guide Android</a>
            
        </li>
    
        <li>
            <a href="supporteddevicesandroid.html#supported-android-devices">Supported Android Devices</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="samples.html#examples">Examples</a>
            
                
    <ol>
    
        <li>
            <a href="imagerecognition.html#image-recognition">Image Recognition</a>
            
        </li>
    
        <li>
            <a href="imagerecognitionand3d.html#3d-models">3D Models</a>
            
        </li>
    
        <li>
            <a href="poi.html#point-of-interest-poi">Point Of Interest (POI)</a>
            
        </li>
    
        <li>
            <a href="retrievingpoidata.html#retrieving-poi-data">Retrieving POI Data</a>
            
        </li>
    
        <li>
            <a href="browsingpois.html#browsing-pois">Browsing POIs</a>
            
        </li>
    
        <li>
            <a href="video.html#video-drawables">Video Drawables</a>
            
        </li>
    
        <li>
            <a href="imagerecognitionandgeo.html#image-recognition-and-geo">Image Recognition And Geo</a>
            
        </li>
    
        <li>
            <a href="solarsystemir.html#solar-system-ir">Solar System (IR)</a>
            
        </li>
    
        <li>
            <a href="solarsystemgeo.html#solar-system-geo">Solar System (Geo)</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="workflow.html#development-workflow">Development Workflow</a>
            
                
    <ol>
    
        <li>
            <a href="workflow.html#code-test-debug">Code, Test, Debug</a>
            
        </li>
    
        <li>
            <a href="workflow.html#on-device-debugging">On-Device Debugging</a>
            
        </li>
    
        <li>
            <a href="assetsworkflow.html#3d-assets-workflow">3D Assets Workflow</a>
            
        </li>
    
        <li>
            <a href="assetsworkflow.html#working-with-3d-animations">Working with 3D Animations</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="triallicense.html#free-trial-license">Free Trial License</a>
            
                
    <ol>
    
        <li>
            <a href="triallicense.html#how-to-obtain-a-free-trial-license">How to obtain a free trial license</a>
            
        </li>
    
        <li>
            <a href="triallicense.html#where-should-i-enter-the-license-key">Where should I enter the license key</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="tools.html#tools">Tools</a>
            
                
    <ol>
    
        <li>
            <a href="ade.html#ade">ADE</a>
            
        </li>
    
        <li>
            <a href="logger.html#logger">Logger</a>
            
        </li>
    
        <li>
            <a href="targetmanagement.html#target-management">Target Management</a>
            
        </li>
    
        <li>
            <a href="targetguide.html#best-practice-for-target-images">Best practice for target images</a>
            
        </li>
    
        <li>
            <a href="encoder.html#wikitude-3d-encoder">Wikitude 3D Encoder</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="referenceandroid.html#reference">Reference</a>
            
                
    <ol>
    
        <li>
            <a href="referenceandroid.html#javascript-api">JavaScript API</a>
            
        </li>
    
        <li>
            <a href="referenceandroid.html#android-javadocs">Android JavaDocs</a>
            
        </li>
    
        <li>
            <a href="sdu-dbs.html#sdu-and-dbs">SDU and DBS</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="migration-android.html#migration">Migration</a>
            
                
    <ol>
    
        <li>
            <a href="migration-android.html#migrate-from-33-to-40">Migrate from 3.3 to 4.0</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-32-to-33">Migrate from 3.2 to 3.3</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-31-to-32">Migrate from 3.1 to 3.2</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-30-to-31">Migrate from 3.0 to 3.1</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-20-to-30">Migrate from 2.0 to 3.0</a>
            
        </li>
    
        <li>
            <a href="migration-common.html#upgrading-targets-for-sdk-4x">Upgrading targets for SDK 4.x</a>
            
        </li>
    
        <li>
            <a href="migration-common.html#migrating-targets-from-sdk-1x">Migrating targets from SDK 1.x</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-android-release-notes">Wikitude SDK Android Release Notes</a>
            
                
    <ol>
    
        <li>
            <a href="changelog.html#wikitude-sdk-40">Wikitude SDK 4.0</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-33">Wikitude SDK 3.3</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-32">Wikitude SDK 3.2</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-31">Wikitude SDK 3.1</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-30">Wikitude SDK 3.0</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-20">Wikitude SDK 2.0</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-12">Wikitude SDK 1.2</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-11">Wikitude SDK 1.1</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-10">Wikitude SDK 1.0</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

    </nav>
    
    <nav id="links">
        <ul>
            
        </ul>
    </nav>
    
      <footer id="footer">
        &copy; 2012 -2014 <a href="http://www.wikitude.com">Wikitude GmbH</a> Â· <a href="http://www.wikitude.com/imprint">Imprint</a>
        </footer>
         </div>
</div>
        <div id="content">
            <a name="image-recognition"></a><h2>Image Recognition</h2>
<p>This example shows how to recognize images in the viewfinder and overlay it with images. Furthermore it shows how to recognize multiple different images and how to react on user clicks on the overlaid elements.</p>
<p>For a better understanding, here are some terms that will be used in the following and other section of this documentation related to vision-based augmented reality.</p>
<ul>
<li><p><strong>Target</strong>: A target image and its associated extracted data that is used by the tracker to recognize an image.</p>
</li>
<li><p><strong>Target collection</strong>: An archive storing a collection of targets that can be recognized by the tracker. A target collection can hold up to 1000 targets.</p>
</li>
<li><p><strong>Tracker</strong>: The tracker analyzes the live camera image and detects the targets stored in its associated target collection. Multiple trackers can be created, however only one tracker can be active for recognition at any given time.</p>
</li>
</ul>
<p>This sample consists of five parts</p>
<ol>
<li><a href="#imageontarget">Image on Target</a></li>
<li><a href="#multipletarget">Multiple Targets</a></li>
<li><a href="#interactivity">Interactivity</a></li>
<li><a href="#htmldrawables">Adding HTML content</a></li>
<li><a href="#bonussparkle">Bonus: Sparkle Animations</a></li>
</ol>
<p><a id="imageontarget"></a></p>
<a name="image-on-target-14"></a><h3>Image on Target (1/4)</h3>
<p>With these terms in mind let&#39;s start by defining what actually should be recognized (target) and create a corresponding target collection that the tracker can use. In this case, the target collection includes the following single magazine page.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 2</a></p>
<p><img src="images/magazine_page_one.jpeg" alt="Page of a magazine that should be augmented." title="Page of a magazine that should be augmented"></p>
<p>See <a href="targetmanagement.html">Target Management</a> for instructions how to create target collections which can be used in the Wikitude SDK.</p>
<p>This is the same process for every use of image recognition in ARchitect. You&#39;ll first need to define your targets and then create a target collection for it. Now let us have a look at the JavaScript for enabling image recognition.</p>
<pre><code class="lang-js">// Initialize Tracker
// Important: If you replace the tracker file with your own, make sure to change the target name accordingly.
// Use a specific target name to match only a certain target or use a wildcard to match any or a certain group of targets.

this.tracker = new AR.Tracker(&quot;assets/magazine.wtc&quot;, {
    onLoaded: this.worldLoaded
});

// Create overlay for page one
var imgOne = new AR.ImageResource(&quot;assets/imageOne.png&quot;);
var overlayOne = new AR.ImageDrawable(imgOne, 1, {
    offsetX: -0.15,
    offsetY: 0
});

var pageOne = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: overlayOne
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_1_ImageOnTarget/js/imagerecognition.js#L19-L41">GitHub</a>
</div>

<p>First an  <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.Tracker</code></a> needs to be created in order to start the recognition engine. It is initialized with a URL specific to the target collection. Optional parameters are passed as object in the last argument. In this case a callback function for the <code>onLoaded</code> trigger is set. Once the tracker is fully loaded the function <code>worldLoaded()</code> is called.</p>
<p>The next step is to create the augmentation. In this example an image resource is created and passed to the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a>. A drawable is a visual component that can be connected to an target image  <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> or a geolocated object  <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a>. The <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> is initialized by the image and its size. Optional parameters allow for position it relative to the recognized target.</p>
<p>The last line combines everything by creating an <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> with the previously created tracker, the name of the image target and the drawable that should augment the recognized image.
Please note that in this case the target name is a wildcard <code>*</code>. Wildcards can be used to match any target defined in the target collection. If you want to match specific targets only for a particular <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> simply provide the target name as specified in the target collection.</p>
<div class="warning"> 
<strong>Recognize your own images</strong>

 <ol>
 <li>Upload your images to the <a href="http://www.wikitude.com/developer/tools/target-manager" target="_top">target management tool (log-in required)</a></li>
 <li>Generate your target collection file (.wtc)</li>
 <li>In your code create an  <code>AR.Tracker</code> and load the target collection file from the previous step</li>
 <li>Create an AR.Trackable2DObject and assign <strong>your</strong> targetName</li>
 </ol>
<br />

Make sure that the <code>targetName</code> used with the <code>AR.Trackable2DObject</code> correspond to one of the target names in your target collection. You can also use a wildcard to match any target or only a specific subset of targets. Please refer to the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> main documentation for more information about wildcards.

</div>

<p><a id="multipletarget"></a></p>
<a name="multiple-targets-24"></a><h3>Multiple Targets (2/4)</h3>
<p>Adding multiple targets to a target collection is straightforward. Simply follow the guide at <a href="targetmanagement.html">Target Management</a>. Each target in the target collection is identified by its <code>target name</code>. By using this <code>target name</code>, it is possible to create an <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> for every target in the target collection.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 3</a></p>
<p><img src="images/magazine_page_two.jpeg" alt="Second page of a magazine that should be augmented." title="Second page of a magazine that should be augmented."></p>
<pre><code class="lang-js">// Create overlay for page two
var imgTwo = new AR.ImageResource(&quot;assets/imageTwo.png&quot;);
var overlayTwo = new AR.ImageDrawable(imgTwo, 0.5, {
    offsetX: 0.12,
    offsetY: -0.01
});
var pageTwo = new AR.Trackable2DObject(this.tracker, &quot;pageTwo&quot;, {
    drawables: {
        cam: overlayTwo
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_2_MultipleTargets/js/imagerecognition.js#L48-L61">GitHub</a>
</div>

<p>Similar to the first part, the image resource and the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> for the second overlay are created. The <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> for the second page uses the same tracker but with a different target name.</p>
<p><a id="interactivity"></a></p>
<a name="interactivity-34"></a><h3>Interactivity (3/4)</h3>
<p>The final step is to add interactivity to the image target. For this example a button is added to each target that opens a webpage.</p>
<p>The button is created similar to the overlay feature. An <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a> defines the look of the button and is reused for both buttons.</p>
<pre><code>this.imgButton = new AR.ImageResource(&quot;assets/wwwButton.png&quot;);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_3_Interactivity/js/imagerecognition.js#L28">GitHub</a>
</div>

<p>For each target an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> for the button is created by utilizing the helper function <code>createWwwButton(url, options)</code>. The returned drawable is then added to the <code>drawables.cam</code> array on creation of the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>.</p>
<pre><code class="lang-js">var pageOneButton = this.createWwwButton(&quot;http://www.wikitude.com/pageone&quot;, 0.1, {
    offsetX: -0.25,
    offsetY: -0.25
});
var pageOne = new AR.Trackable2DObject(this.tracker, &quot;pageOne&quot;, {
    drawables: {
        cam: [overlayOne, pageOneButton]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_3_Interactivity/js/imagerecognition.js#L42-46">GitHub</a>
</div>

<p>As the button should be clickable the <code>onClick</code> trigger is defined in the options passed to the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a>. In general each drawable can be made clickable by defining its <code>onClick</code> trigger.</p>
<pre><code class="lang-js">createWwwButton: function createWwwButtonFn(url, size, options) {
    options.onClick = function() {
        AR.context.openInBrowser(url);
    };
    return new AR.ImageDrawable(this.imgButton, size, options);
},</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_3_Interactivity/js/imagerecognition.js#L81-89">GitHub</a>
</div>

<p>The function assigned to the click trigger calls <a href="../Reference/JavaScript%20Reference/classes/context.html#method_openInBrowser"><code>AR.context.openInBrowser</code></a> with the specified URL, which opens the URL in the browser.</p>
<p><a id="htmldrawables"></a></p>
<a name="adding-html-content-44"></a><h3>Adding HTML content (4/4)</h3>
<p>Using an <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> it is possible to display HTML content inside the AR scene, the same way images are displayed. In this example a weather widget is added on top of the image target to present the real-time weather in Maui, Hawaii.</p>
<p>In general any HTML content can be loaded by passing a relative or absolute URL. Additionally HTML content can also be passed as a string; please see the API reference for more details on how to specify the content when creating the drawable. This example uses a relative URL to the weather widget that is stored as <code>.html</code> file in the example&#39;s <code>assets</code> subfolder.</p>
<p>Once the content has been chosen it is important to think about the viewport the content will need in order to be laid out correctly. The viewport is the area that is available to the HTML content when it is rendered. It is independent of the actual area the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> will need on screen when placed in the AR scene.</p>
<p>The viewport width and height needs to be set when constructing the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> and should also be set as meta tag inside the  HTML content that is used. This tells the HTML rendering engine to use the specified viewport size during rendering.</p>
<pre><code class="lang-html">&lt;meta name=&quot;viewport&quot; 
      content=&quot;target-densitydpi=device-dpi, width = 320, user-scalable = 0&quot;&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_4_HtmlDrawable/assets/weather.html#L3">GitHub</a>
</div>

<p>Make sure that the value of <code>width</code> is set according to the size (in pixel) the HTML content needs. It should also correspond to the <code>viewportWidth</code> value specified during the creation of the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a>.</p>
<p>Similar to  <code>viewportWidth</code> the <code>viewportHeight</code> is specified to define the available pixel height during rendering of the content. If you are unsure of the pixel size of the HTML content at hand, you can use the developer tools built into modern browsers (e.g. WebInspector) to take measure.</p>
<p>In the code example below we are putting that all together to a working <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a>. The created drawable is added to the list of <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> drawables just like any other drawable.</p>
<pre><code class="lang-js">var weatherWidget = new AR.HtmlDrawable({
    uri: &quot;assets/weather.html&quot;
}, 0.25, {
    viewportWidth: 320,
    viewportHeight: 100,
    backgroundColor: &quot;#FFFFFF&quot;,
    offsetX: +0.36,
    offsetY: 0.5,
    horizontalAnchor: AR.CONST.HORIZONTAL_ANCHOR.RIGHT,
    verticalAnchor: AR.CONST.VERTICAL_ANCHOR.TOP,
    clickThroughEnabled: true,
    allowDocumentLocationChanges: false,
    onDocumentLocationChanged: function onDocumentLocationChangedFn(uri) {
        AR.context.openInBrowser(uri);
    }
});
var pageOne = new AR.Trackable2DObject(this.tracker, &quot;pageOne&quot;, {
    drawables: {
        cam: [overlayOne, pageOneButton, weatherWidget, sparkles]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_4_HtmlDrawable/js/imagerecognition.js#L68-L83">GitHub</a>
</div>

<p>Interaction with an <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> is controlled with the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_clickThroughEnabled"><code>clickThroughEnabled</code></a> and <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_allowDocumentLocationChanges"><code>allowDocumentLocationChanges</code></a> properties. Setting <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_clickThroughEnabled"><code>clickThroughEnabled</code></a> will forward click events to the HTML content making it possible to follow links or click buttons. If the content of the HTML drawable should not change <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_allowDocumentLocationChanges"><code>allowDocumentLocationChanges</code></a> can be set to <code>false</code> so links are not followed. It is still possible to react on clicked links by using the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#event_onDocumentLocationChanged"><code>onDocumentLocationChanged</code></a> trigger. The example uses this trigger to open clicked links fullscreen in a browser. The result then looks like this</p>
<p><img src="images/IRExample_HTML_2.jpg" alt="HTML Drawable - Real time weather widget">
<a id="bonussparkle"></a></p>
<a name="bonus-sparkles"></a><h3>Bonus: Sparkles</h3>
<p>This section adds a little bonus to the above example. Sprite sheet animations can be used to animate images similar to animated GIFs and are used in this example to add sparkles to the overlay.</p>
<p>A sprite sheet is an image file that contains all key frame images required for the animation. The key frame image size (width and height) is passed at creation time and must be equal for all key frame images. Key frame images will be managed in an array, starting with entry 0. The key frame image array will be filled from left to right, row by row. Any partly filled key frames at the edge of the sprites sheet will be ignored.</p>
<p><img src="images/imageSparkles.png" alt="Sprite sheet of sparkles for this example." title="Sprite sheet of sparkles for this example."></p>
<p>First the image resource is created which is used for creating the <a href="../Reference/JavaScript%20Reference/classes/AnimatedImageDrawable.html"><code>AR.AnimatedImageDrawable</code></a>. Since the width/height of the sprite sheet is 512 and it carries 16 key frames, the width and height of a single image is 128. So we set 128 as the width and height of the <a href="../Reference/JavaScript%20Reference/classes/AnimatedImageDrawable.html"><code>AR.AnimatedImageDrawable</code></a>.</p>
<pre><code class="lang-js">// Sparkles
var imgSparkles = new AR.ImageResource(&quot;assets/imageSparkles.png&quot;);
var sparkles = new AR.AnimatedImageDrawable(imgSparkles, 0.25, 128, 128, {
    offsetX: -0.2,
    offsetY: 0.5,
    rotation: 75
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_5_Bonus-Sparkles/js/imagerecognition.js#L36-L41">GitHub</a>
</div>

<p>To start the animation the order of the keyframes needs to be passed as array. Additionally the time each frame is displayed in ms and the loop count needs to be defined. In this case each image is displayed 100ms before it changes and a loop count of <code>-1</code> plays the animation in an infinite loop.</p>
<pre><code class="lang-js">sparkles.animate([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], 100, -1);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_5_Bonus-Sparkles/js/imagerecognition.js#L46">GitHub</a>
</div>

<p>The last step is to add it as drawable to the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> so it will be overlaid on the first page.</p>
<pre><code class="lang-js">var pageOne = new AR.Trackable2DObject(this.tracker, &quot;pageOne&quot;, {
    drawables: {
        cam: [overlayOne, pageOneButton, weatherWidget, sparkles]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_5_Bonus-Sparkles/js/imagerecognition.js#L106-110">GitHub</a>
</div>

        </div>
      
    </div>
</body>
</html>
