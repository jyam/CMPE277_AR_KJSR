<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Wikitude SDK Android 4.0 Documentation</title>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans&subset=latin">
    <link type="text/css" rel="stylesheet" href="css/reset.css">
    <link type="text/css" rel="stylesheet" href="css/docs.css">
    <link type="text/css" rel="stylesheet" href="css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="css/github.min.css">
    <link type="text/css" rel="stylesheet" href="css/default.min.css">
    
    <script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="js/highlight-8.0.min.js"></script>
    <script type="text/javascript" src="js/lunr.min-0.5.3.js"></script>
    <script type="text/javascript" src="js/deprecated.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            // Every image referenced from a Markdown document
            $("#content img").each(function() {
                // Let's put a caption if there is one
                if($(this).attr("alt"))
                    $(this).wrap('<figure class="image"></figure>')
                        .after('<figcaption>'+$(this).attr("alt")+'</figcaption>');
                });
        });
    </script>

    <script type="text/javascript">
    hljs.initHighlightingOnLoad();
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            if(isVersionDeprecated())
                document.getElementById('deprecatedNote').style.display='block';
            document.getElementById("documentationSelect").onchange = function() {
                var selectedOption = this.value;
                 console.log(selectedOption);
                 window.top.location.href = "http://www.wikitude.com/developer/documentation/" + selectedOption;
                }
        });
    </script>
</head>
<body>
    <div id="page">
        <a name="top" />
         

<div id="sidebar">
    <div id="topnav">
    <img src="images/140529_WT_SDK_Logo_01_v3.png">
    <h1><a href="">Documentation</a></h1>
    <h2>Wikitude SDK Android</h2>
    
    <div id="version">version: 4.0</div>
    
    <div id="deprecatedNote" class="warning" style="display:none;">Note you are viewing the documentation of a deprecated version. Please check <a href="http://www.wikitude.com/developer/documentation">www.wikitude.com/developer/documentation</a></div>
   
    
    Other versions:
    <select id="documentationSelect">
        
            <option value="android"  selected > Android </option>
        
            <option value="epson"  > Epson </option>
        
            <option value="ios"  > iOS </option>
        
            <option value="glass"  > Google Glass </option>
        
            <option value="vuzix"  > Vuzix </option>
        
            <option value="htmlcss"  > Web </option>
        
            <option value="phonegap"  > PhoneGap </option>
        
            <option value="titanium"  > Titanium </option>
        
            <option value="xamarin"  > Xamarin </option>
        
            <option value=""  > --- </option>
        
            <option value="cloud"  > Targets API </option>
        
    </select>
    


    <form action="search.html"><input id="search" type="text" placeholder="Search documentation" name="q" /></form>


    </div>

     <div id="mainnav">
    <nav id="toc">
        
    <ol>
    
        <li>
            <a href="gettingstartedandroid.html#getting-started">Getting started</a>
            
                
    <ol>
    
        <li>
            <a href="setupguideandroid.html#setup-guide-android">Setup Guide Android</a>
            
        </li>
    
        <li>
            <a href="supporteddevicesandroid.html#supported-android-devices">Supported Android Devices</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="samples.html#examples">Examples</a>
            
                
    <ol>
    
        <li>
            <a href="imagerecognition.html#image-recognition">Image Recognition</a>
            
        </li>
    
        <li>
            <a href="imagerecognitionand3d.html#3d-models">3D Models</a>
            
        </li>
    
        <li>
            <a href="poi.html#point-of-interest-poi">Point Of Interest (POI)</a>
            
        </li>
    
        <li>
            <a href="retrievingpoidata.html#retrieving-poi-data">Retrieving POI Data</a>
            
        </li>
    
        <li>
            <a href="browsingpois.html#browsing-pois">Browsing POIs</a>
            
        </li>
    
        <li>
            <a href="video.html#video-drawables">Video Drawables</a>
            
        </li>
    
        <li>
            <a href="imagerecognitionandgeo.html#image-recognition-and-geo">Image Recognition And Geo</a>
            
        </li>
    
        <li>
            <a href="solarsystemir.html#solar-system-ir">Solar System (IR)</a>
            
        </li>
    
        <li>
            <a href="solarsystemgeo.html#solar-system-geo">Solar System (Geo)</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="workflow.html#development-workflow">Development Workflow</a>
            
                
    <ol>
    
        <li>
            <a href="workflow.html#code-test-debug">Code, Test, Debug</a>
            
        </li>
    
        <li>
            <a href="workflow.html#on-device-debugging">On-Device Debugging</a>
            
        </li>
    
        <li>
            <a href="assetsworkflow.html#3d-assets-workflow">3D Assets Workflow</a>
            
        </li>
    
        <li>
            <a href="assetsworkflow.html#working-with-3d-animations">Working with 3D Animations</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="triallicense.html#free-trial-license">Free Trial License</a>
            
                
    <ol>
    
        <li>
            <a href="triallicense.html#how-to-obtain-a-free-trial-license">How to obtain a free trial license</a>
            
        </li>
    
        <li>
            <a href="triallicense.html#where-should-i-enter-the-license-key">Where should I enter the license key</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="tools.html#tools">Tools</a>
            
                
    <ol>
    
        <li>
            <a href="ade.html#ade">ADE</a>
            
        </li>
    
        <li>
            <a href="logger.html#logger">Logger</a>
            
        </li>
    
        <li>
            <a href="targetmanagement.html#target-management">Target Management</a>
            
        </li>
    
        <li>
            <a href="targetguide.html#best-practice-for-target-images">Best practice for target images</a>
            
        </li>
    
        <li>
            <a href="encoder.html#wikitude-3d-encoder">Wikitude 3D Encoder</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="referenceandroid.html#reference">Reference</a>
            
                
    <ol>
    
        <li>
            <a href="referenceandroid.html#javascript-api">JavaScript API</a>
            
        </li>
    
        <li>
            <a href="referenceandroid.html#android-javadocs">Android JavaDocs</a>
            
        </li>
    
        <li>
            <a href="sdu-dbs.html#sdu-and-dbs">SDU and DBS</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="migration-android.html#migration">Migration</a>
            
                
    <ol>
    
        <li>
            <a href="migration-android.html#migrate-from-33-to-40">Migrate from 3.3 to 4.0</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-32-to-33">Migrate from 3.2 to 3.3</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-31-to-32">Migrate from 3.1 to 3.2</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-30-to-31">Migrate from 3.0 to 3.1</a>
            
        </li>
    
        <li>
            <a href="migration-android.html#migrate-from-20-to-30">Migrate from 2.0 to 3.0</a>
            
        </li>
    
        <li>
            <a href="migration-common.html#upgrading-targets-for-sdk-4x">Upgrading targets for SDK 4.x</a>
            
        </li>
    
        <li>
            <a href="migration-common.html#migrating-targets-from-sdk-1x">Migrating targets from SDK 1.x</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-android-release-notes">Wikitude SDK Android Release Notes</a>
            
                
    <ol>
    
        <li>
            <a href="changelog.html#wikitude-sdk-40">Wikitude SDK 4.0</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-33">Wikitude SDK 3.3</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-32">Wikitude SDK 3.2</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-31">Wikitude SDK 3.1</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-30">Wikitude SDK 3.0</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-20">Wikitude SDK 2.0</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-12">Wikitude SDK 1.2</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-11">Wikitude SDK 1.1</a>
            
        </li>
    
        <li>
            <a href="changelog.html#wikitude-sdk-10">Wikitude SDK 1.0</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

    </nav>
    
    <nav id="links">
        <ul>
            
        </ul>
    </nav>
    
      <footer id="footer">
        &copy; 2012 -2014 <a href="http://www.wikitude.com">Wikitude GmbH</a> · <a href="http://www.wikitude.com/imprint">Imprint</a>
        </footer>
         </div>
</div>
        <div id="content">
            <a name="getting-started"></a><h1>Getting started</h1>
<p><img src="images/WT_HG_Developer_Overview_IMG.png" style="float:right;"/></p>
<p>Welcome to the Wikitude SDK. This document is designed to help you from your very first steps with the Wikitude SDK all the way through to advanced concepts and examples for developing your augmented reality project. </p>
<a name="recommended-usage-of-this-documentation"></a><h3>Recommended Usage of this Documentation</h3>
<p>The documentation is arranged in a way to guide you through the various steps in your development process. We recommend  following each of the steps outlined below and reading the documentation in the order displayed.</p>
<ol>
<li><strong><a href="setupguideandroid.html">Setup your project</a></strong> - in this section we describe the necessary steps to setup a project in a detailed guide.</li>
<li><p><strong><a href="samples.html">View the samples</a></strong> - all of the included samples are complete augmented reality experiences which run in <code>SDKExamples</code> app. Browse through this section and get an idea of what the SDK is capable of. The relevant parts of the samples are described in more detail to highlight the applied concepts and patterns. These examples are designed to help you get off to a great start with the Wikitude SDK.</p>
<p> Viewing samples based on vision based augmented reality requires the corresponding reference images. All of them are available directly in the description of the sample or available as a collection in a <a href="images/target_images_examples.pdf">PDF file</a>, which you can either view on the screen or print.</p>
</li>
<li><strong><a href="workflow.html">Write your own Architect World</a></strong> - this section will introduce you to best practices for your development workflow once you write your own code for your augmented reality experience.</li>
<li><strong><a href="tools.html">Get good at what you do</a></strong> - the Wikitude SDK comes with several tools which help you to develop more complex augmented reality experiences. This section covers how to use these tools and how they will assist you in your daily work.</li>
</ol>
<a name="the-wikitude-sdk-augmented-reality-for-your-own-app"></a><h3>The Wikitude SDK - Augmented Reality for your own app</h3>
<p>The Wikitude SDK is a software library and framework for mobile apps used to create augmented reality experiences. The SDK supports any kind of location based use case as well as use cases which require image recognition and tracking technology (vision based augmented reality). </p>
<a name="how-to-code-for-the-wikitude-sdk"></a><h3>How to code for the Wikitude SDK</h3>
<p>The Wikitude SDK builds heavily on web technologies (HTML, JavaScript, CSS) to allow developers to write cross platform augmented reality experiences. These augmented reality experiences are called ARchitect worlds and are basically ordinary HTML pages that can utilize the ARchitect API to create objects in augmented reality.</p>
<p>Integrating the Wikitude SDK into your application is done by adding the platform specific view component called <code>ARchitectView</code> to your applications user interface. See the setup guide for how to setup a native project and load an ARchitect World.</p>
<p>Get started with writing augmented reality experiences by viewing through the examples included in the SDK. Each example is explained in detail in this documentation. Additional information about the ARchitect API can be found in the included API specification.</p>
<a name="the-wikitude-developer-portal"></a><h3>The Wikitude Developer Portal</h3>
<p>The <a href="http://www.wikitude.com" target="_top">Wikitude Developer Section</a> should be your first stop when you have specific development related questions. The portal hosts a very active <a href="http://www.wikitude.com/developer/developer-forum" target="_top">Developer Community Forum</a> where Wikitude staff members are constantly assisting other developers with helpful tips and advice. A <a href="http://www.wikitude.com/developer/knowledge-base" target="_top">Knowledge Base</a> helps with various questions.</p>
<a name="feedback-and-contact"></a><h3>Feedback and Contact</h3>
<p>We are always interested in your feedback and suggestions how we can improve this documentation. Please use the <a href="http://www.wikitude.com/contact" target="_top">contact form</a> on our website or visit us on <a href="https://plus.google.com/103004921345651739447/" target="_top">Google+</a> or <a href="http://www.facebook.com/WIKITUDE" target="_top">Facebook</a></p>

<a name="setup-guide-android"></a><h2>Setup Guide Android</h2>
<p><img src="images/WT_HG_Developer_GetStarted_Android_IMG.png" /></p>
<a name="project-setup"></a><h3>Project Setup</h3>
<ul>
<li>Create a new <a href="http://developer.android.com/tools/projects/projects-eclipse.html#CreatingAProject" target="_top">Android Application Project</a> (There is also a working SampleProject bundled in this SDK, where all these steps are already made)</li>
<li>Create a <code>libs</code> folders in your project root directory and copy <code>libs/wikitudesdk.jar</code></li>
<li><p>In Eclipse enter <code>Preferences</code> -&gt; <code>Android</code> -&gt; <code>Build</code> and ensure the option <code>Force error when external jars contain native libraries</code> is unchecked</p>
<p>  <img src="images/android_setup_nativelib.png" alt="External jar contains native libraries"></p>
</li>
<li><p>Add the following permissions to your Manifest.xml</p>
</li>
</ul>
<pre><code class="lang-xml">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_GPS&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
&lt;uses-feature android:name=&quot;android.hardware.camera&quot; android:required=&quot;true&quot; /&gt;
&lt;uses-feature android:name=&quot;android.hardware.location&quot; android:required=&quot;true&quot; /&gt;
&lt;uses-feature android:name=&quot;android.hardware.sensor.accelerometer&quot; android:required=&quot;true&quot; /&gt;
&lt;uses-feature android:name=&quot;android.hardware.sensor.compass&quot; android:required=&quot;true&quot; /&gt;
&lt;uses-feature android:glEsVersion=&quot;0x00020000&quot; android:required=&quot;true&quot; /&gt;
&lt;uses-sdk android:targetSdkVersion=&quot;19&quot; android:minSdkVersion=&quot;9&quot;/&gt;</code></pre>
<ul>
<li>The activity holding the AR-View (called <code>architectView</code> in the following) must have set <code>android:configChanges=&quot;screenSize|orientation&quot;</code> in the <code>AndroidManifest.xml</code>,
for example this could look like:</li>
</ul>
<pre><code>&lt;activity android:name=&quot;com.yourcompany.yourapp.YourArActivity&quot;
   android:configChanges=&quot;screenSize|orientation&quot;/&gt;</code></pre>
<ul>
<li>Enter a valid trial license key. Read this chapter on how to <a href="triallicense.html">obtain a free trial key</a>.</li>
</ul>
<a name="ar-view-in-activity"></a><h3>AR View in Activity</h3>
<p>Keep in mind that the Wikitude SDK is not a native Android SDK as you know from other SDK&#39;s. The basic concept is to add an <code>architectView</code> to your project and notify it about lifecycle events. The <code>architectView</code> creates a camera surface and handles sensor events.
The experience itself, sometime referred to as ARchitect World, is implemented in JavaScript and packaged in your application&#39;s asset-folder (as in this project) or on your own server.
The experiences are written in HTML and JavaScript and call methods in Wikitude&#39;s <code>AR</code>-namespace (e.g. <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a>). </p>
<p>You have to include </p>
<pre><code> &lt;script src=&quot;architect://architect.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>in your HTML files to use the <code>AR</code> namespace and the <code>architectView</code> will handle them properly. To test an ARchitect World on a desktop browser, you must include <code>ade.js</code> tool instead to avoid JavaScript errors and see a development console.  </p>
<p>It is recommended to handle your augmented reality experience in a separate <a href="http://developer.android.com/reference/android/app/Activity.html" target="_top">Activity</a>. 
Declare the <code>architectView</code> inside a <a href="http://developer.android.com/guide/topics/ui/declaring-layout.html" target="_top">layout XML</a>.
E.g. Add this within <a href="http://developer.android.com/reference/android/widget/FrameLayout.html" target="_top">FrameLayout</a>&#39;s parent tags.</p>
<pre><code>&lt;com.wikitude.architect.ArchitectView android:id=&quot;@+id/architectView&quot;
   android:layout_width=&quot;fill_parent&quot; android:layout_height=&quot;fill_parent&quot;/&gt;</code></pre>
<p>ArchitectView is creating a camera surface so ensure to properly <a href="http://developer.android.com/reference/android/hardware/Camera.html" target="_top">release the camera</a> in case you&#39;re using it somewhere else in your application. 
Besides the rear-camera the ArchitectView also makes use of compass and accelerometer values, requires <a href="http://www.khronos.org/opengles/2_X/" target="_top">OpenGL 2.0</a> and at least Android 2.3. 
<code>ArchitectView.isDeviceSupported(Context context)</code> checks wether the current device has all required hard- and software in place or not.</p>
<p><em>Note: Make AR-View only accessible to supported devices</em> </p>
<p>It is very important to notify the <code>ArchitectView</code> about <a href="http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle" target="_top">life-cycle events</a> of the Activity.
Call architectView&#39;s <code>onCreate(), onPostCreate(), onPause(), onResume(), onDestroy()</code> inside your Activity&#39;s lifecycle methods.
Best practice is to define a member variable for the <code>architectView</code> in your Activity. Set it right after <code>setContentView</code>in Activity&#39;s <code>onCreate()</code>, and then access <code>architectView</code> via member-variable later on.</p>
<pre><code>this.architectView = (ArchitectView)this.findViewById( R.id.architectView );
final ArchitectConfig config = new ArchitectConfig( &quot;&quot; /* license key */ );
this.architectView.onCreate( config );</code></pre>
<p>Activity&#39;s <code>onPostCreate()</code> is the best place to load the AR-Experience.</p>
<pre><code>this.architectView.onPostCreate();
this.architectView.load( &quot;YOUR-AR-URL&quot; );</code></pre>
<p>The <code>architectView.load()</code> argument is the path to the html file that defines your AR experience. It can be relative to the asset folder root or a web-url (starting with <code>http://</code> or <code>https://</code>).
e.g. <code>architectView.load(&#39;arexperience.html&#39;)</code> opens the html in your project&#39;s <code>assets</code>-folder, whereat <code>architectView.load(&#39;http://your-server.com/arexperience.html&#39;)</code> loads the file from a server.</p>
<p><em>Note: You can only pass arguments to the html file when loading it via url. <code>architectView.load(&#39;arexperience.html?myarg=1&#39;)</code> does not work.</em></p>
<a name="location"></a><h3>Location</h3>
<p>Management of the location is important in  location based augmented reality applications. Depending on the use-case location is used via GPS or network and may be updated every second or once in a while.
Although the SDKExamples project provides a basic implementation of a <code>LocationProvider</code> this is by far not the best <a href="http://developer.android.com/guide/topics/location/strategies.html" target="_top">location strategy</a> available for Android.</p>
<p><strong>Please use your own advanced location strategy implementation in case you have special requirements</strong>.</p>
<a name="android-44-kitkat"></a><h3>Android 4.4 (KitKat)</h3>
<p>Android SDK 19 (KitKat) changes various implementations of the WebView. Please have a look at the <a href="http://developer.android.com/guide/webapps/migrating.html" target="_top">Android 4.4 WebView Migration</a> document by Google for details. Furthermore debugging of your ARchitect World improved a lot, have a look at the <a href="http://developer.android.com/guide/webapps/debugging.html">Debugging Web Apps</a> documentation by Google for a step-by-step guide.</p>

<a name="supported-android-devices"></a><h2>Supported Android Devices</h2>
<p>Wikitude SDK is running on devices fulfilling the following requirements:</p>
<table>
<tr>
<th></th>
<th style="width:42%;">Sensor-based AR (Geo-AR)</th>
<th style="width:42%;">Image recognition and tracking</th>
</tr>
<tr>
<td><a name="supporteddevicesandroid"></a><strong>Android</strong></td>
<td style="vertical-align:top;">
 <ul>
 <li>Android 2.3+ (API Level 9+) <br/>  recommended: Android 4.0+ (API Level 14+)</li>
 <li>Compass</li>
 <li>GPS and / or network positioning</li>
 <li>Accelerometer</li>
 <li><a href="http://developer.android.com/guide/practices/screens_support.html" target="_top">High resolution devices (hdpi)</a></li>
 <li>Rear-facing camera</li>
 <li><a href="http://developer.android.com/guide/topics/graphics/opengl.html" target="_top">OpenGL 2.0</a></li>
 </ul>

</td>
<td style="vertical-align:top;">
 <ul>
 <li>Android 2.3+ (API Level 9+) <br/>  recommended: Android 4.0+ (API Level 14+)</li>
  <li><a href="http://developer.android.com/guide/practices/screens_support.html" target="_top">High resolution devices (hdpi)</a></li>
   <li>Rear-facing camera</li>
 <li>Devices with a capable CPU (armv7a and NEON support) e.g.</li>
 <ul><li>Samsung Galaxy S2 or newer</li>
 <li>Nexus 4 or newer</li>
 <li>Nexus 10 (2012) or newer</li>
</ul>
 </ul>

</td>
</tr>

</table>

<p>Requirements for other operating systems and platforms are listed in <a href="supporteddevices.html">this overview</a>.</p>

<a name="supported-devices"></a><h4>Supported Devices</h4>
<p>Wikitude SDK is running on devices fulfilling the following requirements:</p>
<table>
<tr>
<th></th>
<th style="width:42%;">Sensor-based AR (Geo-AR)</th>
<th style="width:42%;">Image recognition and tracking</th>
</tr>
<tr>
<td><a name="supporteddevicesandroid"></a><strong>Android</strong></td>
<td style="vertical-align:top;">
 <ul>
 <li>Android 2.3+ (API Level 9+) <br/>  recommended: Android 4.0+ (API Level 14+)</li>
 <li>Compass</li>
 <li>GPS and / or network positioning</li>
 <li>Accelerometer</li>
 <li><a href="http://developer.android.com/guide/practices/screens_support.html" target="_top">High resolution devices (hdpi)</a></li>
 <li>Rear-facing camera</li>
 <li><a href="http://developer.android.com/guide/topics/graphics/opengl.html" target="_top">OpenGL 2.0</a></li>
 </ul>

</td>
<td style="vertical-align:top;">
 <ul>
 <li>Android 2.3+ (API Level 9+) <br/>  recommended: Android 4.0+ (API Level 14+)</li>
  <li><a href="http://developer.android.com/guide/practices/screens_support.html" target="_top">High resolution devices (hdpi)</a></li>
   <li>Rear-facing camera</li>
 <li>Devices with a capable CPU (armv7a and NEON support) e.g.</li>
 <ul><li>Samsung Galaxy S2 or newer</li>
 <li>Nexus 4 or newer</li>
 <li>Nexus 10 (2012) or newer</li>
</ul>
 </ul>

</td>
</tr>
<tr>
<td><a name="supporteddevicesepson"></a><strong>Epson</strong></td>
<td style="vertical-align:top;">
 <ul>
 <li>Epson Moverio BT-200</li>
 </ul>

</td>
<td style="vertical-align:top;">
 <ul>
 <li>Epson Moverio BT-200</li>
 </ul>
</td>
</tr>
<tr>
<td><a name="supporteddevicesglass"></a><strong>Google Glass</strong></td>
<td style="vertical-align:top;">
 <ul>
 <li>Google Glass</li>
 </ul>

</td>
<td style="vertical-align:top;">
 <ul>
 <li>Google Glass</li>
 </ul>
</td>
</tr>

<tr>
<td><a name="supporteddevicesios"></a><strong>iOS</strong></td>
<td style="vertical-align:top;">
 <ul>
 <li>Devices running iOS 6.0 and up</li>
 <li>Compass</li>
 <li>GPS and / or network positioning</li>
 <li>Accelerometer</li>
 <li>Rear-facing camera</li>
 </ul>
 </td>
<td style="vertical-align:top;">
 <ul>
  <li>Devices running iOS 6.0 and up</li>
  <li>Rear-facing camera</li>
 <li>Devices with a capable CPU (minimum Apple A4 SoC) e.g.</li>
 <ul><li>iPhone 4 or newer</li>
 <li>iPad2 or newer</li>
 <li>iPod Touch 5th gen</li></ul>
 </ul>
</td>
</tr>
<tr>
<td><a name="supporteddevicesvuzix"></a><strong>Vuzix</strong></td>
<td style="vertical-align:top;">
 <ul>
 <li>Vuzix M100</li>
 </ul>

</td>
<td style="vertical-align:top;">
 <ul>
 <li>Vuzix M100</li>
 </ul>
</td>
</tr>
</table>

<a name="examples"></a><h1>Examples</h1>
<p>The following examples should give you an overview of the capabilities offered by the Wikitude SDK. Each sample is capable of running without modifications on all supported platforms. </p>
<p>Each of the included examples is structured as following:</p>
<ul>
<li><code>index.html</code>: entry point for the experience</li>
<li><code>js/*</code>: includes the necessary JavaScript files</li>
<li><code>css/*</code>: css style sheets required</li>
<li><code>assets/*</code>: contains images, 3D models and tracker files</li>
</ul>
<p>Inside the <code>js/</code> folder the main JavaScript file is named like the example. (the example <em>Image Recognition</em> has its JavaScript code in the <code>js/imagerecognition.js</code> file). Code which is mentioned in the description of the examples can be found in this file, if not explicitly stated otherwise.</p>
<a name="samples-on-github"></a><h3>Samples on GitHub</h3>
<p>If you are just interested in browsing through the code of the augmented reality experience you can also find the entire source code of the samples on <a href="https://github.com/Wikitude/wikitude-sdk-samples" target="_top">GitHub</a>### Android SDK Examples</p>
<p>This section describes the <code>SDK Sample</code> project in detail and highlights the main features and use-cases of the Wikitude SDK.
The project is part of the SDK bundle and is an Android Eclipse project, ready to run on any of the supported Android devices.</p>
<p><em>Note: You cannot run Wikitude SDK project on Android Emulator due to OpenGL restrictions.</em></p>
<p>Run through the setup guide, install the sample project on your device and scroll through the sample list.</p>
<p>The project&#39;s <code>asset</code> folder contains implementation of the various ARchitect World&#39;s. 
Implementation of the native Android activities is available in the <code>src</code> folder. </p>
<a name="setup"></a><h3>Setup</h3>
<ul>
<li>Download latest <a href="http://developer.android.com/sdk/index.html" target="_top">Android SDK</a></li>
<li>Launch ADT, which is part of the Android SDK or <a href="http://www.eclipse.org/downloads/packages/eclipse-classic-422/junosr2" target="_top">Eclipse</a> with installed <a href="http://developer.android.com/tools/sdk/eclipse-adt.html" target="_top">Android Plugin</a> </li>
<li>From the main menu bar, select   <code>File</code> -&gt; <code>Import…</code> which will open the import wizard.</li>
<li>Select <code>General</code> -&gt; <code>Existing Project into Workspace</code> and click <code>Next</code>.</li>
<li>Choose <code>Select root directory</code>, click <code>Browse</code></li>
<li>Navigate to the <code>SDKExamples</code> project folder in your filesystem.</li>
<li>Click <code>Finish</code> to start the import.</li>
<li>Right click the project folder, click <code>Preferences</code> and <code>Android</code></li>
<li><p>Ensure you have very latest SDK (14+) checked in the Build Target list</p>
<p><img src="images/android_sdk_version.png" alt="Project Build Targets"></p>
</li>
<li><p>Use an Android device that has all hard- and software requirements (should be similar to Samsung Galaxy S2) and <a href="http://support.google.com/coordinate/bin/answer.py?hl=en&answer=2569281" target="_top">enable your location services in system settings</a></p>
</li>
<li>Enter <code>Settings</code> -&gt; <code>Applications</code> -&gt; <code>Developer</code> -&gt; check <code>USB debugging</code></li>
<li>Plug in the device via USB.</li>
<li>Right click the project folder again select <code>Run as…</code> - <code>Android Application</code> and select the target device</li>
<li>The sample application is then installed onto your device</li>
</ul>
<a name="nativejavascript-communication"></a><h3>Native/JavaScript Communication</h3>
<p>The samples mainly describe  how to launch an AR experience in your Android activity - anything relevant for AR is written in the provided HTML/JS file.</p>
<p>Although it is highly recommended to implement logic in pure HTML and JavaScript at some point in time it makes sense to interact between native Android and the JavaScript of your AR experience.</p>
<p>One may for instance pass data for points of interest (POI) from native Android to JavaScript. 
Define a method named <code>newData(json)</code> in the JavaScript file and use <code>architectView.callJavascript(newData(&#39;&quot; + poiDataAsJson +&quot;)&#39;)</code> to call the method and pass over the values properly. <a href="http://www.json.org/" target="_top">JSON Format</a> is the fastest way to pass bulk of information, like translations, metadata and POI information over to your JavaScript. 
There are several ways to <a href="http://developer.android.com/reference/org/json/package-summary.html" target="_top">create a JSON in Android</a>.</p>
<p>Sometimes events like a click in your AR experience should cause a reaction in native Android, like launching another screen when clicking a placemark or image target. To achieve that you   need to register a <code>urlListener</code> using <code>architectView.registerUrlListener()</code> in the activity.
Any <code>document.location</code> changes to <code>architectsdk://</code> will fire an event in your listener (e.g. <code>document.location = architectsdk://YOUR-INFO</code>). Listener is informed about the invoked url and can then react on.</p>
<p><em>Note: Missing urlListener registration will cause an HTTP error when calling <code>document.location = architectsdk://YOUR-INFO</code></em></p>

<a name="image-recognition"></a><h2>Image Recognition</h2>
<p>This example shows how to recognize images in the viewfinder and overlay it with images. Furthermore it shows how to recognize multiple different images and how to react on user clicks on the overlaid elements.</p>
<p>For a better understanding, here are some terms that will be used in the following and other section of this documentation related to vision-based augmented reality.</p>
<ul>
<li><p><strong>Target</strong>: A target image and its associated extracted data that is used by the tracker to recognize an image.</p>
</li>
<li><p><strong>Target collection</strong>: An archive storing a collection of targets that can be recognized by the tracker. A target collection can hold up to 1000 targets.</p>
</li>
<li><p><strong>Tracker</strong>: The tracker analyzes the live camera image and detects the targets stored in its associated target collection. Multiple trackers can be created, however only one tracker can be active for recognition at any given time.</p>
</li>
</ul>
<p>This sample consists of five parts</p>
<ol>
<li><a href="#imageontarget">Image on Target</a></li>
<li><a href="#multipletarget">Multiple Targets</a></li>
<li><a href="#interactivity">Interactivity</a></li>
<li><a href="#htmldrawables">Adding HTML content</a></li>
<li><a href="#bonussparkle">Bonus: Sparkle Animations</a></li>
</ol>
<p><a id="imageontarget"></a></p>
<a name="image-on-target-14"></a><h3>Image on Target (1/4)</h3>
<p>With these terms in mind let&#39;s start by defining what actually should be recognized (target) and create a corresponding target collection that the tracker can use. In this case, the target collection includes the following single magazine page.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 2</a></p>
<p><img src="images/magazine_page_one.jpeg" alt="Page of a magazine that should be augmented." title="Page of a magazine that should be augmented"></p>
<p>See <a href="targetmanagement.html">Target Management</a> for instructions how to create target collections which can be used in the Wikitude SDK.</p>
<p>This is the same process for every use of image recognition in ARchitect. You&#39;ll first need to define your targets and then create a target collection for it. Now let us have a look at the JavaScript for enabling image recognition.</p>
<pre><code class="lang-js">// Initialize Tracker
// Important: If you replace the tracker file with your own, make sure to change the target name accordingly.
// Use a specific target name to match only a certain target or use a wildcard to match any or a certain group of targets.

this.tracker = new AR.Tracker(&quot;assets/magazine.wtc&quot;, {
    onLoaded: this.worldLoaded
});

// Create overlay for page one
var imgOne = new AR.ImageResource(&quot;assets/imageOne.png&quot;);
var overlayOne = new AR.ImageDrawable(imgOne, 1, {
    offsetX: -0.15,
    offsetY: 0
});

var pageOne = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: overlayOne
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_1_ImageOnTarget/js/imagerecognition.js#L19-L41">GitHub</a>
</div>

<p>First an  <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.Tracker</code></a> needs to be created in order to start the recognition engine. It is initialized with a URL specific to the target collection. Optional parameters are passed as object in the last argument. In this case a callback function for the <code>onLoaded</code> trigger is set. Once the tracker is fully loaded the function <code>worldLoaded()</code> is called.</p>
<p>The next step is to create the augmentation. In this example an image resource is created and passed to the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a>. A drawable is a visual component that can be connected to an target image  <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> or a geolocated object  <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a>. The <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> is initialized by the image and its size. Optional parameters allow for position it relative to the recognized target.</p>
<p>The last line combines everything by creating an <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> with the previously created tracker, the name of the image target and the drawable that should augment the recognized image.
Please note that in this case the target name is a wildcard <code>*</code>. Wildcards can be used to match any target defined in the target collection. If you want to match specific targets only for a particular <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> simply provide the target name as specified in the target collection.</p>
<div class="warning"> 
<strong>Recognize your own images</strong>

 <ol>
 <li>Upload your images to the <a href="http://www.wikitude.com/developer/tools/target-manager" target="_top">target management tool (log-in required)</a></li>
 <li>Generate your target collection file (.wtc)</li>
 <li>In your code create an  <code>AR.Tracker</code> and load the target collection file from the previous step</li>
 <li>Create an AR.Trackable2DObject and assign <strong>your</strong> targetName</li>
 </ol>
<br />

Make sure that the <code>targetName</code> used with the <code>AR.Trackable2DObject</code> correspond to one of the target names in your target collection. You can also use a wildcard to match any target or only a specific subset of targets. Please refer to the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> main documentation for more information about wildcards.

</div>

<p><a id="multipletarget"></a></p>
<a name="multiple-targets-24"></a><h3>Multiple Targets (2/4)</h3>
<p>Adding multiple targets to a target collection is straightforward. Simply follow the guide at <a href="targetmanagement.html">Target Management</a>. Each target in the target collection is identified by its <code>target name</code>. By using this <code>target name</code>, it is possible to create an <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> for every target in the target collection.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 3</a></p>
<p><img src="images/magazine_page_two.jpeg" alt="Second page of a magazine that should be augmented." title="Second page of a magazine that should be augmented."></p>
<pre><code class="lang-js">// Create overlay for page two
var imgTwo = new AR.ImageResource(&quot;assets/imageTwo.png&quot;);
var overlayTwo = new AR.ImageDrawable(imgTwo, 0.5, {
    offsetX: 0.12,
    offsetY: -0.01
});
var pageTwo = new AR.Trackable2DObject(this.tracker, &quot;pageTwo&quot;, {
    drawables: {
        cam: overlayTwo
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_2_MultipleTargets/js/imagerecognition.js#L48-L61">GitHub</a>
</div>

<p>Similar to the first part, the image resource and the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> for the second overlay are created. The <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> for the second page uses the same tracker but with a different target name.</p>
<p><a id="interactivity"></a></p>
<a name="interactivity-34"></a><h3>Interactivity (3/4)</h3>
<p>The final step is to add interactivity to the image target. For this example a button is added to each target that opens a webpage.</p>
<p>The button is created similar to the overlay feature. An <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a> defines the look of the button and is reused for both buttons.</p>
<pre><code>this.imgButton = new AR.ImageResource(&quot;assets/wwwButton.png&quot;);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_3_Interactivity/js/imagerecognition.js#L28">GitHub</a>
</div>

<p>For each target an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> for the button is created by utilizing the helper function <code>createWwwButton(url, options)</code>. The returned drawable is then added to the <code>drawables.cam</code> array on creation of the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>.</p>
<pre><code class="lang-js">var pageOneButton = this.createWwwButton(&quot;http://www.wikitude.com/pageone&quot;, 0.1, {
    offsetX: -0.25,
    offsetY: -0.25
});
var pageOne = new AR.Trackable2DObject(this.tracker, &quot;pageOne&quot;, {
    drawables: {
        cam: [overlayOne, pageOneButton]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_3_Interactivity/js/imagerecognition.js#L42-46">GitHub</a>
</div>

<p>As the button should be clickable the <code>onClick</code> trigger is defined in the options passed to the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a>. In general each drawable can be made clickable by defining its <code>onClick</code> trigger.</p>
<pre><code class="lang-js">createWwwButton: function createWwwButtonFn(url, size, options) {
    options.onClick = function() {
        AR.context.openInBrowser(url);
    };
    return new AR.ImageDrawable(this.imgButton, size, options);
},</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_3_Interactivity/js/imagerecognition.js#L81-89">GitHub</a>
</div>

<p>The function assigned to the click trigger calls <a href="../Reference/JavaScript%20Reference/classes/context.html#method_openInBrowser"><code>AR.context.openInBrowser</code></a> with the specified URL, which opens the URL in the browser.</p>
<p><a id="htmldrawables"></a></p>
<a name="adding-html-content-44"></a><h3>Adding HTML content (4/4)</h3>
<p>Using an <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> it is possible to display HTML content inside the AR scene, the same way images are displayed. In this example a weather widget is added on top of the image target to present the real-time weather in Maui, Hawaii.</p>
<p>In general any HTML content can be loaded by passing a relative or absolute URL. Additionally HTML content can also be passed as a string; please see the API reference for more details on how to specify the content when creating the drawable. This example uses a relative URL to the weather widget that is stored as <code>.html</code> file in the example&#39;s <code>assets</code> subfolder.</p>
<p>Once the content has been chosen it is important to think about the viewport the content will need in order to be laid out correctly. The viewport is the area that is available to the HTML content when it is rendered. It is independent of the actual area the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> will need on screen when placed in the AR scene.</p>
<p>The viewport width and height needs to be set when constructing the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> and should also be set as meta tag inside the  HTML content that is used. This tells the HTML rendering engine to use the specified viewport size during rendering.</p>
<pre><code class="lang-html">&lt;meta name=&quot;viewport&quot; 
      content=&quot;target-densitydpi=device-dpi, width = 320, user-scalable = 0&quot;&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_4_HtmlDrawable/assets/weather.html#L3">GitHub</a>
</div>

<p>Make sure that the value of <code>width</code> is set according to the size (in pixel) the HTML content needs. It should also correspond to the <code>viewportWidth</code> value specified during the creation of the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a>.</p>
<p>Similar to  <code>viewportWidth</code> the <code>viewportHeight</code> is specified to define the available pixel height during rendering of the content. If you are unsure of the pixel size of the HTML content at hand, you can use the developer tools built into modern browsers (e.g. WebInspector) to take measure.</p>
<p>In the code example below we are putting that all together to a working <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a>. The created drawable is added to the list of <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> drawables just like any other drawable.</p>
<pre><code class="lang-js">var weatherWidget = new AR.HtmlDrawable({
    uri: &quot;assets/weather.html&quot;
}, 0.25, {
    viewportWidth: 320,
    viewportHeight: 100,
    backgroundColor: &quot;#FFFFFF&quot;,
    offsetX: +0.36,
    offsetY: 0.5,
    horizontalAnchor: AR.CONST.HORIZONTAL_ANCHOR.RIGHT,
    verticalAnchor: AR.CONST.VERTICAL_ANCHOR.TOP,
    clickThroughEnabled: true,
    allowDocumentLocationChanges: false,
    onDocumentLocationChanged: function onDocumentLocationChangedFn(uri) {
        AR.context.openInBrowser(uri);
    }
});
var pageOne = new AR.Trackable2DObject(this.tracker, &quot;pageOne&quot;, {
    drawables: {
        cam: [overlayOne, pageOneButton, weatherWidget, sparkles]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_4_HtmlDrawable/js/imagerecognition.js#L68-L83">GitHub</a>
</div>

<p>Interaction with an <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html"><code>AR.HtmlDrawable</code></a> is controlled with the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_clickThroughEnabled"><code>clickThroughEnabled</code></a> and <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_allowDocumentLocationChanges"><code>allowDocumentLocationChanges</code></a> properties. Setting <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_clickThroughEnabled"><code>clickThroughEnabled</code></a> will forward click events to the HTML content making it possible to follow links or click buttons. If the content of the HTML drawable should not change <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#property_allowDocumentLocationChanges"><code>allowDocumentLocationChanges</code></a> can be set to <code>false</code> so links are not followed. It is still possible to react on clicked links by using the <a href="../Reference/JavaScript%20Reference/classes/HtmlDrawable.html#event_onDocumentLocationChanged"><code>onDocumentLocationChanged</code></a> trigger. The example uses this trigger to open clicked links fullscreen in a browser. The result then looks like this</p>
<p><img src="images/IRExample_HTML_2.jpg" alt="HTML Drawable - Real time weather widget">
<a id="bonussparkle"></a></p>
<a name="bonus-sparkles"></a><h3>Bonus: Sparkles</h3>
<p>This section adds a little bonus to the above example. Sprite sheet animations can be used to animate images similar to animated GIFs and are used in this example to add sparkles to the overlay.</p>
<p>A sprite sheet is an image file that contains all key frame images required for the animation. The key frame image size (width and height) is passed at creation time and must be equal for all key frame images. Key frame images will be managed in an array, starting with entry 0. The key frame image array will be filled from left to right, row by row. Any partly filled key frames at the edge of the sprites sheet will be ignored.</p>
<p><img src="images/imageSparkles.png" alt="Sprite sheet of sparkles for this example." title="Sprite sheet of sparkles for this example."></p>
<p>First the image resource is created which is used for creating the <a href="../Reference/JavaScript%20Reference/classes/AnimatedImageDrawable.html"><code>AR.AnimatedImageDrawable</code></a>. Since the width/height of the sprite sheet is 512 and it carries 16 key frames, the width and height of a single image is 128. So we set 128 as the width and height of the <a href="../Reference/JavaScript%20Reference/classes/AnimatedImageDrawable.html"><code>AR.AnimatedImageDrawable</code></a>.</p>
<pre><code class="lang-js">// Sparkles
var imgSparkles = new AR.ImageResource(&quot;assets/imageSparkles.png&quot;);
var sparkles = new AR.AnimatedImageDrawable(imgSparkles, 0.25, 128, 128, {
    offsetX: -0.2,
    offsetY: 0.5,
    rotation: 75
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_5_Bonus-Sparkles/js/imagerecognition.js#L36-L41">GitHub</a>
</div>

<p>To start the animation the order of the keyframes needs to be passed as array. Additionally the time each frame is displayed in ms and the loop count needs to be defined. In this case each image is displayed 100ms before it changes and a loop count of <code>-1</code> plays the animation in an infinite loop.</p>
<pre><code class="lang-js">sparkles.animate([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], 100, -1);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_5_Bonus-Sparkles/js/imagerecognition.js#L46">GitHub</a>
</div>

<p>The last step is to add it as drawable to the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> so it will be overlaid on the first page.</p>
<pre><code class="lang-js">var pageOne = new AR.Trackable2DObject(this.tracker, &quot;pageOne&quot;, {
    drawables: {
        cam: [overlayOne, pageOneButton, weatherWidget, sparkles]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/1_ImageRecognition_5_Bonus-Sparkles/js/imagerecognition.js#L106-110">GitHub</a>
</div>

<a name="3d-models"></a><h2>3D Models</h2>
<p>This example shows how to augment a target image with 3D content. It starts by displaying a 3D model on a target and advances by adding displayed animations and interactivity. The last part of this sample adds snap-to-screen functionality mixed with touch and swipe gestures.</p>
<p>If you are not yet familiar with how to create a vision based augmented reality scene (based on image recognition and tracking), please have a look at the previous example <a href="imagerecognition.html">Image Recognition</a>.</p>
<p>3D content within Wikitude can only be loaded from <code>Wikitude 3D Format</code> files (.wt3).  This is a compressed binary format for describing 3D content which is optimized for fast loading and handling of 3D content on a mobile device. You still can use 3D models from your favorite 3D modeling tools (Autodesk® Maya® or Blender) but you&#39;ll need to convert them into the wt3 file format. The Wikitude 3D Encoder desktop application (Windows and Mac) encodes your 3D source file. The Encoder can handle Autodesk® FBX® files (.fbx) and the open standard Collada (.dae) file formats for encoding to .wt3.</p>
<p>For more details on how to convert your 3D content please see the <a href="encoder.html">Wikitude 3D Encoder</a> section. In this example the .wt3 file has already been prepared and saved to assets/car.wt3.</p>
<p>3D content is rendered on top of 2D objects. This limitation exists because of some SDK internal restrictions and might change in an upcoming release.</p>
<p>This sample consists of four parts</p>
<ol>
<li><a href="#3dmodelontarget">3D Model on Target Image</a></li>
<li><a href="#appearinganimation">Appearing Animation</a></li>
<li><a href="#interactivity">Interactivity</a></li>
<li><a href="#snapToScreen">Snap to Screen</a></li>
</ol>
<p><img src="images/car.jpg" alt="Rendering of car model in Wikitude 3D Encoder" title="Rendering of the car model used in this example."></p>
<p>The following fictional print advertisement is used as target image, which will be augmented with a 3D model of the car advertised in the print ad.</p>
<p><img src="images/carAd.jpg" alt="Print ad used as image target" title="Car ad used as image target."></p>
<p><a id="3dmodelontarget"></a></p>
<a name="3d-model-on-target-14"></a><h3>3D Model on Target (1/4)</h3>
<p>First of all create an <a href="../Reference/JavaScript%20Reference/classes/Model.html"><code>AR.Model</code></a> and pass the URL to the actual .wt3 file of the model. Additional options allow for scaling, rotating and positioning the model in the scene.</p>
<pre><code class="lang-js">this.modelCar = new AR.Model(&quot;assets/car.wt3&quot;, {
    onLoaded: this.loadingStep,
    scale: {
        x: 0.045,
        y: 0.045,
        z: 0.045
    },
    translate: {
        x: 0.0,
        y: 0.05,
        z: 0.0
    },
    rotate: {
        roll: -25
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_1_3dModelOnTarget/js/imagerecognitionand3d.js#L31-L46">GitHub</a>
</div>

<p>In this example a function is attached to the <code>onLoaded</code> trigger to receive a notification once the 3D model is fully loaded. Depending on the size of the model and where it is stored (locally or remotely) it might take some time to completely load and it is recommended to inform the user about the loading time.</p>
<p>Similar to 2D content the 3D model is added to the <code>drawables.cam</code> property of an <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>. </p>
<pre><code class="lang-js">var trackable = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: [this.modelCar]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_1_3dModelOnTarget/js/imagerecognitionand3d.js#L51-L55">GitHub</a>
</div>

<p>This is everything that is needed to allow the 3D model appear on an image target. To adjust scaling and position of the model pass the scale and translate properties as options to the <a href="../Reference/JavaScript%20Reference/classes/Model.html"><code>AR.Model</code></a>.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 4</a></p>
<p><a id="appearinganimation"></a></p>
<a name="appearing-animation-24"></a><h3>Appearing Animation (2/4)</h3>
<p>As a next step, an appearing animation is added which scales up the 3D model once the target is inside the field of vision. Creating an animation on a single property of an object is done using an <a href="../Reference/JavaScript%20Reference/classes/PropertyAnimation.html"><code>AR.PropertyAnimation</code></a>. Since the car model needs to be scaled up on all three axis, three animations are needed. These animations are grouped together utilizing an <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a> that allows them to play them in parallel.</p>
<pre><code class="lang-js">var sx = new AR.PropertyAnimation(model, &quot;scale.x&quot;, 0, scale, 1500, {
    type: AR.CONST.EASING_CURVE_TYPE.EASE_OUT_QUAD
});
var sy = new AR.PropertyAnimation(model, &quot;scale.y&quot;, 0, scale, 1500, {
    type: AR.CONST.EASING_CURVE_TYPE.EASE_OUT_QUAD
});
var sz = new AR.PropertyAnimation(model, &quot;scale.z&quot;, 0, scale, 1500, {
    type: AR.CONST.EASING_CURVE_TYPE.EASE_OUT_QUAD
});

return new AR.AnimationGroup(AR.CONST.ANIMATION_GROUP_TYPE.PARALLEL, [sx, sy, sz]);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_2_AppearingAnimation/js/imagerecognitionand3d.js#L87-L97">GitHub</a>
</div>

<p>Each <a href="../Reference/JavaScript%20Reference/classes/PropertyAnimation.html"><code>AR.PropertyAnimation</code></a> targets one of the three axis and scales the model from 0 to the value passed in the <code>scale</code> variable. An <code>EASE_OUT_QUAD</code> easing curve is used to create a more dynamic effect of the animation.</p>
<p>To get a notification once the image target is inside the field of vision the <code>onEnterFieldOfVision</code> trigger of the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> is used. In the example the function <code>appear()</code> is attached.</p>
<pre><code class="lang-js">appear: function appearFn () {
    World.appearingAnimation.start();
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_2_AppearingAnimation/js/imagerecognitionand3d.js#L100-L102">GitHub</a>
</div>


<p>Within the <code>appear</code> function the previously created <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a> is started by calling its <code>start()</code> function which plays the animation once.</p>
<p><a id="interactivity"></a></p>
<a name="interactivity-34"></a><h3>Interactivity (3/4)</h3>
<p>To add more functionality, a rotating animation is added to the 3D model. It is started and paused by clicking on the button or on the 3D model.</p>
<p>Additionally to the 3D model an image that will act as a button is added to the image target. This can be accomplished by loading an <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a> and creating a drawable from it.</p>
<pre><code class="lang-js">var imgRotate = new AR.ImageResource(&quot;assets/rotateButton.png&quot;);
var buttonRotate = new AR.ImageDrawable(imgRotate, 0.2, {
    offsetX: 0.35,
    offsetY: 0.45,
    onClick: this.toggleAnimateModel
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_3_Interactivity/js/imagerecognitionand3d.js#L67-L72">GitHub</a>
</div>

<p>To add the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> to the image target together with the 3D model both drawables are supplied to the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>.</p>
<pre><code class="lang-js">var trackable = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: [this.modelCar, buttonRotate]
    },
    onEnterFieldOfVision: this.appear
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_3_Interactivity/js/imagerecognitionand3d.js#L79-L84">GitHub</a>
</div>

<p>The rotation animation for the 3D model is created by defining an <a href="../Reference/JavaScript%20Reference/classes/PropertyAnimation.html"><code>AR.PropertyAnimation</code></a> for the <code>rotate.roll</code> property.</p>
<pre><code class="lang-js">// Rotation Animation
this.rotationAnimation = new AR.PropertyAnimation(this.modelCar, &quot;rotate.roll&quot;, -25, 335, 10000);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_3_Interactivity/js/imagerecognitionand3d.js#L62">GitHub</a>
</div>

<p>The drawables are made clickable by setting their <code>onClick</code> triggers. Click triggers can be set in the options of the drawable when the drawable is created. Thus, when the 3D model <code>onClick: this.toggleAnimateModel</code> is set in the options it is then passed to the <a href="../Reference/JavaScript%20Reference/classes/Model.html"><code>AR.Model</code></a> constructor. Similar the button&#39;s <code>onClick: this.toggleAnimateModel</code> trigger is set in the options passed to the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> constructor. <code>toggleAnimateModel()</code> is therefore called when the 3D model or the button is clicked.</p>
<p>Inside the <code>toggleAnimateModel()</code> function, it is checked if the animation is running and decided if it should be started, resumed or paused.</p>
<pre><code class="lang-js">toggleAnimateModel: function toggleAnimateModelFn() {
    if (!World.rotationAnimation.isRunning()) {
        if (!World.rotating) {
            World.rotationAnimation.start(-1);
            World.rotating = true;
        } else {
            World.rotationAnimation.resume();
        }
    } else {
        World.rotationAnimation.pause();
    }

    return false;
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_3_Interactivity/js/imagerecognitionand3d.js#L135-L151">GitHub</a>
</div>

<p>Starting an animation with <code>.start(-1)</code> will loop it indefinitely.</p>
<p><a id="snapToScreen"></a></p>
<a name="snap-to-screen-44"></a><h3>Snap to Screen (4/4)</h3>
<p>To finish things up, the snap to screen feature is added so that the 3D model can be explored in a more immersive way. Snap to screen will bring the drawables, attached to a <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>, out of the augmented reality scene and directly onto the screen. Once snapped, the drawables will stay on the screen as long as they are not set back into the augmented reality context. Thereby users can explore content even if they don&#39;t look at the target image.</p>
<p>The snap position on the screen is defined through a <code>div</code> element. During the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> creation, the <code>div</code> is passed as a additional option. In this example a <code>div</code> with id <code>snapContainer</code> is used.</p>
<pre><code class="lang-js">this.trackable = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        ...
    },
    snapToScreen: {
        snapContainer: document.getElementById(&#39;snapContainer&#39;)
    },
    ...
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_4_SnapToScreen/js/imagerecognitionand3d.js#L139-L147">GitHub</a>
</div>

<p>Snapping is then enabled through an additional button. The button is created and setup just the same way as the rotate button. The only difference is that the <code>onClick</code> function of the newly created button is pointing to a different function.</p>
<pre><code class="lang-js">toggleSnapping: function toggleSnappingFn() {

    World.snapped = !World.snapped;        
    World.trackable.snapToScreen.enabled = World.snapped;

    if ( !World.snapped ) {

        World.applyLayout(World.layout.snapped);

        World.addInteractionEventListener();

    } else {

        World.applyLayout(World.layout.normal);

        World.removeInteractionEventListener();
    }
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/2_3dAndImageRecognition_4_SnapToScreen/js/imagerecognitionand3d.js#L295-L312">GitHub</a>
</div>

<p>To enable snapping, set the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> property <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#property_snapToScreen.enabled"><code>snapToScreen.enabled</code></a> accordingly (either <code>true</code> or <code>false</code>). Based on the current snapping state, the drawables are positioned and scaled differently and event listeners are added or removed so that the 3D model can only be modified while it is snapped.</p>
<p>In the sample the 3D model can be rotated and scaled through touch and gesture events once it is snapped to the screen. To apply the new rotation and scale values, the JavaScript events <code>touchmoved</code> and <code>gesturechange</code> are used. Inside these listener functions scale and rotation values are calculated and applied to the 3D model.</p>

<a name="point-of-interest-poi"></a><h2>Point Of Interest (POI)</h2>
<p>The Point Of Interest (POI) example series will show how you can create a marker that is placed at a specific geolocation. The example is split into four different parts that depend on each other. You will have a complete and reusable marker at the end of the series which has a title, description, a selected and an idle state which animates smoothly from one to another.</p>
<p>This sample consists of four parts</p>
<ol>
<li><a href="#poiatlocation">POI at Location</a></li>
<li><a href="#poiwithlabel">POI with Label</a></li>
<li><a href="#multiplepois">Multiple POIs</a></li>
<li><a href="#selectingpois">Selecting POIs</a></li>
</ol>
<p><a id="poiatlocation"></a></p>
<a name="poi-at-location-14"></a><h3>POI at Location (1/4)</h3>
<p>The first part of the series will present an image at a geolocation. To do so, we will use the <code>AR.context.onLocationChanged()</code> callback to get the current location. After the location has been retrieved, we will use it to place an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> there.</p>
<p>All JavaScript code can be found in the file <code>poiatlocation.js</code>.</p>
<p>The example <a href="imagerecognition.html#ImageRecognitionExample">Image Recognition</a> already explained how images are loaded and displayed in the augmented reality view. This sample loads an <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a> when the <code>World</code> variable was defined. It will be reused for each marker that we will create afterwards.</p>
<p>The last line of the <code>poiatlocation.js</code> shows how to set a custom <code>AR.context.onLocationChanged</code> callback.</p>
<pre><code class="lang-js">AR.context.onLocationChanged = World.onLocationChanged;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_1_PoiAtLocation/js/poiatlocation.js#L76">GitHub</a>
</div>

<p>The custom function <code>World.onLocationChanged</code> checks with the flag <code>World.initiallyLoadedData</code> if  the function was already called. There is also a possibility to set <code>AR.context.onLocationChanged</code> to null. In this case the function will not be called anymore and no further location updates will be received.</p>
<p>On the first call of <code>World.onLocationChanged</code> an object that contains geo information will be created which will be later used to create a marker using the <code>World.loadPoisFromJsonData</code> function.</p>
<pre><code class="lang-js">locationChanged: function locationChangedFn(lat, lon, alt, acc) {
    // request data if not already present
    if (!World.initiallyLoadedData) {
        var poiData = {
            &quot;id&quot;: 1,
            &quot;longitude&quot;: (lon + (Math.random() / 5 - 0.1)),
            &quot;latitude&quot;: (lat + (Math.random() / 5 - 0.1)),
            &quot;altitude&quot;: 100.0
        };
        World.loadPoisFromJsonData(poiData);
        World.initiallyLoadedData = true;
    }
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_1_PoiAtLocation/js/poiatlocation.js#L58-L69">GitHub</a>
</div>

<p>The <code>loadPoisFromJsonData</code> function creates an <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a> which is later used as an image for the marker.</p>
<pre><code class="lang-js">// start loading marker assets
World.markerDrawable_idle = new AR.ImageResource(&quot;assets/marker_idle.png&quot;);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_1_PoiAtLocation/js/poiatlocation.js#L15">GitHub</a>
</div>

<p>For creating the marker a new object <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> will be created at the specified geolocation. An <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> connects one or more <code>AR.GeoLocations</code> with multiple <code>AR.Drawables</code>. The <code>AR.Drawables</code> can be defined for multiple targets. A target can be the camera, the radar or a direction indicator. Both the radar and direction indicators will be covered in more detail in later examples.</p>
<pre><code class="lang-js">// create the marker
var markerLocation = new AR.GeoLocation(poiData.latitude, poiData.longitude, poiData.altitude);
var markerImageDrawable_idle = new AR.ImageDrawable(markerDrawable_idle, 2.5, {
    zOrder: 0,
    opacity: 1.0
});

// create GeoObject
var markerObject = new AR.GeoObject(markerLocation, {
    drawables: {
        cam: [markerImageDrawable_idle]
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_1_PoiAtLocation/js/poiatlocation.js#L20-L31">GitHub</a>
</div>

<p>Finally the status message is updated as a user feedback that everything was loaded properly:</p>
<pre><code class="lang-js">World.updateStatusMessage(&#39;1 place loaded&#39;);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_1_PoiAtLocation/js/poiatlocation.js#L34">GitHub</a>
</div>

<p><a id="poiwithlabel"></a></p>
<a name="poi-with-label-24"></a><h3>POI with Label (2/4)</h3>
<p>The second part adds a title and description label to our marker object and covers more drawable related options.</p>
<p><img src="images/sample_poi_poiwithlabel.jpg" alt=""></p>
<p>All JavaScript changes are in <code>poiwithlabel.js</code>. Note that the file is only renamed but its content is mostly identical to <code>poiatlocation.js</code>.</p>
<p>The <code>locationChanged</code> function adds a description and a title to the marker:</p>
<pre><code class="lang-js">var poiData = {
    &quot;id&quot;: 1,
    &quot;longitude&quot;: (lon + (Math.random() / 5 - 0.1)),
    &quot;latitude&quot;: (lat + (Math.random() / 5 - 0.1)),
    &quot;altitude&quot;: 100.0,
    &quot;description&quot;: &quot;This is the description of POI#1&quot;,
    &quot;title&quot;: &quot;POI#1&quot;
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_2_PoiWithLabel/js/poiwithlabel.js#L49-L56">GitHub</a>
</div>
Since there are additional changes concerning the marker it makes sense to extract the code to a separate <code>Marker</code> class (see <strong>marker.js</strong>). Parts of the code are moved from <code>loadPoisFromJsonData</code> to the <code>Marker</code>class: the creation of the <code>AR.GeoLocation</code>, the creation of the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> and the creation of the <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a>. Then instantiate the <code>Marker</code> in the function <code>loadPoisFromJsonData</code>:

<code>js
// create the marker
var marker = new Marker(poiData);</code>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_2_PoiWithLabel/js/poiwithlabel.js#L20">GitHub</a>
</div>

<p>There are two major points that need to be considered while drawing multiple <code>AR.Drawables</code> at the same location. It has to be defined which one is before or behind another drawable (rendering order) and if they need a location offset. For both scenarios, ARchitect has some functionality to adjust the drawable behavior.</p>
<p>To position the <code>AR.Label</code> in front of the background, the background drawable(<code>AR.ImageDrawable2D</code>) receives a <code>zOrder</code> of 0. Both labels have a <code>zOrder</code> of 1. This way it is guaranteed that the labels will be drawn in front of the background drawable.</p>
<p>Assuming both labels will be drawn on the same geolocation connected with the same <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> they will overlap. To adjust their position change the <code>offsetX</code> and <code>offsetY</code> property of an <code>AR.Drawable2D</code> object. The unit for offsets are SDUs. See this chapter for more information about <a href="sdu-dbs.html">SDUs</a>.</p>
<p>In the following both <code>AR.Labels</code> are initialized and positioned. Note that they are added to the cam property of the <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> the same way as an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a>.</p>
<pre><code class="lang-js">function Marker(poiData) {

    this.poiData = poiData;

    var markerLocation = new AR.GeoLocation(poiData.latitude, poiData.longitude, poiData.altitude);
    this.markerDrawable_idle = new AR.ImageDrawable(World.markerDrawable_idle, 2.5, {
        zOrder: 0,
        opacity: 1.0
    });

    this.titleLabel = new AR.Label(poiData.title.trunc(10), 1, {
        zOrder: 1,
        offsetY: 0.55,
        style: {
            textColor: &#39;#FFFFFF&#39;,
            fontStyle: AR.CONST.FONT_STYLE.BOLD
        }
    });

    this.descriptionLabel = new AR.Label(poiData.description.trunc(15), 0.8, {
        zOrder: 1,
        offsetY: -0.55,
        style: {
            textColor: &#39;#FFFFFF&#39;
        }
    });

    // Changed: 
    this.markerObject = new AR.GeoObject(markerLocation, {
        drawables: {
            cam: [this.markerDrawable_idle, this.titleLabel, this.descriptionLabel]
        }
    });

    return this;
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_2_PoiWithLabel/js/marker.js#L1-L49">GitHub</a>
</div>

<p>Additionally a function which truncates a text string that is longer than the given length is added. This function is used to shorten titles or descriptions.</p>
<pre><code class="lang-js">String.prototype.trunc = function(n) {
       return this.substr(0, n - 1) + (this.length &gt; n ? &#39;...&#39; : &#39;&#39;);
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_2_PoiWithLabel/js/marker.js#L53-L55">GitHub</a>
</div>

<p><a id="multiplepois"></a></p>
<a name="multiple-pois-34"></a><h3>Multiple POIs (3/4)</h3>
<p>The third example consist of two parts. The first part shows how to create multiple markers and in the second part an implementation of a marker selection is described. </p>
<p><img src="images/sample_poi_multiple_poi.jpg" alt=""></p>
<p>For creating multiple markers change the class <code>World</code>. Add a function <code>requestDataFromLocal</code> with the geo information as parameters (latitude, longitude) which are used for creating different poi data to a random location in the user&#39;s vicinity. The new function is called from <code>locationChanged</code> instead of calling <code>loadPoisFromJsonData</code> like in the previous example:</p>
<pre><code class="lang-js">World.requestDataFromLocal(lat, lon);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/multiplepois.js#L71">GitHub</a>
</div>

<p>The function <code>loadPoisFromJsonData</code> will be called within the new function <code>requestDataFromLocal</code> after the POI data was created:</p>
<pre><code class="lang-js">
    // request POI data
    requestDataFromLocal: function requestDataFromLocalFn(centerPointLatitude, centerPointLongitude) {
        var poisToCreate = 20;
        var poiData = [];

        for (var i = 0; i &lt; poisToCreate; i++) {
            poiData.push({
                &quot;id&quot;: (i + 1),
                &quot;longitude&quot;: (centerPointLongitude + (Math.random() / 5 - 0.1)),
                &quot;latitude&quot;: (centerPointLatitude + (Math.random() / 5 - 0.1)),
                &quot;description&quot;: (&quot;This is the description of POI#&quot; + (i + 1)),
                &quot;altitude&quot;: &quot;100.0&quot;,
                &quot;name&quot;: (&quot;POI#&quot; + (i + 1))
            });
        }
        World.loadPoisFromJsonData(poiData);
    }</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/multiplepois.js#L100-L114">GitHub</a>
</div>

<p>Since the argument of <code>loadPoisFromJsonData</code> is used as an array and not like a single object as before some adaptations are necessary. The POI information array which is delivered as an argument in the function <code>loadPoisFromJsonData</code> is used to create poiData objects. In a for loop iterate through all the poi information objects. For each object create a new object <code>singlePoi</code>. To create multiple markers <code>new Marker(poiData)</code> can be called multiple times with different locations, titles and descriptions as defined in the poiData object. Now create the <code>Marker</code> objects and store them in an array <code>markerList</code> which is defined as a member variable in the <code>World</code> class. The <code>markerList</code> array is needed for selection/deselection of markers and will be described later in this example. Finally the status message is updated with the number of POIs loaded.</p>
<pre><code class="lang-js">
        // called to inject new POI data
        loadPoisFromJsonData: function loadPoisFromJsonDataFn(poiData) {

            // empty list of visible markers
            World.markerList = [];

            // start loading marker assets
            World.markerDrawable_idle = new AR.ImageResource(&quot;assets/marker_idle.png&quot;);

            // loop through POI-information and create an AR.GeoObject (=Marker) per POI
            for (var currentPlaceNr = 0; currentPlaceNr &lt; poiData.length; currentPlaceNr++) {
                var singlePoi = {
                    &quot;id&quot;: poiData[currentPlaceNr].id,
                    &quot;latitude&quot;: parseFloat(poiData[currentPlaceNr].latitude),
                    &quot;longitude&quot;: parseFloat(poiData[currentPlaceNr].longitude),
                    &quot;altitude&quot;: parseFloat(poiData[currentPlaceNr].altitude),
                    &quot;title&quot;: poiData[currentPlaceNr].name,
                    &quot;description&quot;: poiData[currentPlaceNr].description
                };

                World.markerList.push(new Marker(singlePoi));
            }

            World.updateStatusMessage(currentPlaceNr + &#39; places loaded&#39;);
        }</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/multiplepois.js#L17-L43">GitHub</a>
</div>

<p>At this point the implementation for displaying multiple markers is finished. Let&#39;s have a look on how to change the marker background image after it was selected and handle the different selection states.</p>
<p>A second <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> is defined in <code>marker.js</code>.</p>
<p>To react on user interaction, an <code>onClick</code> property can be set for each <code>AR.Drawable</code>. The property is a function which will be called each time the user taps on the drawable. The following snippet shows the adapted <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> creation.</p>
<pre><code class="lang-js">this.markerDrawable_idle = new AR.ImageDrawable(World.markerDrawable_idle, 2.5, {
    zOrder: 0,
    opacity: 1.0,
    onClick: Marker.prototype.getOnClickTrigger(this)
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/marker.js#L13-L20">GitHub</a>
</div>

<p>The function called on each tap is returned from the following helper function defined in <code>marker.js</code>. The function returns a function which checks the selected state with the help of the variable <code>isSelected</code> and executes the appropriate function. The clicked marker is passed as an argument.</p>
<pre><code class="lang-js">Marker.prototype.getOnClickTrigger = function(marker) {

    return function() {
            if (marker.isSelected) {
                Marker.prototype.setDeselected(marker);

            } else {
                Marker.prototype.setSelected(marker);
                try {
                    World.onMarkerSelected(marker);
                } catch (err) {
                    alert(err);
                }
            }
    };
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/marker.js#L58-L84">GitHub</a>
</div>

<p>The <code>setSelected</code> and <code>setDeselected</code> functions are prototype <code>Marker</code> functions.</p>
<p>Both functions perform the same steps but inverted, hence only one function (<code>setSelected</code>) is covered in detail. Three steps are necessary to select the marker. First the state will be set appropriately. Second the background drawable will be enabled and the standard background disabled. This is done by setting the opacity property to 1.0 for the visible state and to 0.0 for an invisible state. Third the <code>onClick</code> function is set only for the background drawable of the selected marker.</p>
<pre><code class="lang-js">Marker.prototype.setSelected = function(marker) {

    marker.isSelected = true;

    marker.markerDrawable_idle.opacity = 0.0;
    marker.markerDrawable_selected.opacity = 1.0;

    marker.markerDrawable_idle.onClick = null;
    marker.markerDrawable_selected.onClick = Marker.prototype.getOnClickTrigger(marker);
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/marker.js#L86-L94">GitHub</a>
</div>

<p>To be able to deselect a marker while the user taps on the empty screen, the <code>World</code> object holds an array that contains each marker.</p>
<pre><code class="lang-js">World.markerList.push( new Marker(poiData) );</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/multiplepois.js#L40">GitHub</a>
</div>

<p>To detect clicks where no drawable was hit set a custom function on <code>AR.context.onScreenClick</code> where the currently selected marker is deselected.</p>
<pre><code class="lang-js">onScreenClick: function onScreenClickFn() {
    if (World.currentMarker) {
        World.currentMarker.setDeselected(World.currentMarker);
    }
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_3_MultiplePois/js/multiplepois.js#L93-L97">GitHub</a>
</div>

<p><a id="selectingpois"></a></p>
<a name="selecting-pois-44"></a><h3>Selecting POIs (4/4)</h3>
<p><img src="images/sample_poi_selecting_poi.jpg" alt=""></p>
<p>The last part describes the concepts behind <code>AR.PropertyAnimations</code> and <code>AR.AnimationGroups</code>. It also explains how direction indicators can be used to visualize selected objects that are currently not visible in the viewfinder.</p>
<p>With <code>AR.PropertyAnimations</code> you are able to animate almost any property of ARchitect objects. This sample will animate the opacity of both background drawables so that one will fade out while the other one fades in. The scaling is animated too. The marker size changes over time so the labels need to be animated too in order to keep them relative to the background drawable. <code>AR.AnimationGroups</code> are used to synchronize all animations in parallel or sequentially.</p>
<p>In <code>marker.js</code> there are two new variables declared. They hold a reference to an <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a> that is used to either start or stop the animations.</p>
<pre><code class="lang-js">this.animationGroup_idle = null;
this.animationGroup_selected = null;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_4_SelectingPois/js/marker.js#L13-L14">GitHub</a>
</div>

<p>The functions <code>setSelected</code> and <code>setDeselected</code> in <code>marker.js</code> have to be adapted. Again only the changes in <code>setSelected</code> are explained. </p>
<p>There are two types of <code>AR.AnimationGroups</code>. Parallel animations are running at the same time, sequential animations are played one after another. This example uses a parallel <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a>.</p>
<pre><code class="lang-js">if (marker.animationGroup_selected === null) {

    var hideIdleDrawableAnimation = new AR.PropertyAnimation(marker.markerDrawable_idle, &quot;opacity&quot;, null, 0.0, kMarker_AnimationDuration_ChangeDrawable);
        var showSelectedDrawableAnimation = new AR.PropertyAnimation(marker.markerDrawable_selected, &quot;opacity&quot;, null, 0.8, kMarker_AnimationDuration_ChangeDrawable);

        var idleDrawableResizeAnimation = new AR.PropertyAnimation(marker.markerDrawable_idle, &#39;scaling&#39;, null, 1.2, kMarker_AnimationDuration_Resize, new AR.EasingCurve(AR.CONST.EASING_CURVE_TYPE.EASE_OUT_ELASTIC, {
            amplitude: 2.0
        }));
        var selectedDrawableResizeAnimation = new AR.PropertyAnimation(marker.markerDrawable_selected, &#39;scaling&#39;, null, 1.2, kMarker_AnimationDuration_Resize, new AR.EasingCurve(AR.CONST.EASING_CURVE_TYPE.EASE_OUT_ELASTIC, {
            amplitude: 2.0
        }));

        var titleLabelResizeAnimation = new AR.PropertyAnimation(marker.titleLabel, &#39;scaling&#39;, null, 1.2, kMarker_AnimationDuration_Resize, new AR.EasingCurve(AR.CONST.EASING_CURVE_TYPE.EASE_OUT_ELASTIC, {
            amplitude: 2.0
        }));
        var descriptionLabelResizeAnimation = new AR.PropertyAnimation(marker.descriptionLabel, &#39;scaling&#39;, null, 1.2, kMarker_AnimationDuration_Resize, new AR.EasingCurve(AR.CONST.EASING_CURVE_TYPE.EASE_OUT_ELASTIC, {
            amplitude: 2.0
        }));

        marker.animationGroup_selected = new AR.AnimationGroup(AR.CONST.ANIMATION_GROUP_TYPE.PARALLEL, [hideIdleDrawableAnimation, showSelectedDrawableAnimation, idleDrawableResizeAnimation, selectedDrawableResizeAnimation, titleLabelResizeAnimation, descriptionLabelResizeAnimation]);
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_4_SelectingPois/js/marker.js#L163-L190">GitHub</a>
</div>

<p>Launch the <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a> using the <code>start</code> function.</p>
<pre><code class="lang-js">    marker.animationGroup_selected.start();</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_4_SelectingPois/js/marker.js#L156">GitHub</a>
</div>

<p>In the function <code>Marker.prototype.getOnClickTrigger</code> the selection functions are only called if no animation is currently running:</p>
<pre><code class="lang-js">if (!Marker.prototype.isAnyAnimationRunning(marker)) {
    if (marker.isSelected) {

        Marker.prototype.setDeselected(marker);

    } else {
        Marker.prototype.setSelected(marker);
        try {
            World.onMarkerSelected(marker);
        } catch (err) {
            alert(err);
        }

    }
    } else {
        AR.logger.debug(&#39;a animation is already running&#39;);
    }
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_4_SelectingPois/js/marker.js#L86-L102">GitHub</a>
</div>

<p>Create an <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a> referencing the image that should be displayed for a direction indicator. Then create an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> using the <a href="../Reference/JavaScript%20Reference/classes/ImageResource.html"><code>AR.ImageResource</code></a>. Set options regarding the offset and anchor of the image so that it will be displayed correctly on the edge of the screen.</p>
<pre><code class="lang-js">this.directionIndicatorDrawable = new AR.ImageDrawable(World.markerDrawable_directionIndicator, 0.5, {
    enabled: false
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_4_SelectingPois/js/marker.js#L59-L62">GitHub</a>
</div>

<p>The last step is to define the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> as an <code>indicator</code> target on the marker <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a>. The direction indicator is displayed automatically when necessary. <code>AR.Drawable</code> subclasses (e.g. <a href="../Reference/JavaScript%20Reference/classes/Circle.html"><code>AR.Circle</code></a>) can be used as direction indicators.</p>
<pre><code class="lang-js">this.markerObject = new AR.GeoObject(markerLocation, {
    drawables: {
        cam: [    this.markerDrawable_idle, 
                this.markerDrawable_selected, 
                this.titleLabel, 
                this.descriptionLabel
             ],
            indicator: this.directionIndicatorDrawable
        }
    });</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/3_PointOfInterest_4_SelectingPois/js/marker.js#L67-L75">GitHub</a>
</div>

<a name="retrieving-poi-data"></a><h2>Retrieving POI Data</h2>
<p>There are several ways to request and work with POI detail information in an ARchitect World.
Depending on your application and use case, one might fit better than the other.</p>
<p>This sample consists of three parts</p>
<ol>
<li><a href="#applicationmodel">From Application Model</a></li>
<li><a href="#local">From a Local Resource </a></li>
<li><a href="#webservice">From a Webservice</a></li>
</ol>
<p><a id="applicationmodel"></a></p>
<a name="from-application-model-13"></a><h3>From Application Model (1/3)</h3>
<p>Besides loading data from assets it is also possible to load data from a database, or to create it in native code. Use the platform common way to create JSON Objects of your data and use <code>architectView.callJavaScript()</code> to pass them to the ARchitect World&#39;s JavaScript.</p>
<p>Have a look at <code>SampleCamContentFromNativeActivity.java</code> to get a better understanding of how data can be injected to JavaScript.
<a id="local"></a></p>
<a name="from-a-local-resource-23"></a><h3>From a Local Resource (2/3)</h3>
<p>In case the data of your ARchitect World is static the content should be stored within the application.
Create a JavaScript file (e.g. <code>myJsonData.js</code>) where a globally accessible variable is defined:</p>
<pre><code class="lang-js">var myJsonData = …[YOUR-JSON-DATA]</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/4_ObtainPoiData_2_FromLocalResource/js/myJsonData.js#L1">GitHub</a>
</div>

<p>Include the JavaScript in the ARchitect Worlds HTML by adding <code>&lt;script src=&quot;js/myJsonData.js&quot;/&gt;</code> to make POI information available anywhere in your JavaScript.</p>
<pre><code class="lang-js">// request POI data
requestDataFromLocal: function requestDataFromLocalFn(lat, lon) {
    World.loadPoisFromJsonData(myJsonData);
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/4_ObtainPoiData_2_FromLocalResource/js/fromLocalResource.js#L103-L114">GitHub</a>
</div>

<p><em>Note: This sample uses static POI data and overwrites latitude and longitude values using <code>Helper.bringPlacesToUser</code>, you must remove this line to avoid this.</em></p>
<p><a id="webservice"></a></p>
<a name="from-a-webservice-33"></a><h3>From a Webservice (3/3)</h3>
<p><a href="http://jquery.com/" target="_top">JQuery</a> provides a number of tools to load data from a remote origin. It is highly recommended to use the JSON format for POI information. Requesting and parsing is done in a few lines of code.</p>
<p>Use e.g. <code>AR.context.onLocationChanged = World.locationChanged;</code> to define the method invoked on location updates. In this sample POI information is requested after the very first location update. Note: You may set <code>AR.context.onLocationChanged = null</code> afterwards to no longer receive location updates in <code>World.locationChanged</code>.</p>
<p>It is recommended to store server information separately.</p>
<pre><code class="lang-js">// holds server information
var ServerInformation = {
    // sample service returning dummy POIs
    POIDATA_SERVER: &quot;http://example.wikitude.com/GetSamplePois/&quot;,
    POIDATA_SERVER_ARG_LAT: &quot;lat&quot;,
    POIDATA_SERVER_ARG_LON: &quot;lon&quot;,
    POIDATA_SERVER_ARG_NR_POIS: &quot;nrPois&quot;
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/4_ObtainPoiData_3_FromWebservice/js/fromWebservice.js#L2-L7">GitHub</a>
</div>

<p>Ensure that the server returns valid JSON and it is escaped properly (e.g. special characters in POI name…). </p>
<p>The server response is passed over to <code>World.loadPoisFromJsonData(poiData)</code>, where the creation of markers and their camera representation is defined.</p>
<pre><code class="lang-js">
// location updates
locationChanged: function locationChangedFn(lat, lon, alt, acc) {

    /* Request data from server only once*/
    if (!World.alreadyRequestedData) {
        World.requestDataFromServer(lat, lon);
        World.alreadyRequestedData = true;
    }
},</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/4_ObtainPoiData_3_FromWebservice/js/fromWebservice.js#L73-L80">GitHub</a>
</div>

<pre><code class="lang-js">
// request POI data
requestDataFromServer: function requestDataFromServerFn(lat, lon) {

    // set helper var to avoid requesting places while loading
    World.isRequestingData = true;
    World.updateStatusMessage(&#39;Requesting places from web-service&#39;);

    // server-url to JSON content provider
    var serverUrl = ServerInformation.POIDATA_SERVER + &quot;?&quot; + ServerInformation.POIDATA_SERVER_ARG_LAT + &quot;=&quot; + lat + &quot;&amp;&quot; + ServerInformation.POIDATA_SERVER_ARG_LON + &quot;=&quot; + lon + &quot;&amp;&quot; + ServerInformation.POIDATA_SERVER_ARG_NR_POIS + &quot;=20&quot;;

    var jqxhr = $.getJSON(serverUrl, function(data) {
        World.loadPoisFromJsonData(data);
    })
        .error(function(err) {
            World.updateStatusMessage(&quot;Invalid web-service response.&quot;, true);
            World.isRequestingData = false;
        })
        .complete(function() {
            World.isRequestingData = false;
        });
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/4_ObtainPoiData_3_FromWebservice/js/fromWebservice.js#L115-L137">GitHub</a>
</div>

<a name="browsing-pois"></a><h2>Browsing POIs</h2>
<p>Displaying numerous POIs in the camera is a challenge. How many POIs should be offered? How to deal with POIs in same direction? What is the maximum range to show POIs and how to display a long description?
The following example cover frequently asked questions related to the POI browser use case and consists of five parts plus a bonus section</p>
<ol>
<li><a href="#presentingdetails">Presenting Details</a></li>
<li><a href="#poiarradar">POI and AR Radar</a></li>
<li><a href="#limitingvisiblepois">Limiting Visible POIs</a></li>
<li><a href="#reloadingpoidata">Reloading POI Data</a></li>
<li><a href="#nativedetailscreen">Native Detail Screen</a></li>
<li><a href="#capturescreen">Capture Screen Bonus</a></li>
</ol>
<p><a id="presentingdetails"></a></p>
<a name="presenting-details-16"></a><h3>Presenting Details (1/6)</h3>
<p>POIs usually have a name and sometimes a quite long description. Depending on your content type you may e.g. display a marker with its name and cropped description but allow the user to get more information after selecting it.</p>
<p><img src="images/sample_poi_details.jpg" alt=""></p>
<p><a href="http://jquerymobile.com/" target="_top">jQuery Mobile</a> is an easy way to create appealing user interfaces for mobile devices. It takes the &quot;write less, do more&quot; mantra to the next level: Instead of writing unique apps for each mobile device or OS, the jQuery mobile framework allows you to design a single highly-branded web site or application that will work on all popular smartphones, tablets, and desktop platforms (quote from their website).
We recommend to use jQuery mobile for the implementation of the UI in the augmented reality view. It is well documented and can even be bundled into the app or hosted on your own web server.</p>
<p>In this sample a POI detail panel appears when pressing a cam-marker (the blue box with title &amp; description), compare <strong>index.html</strong> in the sample&#39;s directory.</p>
<pre><code>&lt;!-- panel containing POI detail information --&gt;
&lt;div data-role=&quot;panel&quot; id=&quot;panel-poidetail&quot; data-position=&quot;right&quot; data-display=&quot;overlay&quot; style=&quot;background-color:#F0F0F0;&quot; data-theme=&quot;c&quot;&gt;

&lt;!-- header with &quot;close&quot; button --&gt;
&lt;div data-role=&quot;header&quot; data-theme=&quot;c&quot;&gt;
    &lt;h1&gt;Details&lt;/h1&gt;
    &lt;a href=&quot;#header&quot; data-rel=&quot;close&quot;&gt;Close&lt;/a&gt;
&lt;/div&gt;

&lt;!-- content of POI detail page, you may also add thumbnails etc. here if you like --&gt;
&lt;div data-role=&quot;content&quot;&gt;
    &lt;!-- title --&gt;
    &lt;h3 id=&quot;poi-detail-title&quot;&gt;&lt;/h3&gt;

    &lt;!-- description --&gt;
    &lt;h4 id=&quot;poi-detail-description&quot;&gt;&lt;/h4&gt;

    &lt;!-- distance --&gt;
    &lt;h4&gt;Distance: &lt;a id=&quot;poi-detail-distance&quot;&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;/div&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_1_PresentingDetails/index.html#L53-L73">GitHub</a>
</div>

<p>When selecting a marker the content shown in the POI detail <code>div</code> is updated. At the same time the panel is animated from right to left.</p>
<p>To deselect the marker the <code>panelbeforeclose</code> event is used, compare <strong>presentingPoiDetails.js</strong></p>
<pre><code class="lang-js">onMarkerSelected: function onMarkerSelectedFn(marker) {

    World.currentMarker = marker;

    // update panel values
    $(&quot;#poi-detail-title&quot;).html(marker.poiData.title);
    $(&quot;#poi-detail-description&quot;).html(marker.poiData.description);

    var distanceToUserValue = (marker.distanceToUser &gt; 999) ? ((marker.distanceToUser / 1000).toFixed(2) + &quot; km&quot;) : (Math.round(marker.distanceToUser) + &quot; m&quot;);

    $(&quot;#poi-detail-distance&quot;).html(distanceToUserValue);

    // show panel
    $(&quot;#panel-poidetail&quot;).panel(&quot;open&quot;, 123);

    $(&quot;#panel-poidetail&quot;).on(&quot;panelbeforeclose&quot;, function(event, ui) {
    World.currentMarker.setDeselected(World.currentMarker);
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_1_PresentingDetails/js/presentingPoiDetails.js#L106-L131">GitHub</a>
</div>

<p><a id="poiarradar"></a></p>
<a name="poi-and-ar-radar-26"></a><h3>POI and AR Radar (2/6)</h3>
<p>It is recommended to give the user a hint where places are located in the user&#39;s vicinity. The easiest way to provide orientation assistance is an <a href="../Reference/JavaScript%20Reference/classes/radar.html"><code>AR.Radar</code></a> element. Every <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> (e.g. a cam marker) can have a representation in the radar element, usually indicated by a small dot.</p>
<p><img src="images/sample_poi_radar.jpg" alt=""></p>
<p>The representation of an <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> in the radar is defined in its drawables set (second argument of <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> constructor). Once <code>drawables.radar</code> is set the object is also shown on the radar e.g. as an <a href="../Reference/JavaScript%20Reference/classes/Circle.html"><code>AR.Circle</code></a>, compare <strong>marker.js</strong>:</p>
<pre><code class="lang-js">this.radarCircle = new AR.Circle(0.03, {
    horizontalAnchor: AR.CONST.HORIZONTAL_ANCHOR.CENTER,
    opacity: 0.8,
    style: {
        fillColor: &quot;#ffffff&quot;
    }
}); 
this.radardrawables = [];
this.radardrawables.push(this.radarCircle);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/js/marker.js#L64-L81">GitHub</a>
</div>

<p>Additionally create circles with a different color for the selected state, compare <strong>marker.js</strong>:</p>
<pre><code class="lang-js">this.radarCircleSelected = new AR.Circle(0.05, {
       horizontalAnchor: AR.CONST.HORIZONTAL_ANCHOR.CENTER,
       opacity: 0.8,
       style: {
           fillColor: &quot;#0066ff&quot;
       }
   });

this.radardrawablesSelected = [];
   this.radardrawablesSelected.push(this.radarCircleSelected);

this.markerObject = new AR.GeoObject(markerLocation, {
       drawables: {
           cam: [    this.markerDrawable_idle, 
                   this.markerDrawable_selected, 
                   this.titleLabel, 
                   this.descriptionLabel ],
           indicator: this.directionIndicatorDrawable,
           radar: this.radardrawables
       }
   });</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/js/marker.js#L83-L95">GitHub</a>
</div>

<p>To highlight a selected marker in the radar update the drawables in the function </p>
<p><img src="images/sample_poi_focus_radar.jpg" alt=""> <img src="images/sample_poi_focus_radar_selected.jpg" alt=""></p>
<p><code>Marker.prototype.setSelected</code> and <code>Marker.prototype.setDeselected</code>, compare <strong>marker.js</strong>:</p>
<pre><code class="lang-js">marker.markerObject.drawables.radar = marker.radardrawablesSelected;
[...]
marker.markerObject.drawables.radar = marker.radardrawables;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/js/marker.js#L178-L188">GitHub</a>
</div>

<p>The position of the radar and its size are defined using a DOM element. In our example a <code>div</code> element with id <code>radarContainer</code>, compare <strong>index.html</strong>:</p>
<pre><code>&lt;div class=&quot;radarContainer_left&quot; id=&quot;radarContainer&quot;&gt;&lt;/div&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/index.html#L49">GitHub</a>
</div>

<p>The size and position of the radar is defined in a css class, see <strong>poi-radar.css</strong>:</p>
<pre><code>/* position of POI-radar*/

.radarContainer_left {
    position:absolute;
    top:0px;
    left:0px;
    width:100px;
    height:100px;
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/css/poi-radar.css#L7-L13">GitHub</a>
</div>

<p>We advise you to use an absolute position for the element which will be referred to the radar container. Keep in mind: In case the DOM element is updated on the fly via jQuery or responsive design use <code>AR.radar.notifyUpdateRadarPosition();</code> to force radar position/size updates, otherwise the very first position/size will be used.</p>
<p>The radar itself can be customized and should be implemented as a separate component in your JavaScript code, compare <strong>radar.js</strong>.</p>
<pre><code class="lang-js">var PoiRadar = {

    hide: function hideFn() {
        AR.radar.enabled = false;
    },

    show: function initFn() {

        // the div defined in the index.htm
        AR.radar.container = document.getElementById(&quot;radarContainer&quot;);

        // set the back-ground image for the radar
        AR.radar.background = new AR.ImageResource(&quot;assets/radar_bg.png&quot;);

        // set the north-indicator image for the radar 
        // (not necessary if you don&#39;t want to display a north-indicator)
        AR.radar.northIndicator.image = new AR.ImageResource(&quot;assets/radar_north.png&quot;);

        // center of north indicator and radar-points in the radar asset, 
        // usually center of radar is in the exact middle of the background, 
        // meaning 50% X and 50% Y axis --&gt; 0.5 for centerX/centerY
        AR.radar.centerX = 0.5;
        AR.radar.centerY = 0.5;

        AR.radar.radius = 0.3;
        AR.radar.northIndicator.radius = 0.0;

        AR.radar.enabled = true;
    },

    updatePosition: function updatePositionFn() {
        if (AR.radar.enabled) {
            AR.radar.notifyUpdateRadarPosition();
        }
    },

    // you may define some custom action when user pressed radar, 
    // e.g. display distance, custom filtering etc.
    clickedRadar: function clickedRadarFn() {
        alert(&quot;Radar Clicked&quot;);
    },

    setMaxDistance: function setMaxDistanceFn(maxDistanceMeters) {
        AR.radar.maxDistance = maxDistanceMeters;
    }
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/js/radar.js#L1-L42">GitHub</a>
</div>

<p>Call the <code>PoiRadar.show</code> function to activate the radar component. You may even define a click action if requested, compare <strong>addingRadar.js</strong>:</p>
<pre><code class="lang-js">// show radar &amp; set click-listener
PoiRadar.show();
$(&#39;#radarContainer&#39;).unbind(&#39;click&#39;);
$(&quot;#radarContainer&quot;).click(PoiRadar.clickedRadar);</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_2_AddingRadar/js/addingRadar.js#L34-L38">GitHub</a>
</div>

<p><a id="limitingvisiblepois"></a></p>
<a name="limiting-visible-pois-36"></a><h3>Limiting Visible POIs (3/6)</h3>
<p>Users are sometimes only interested to see POIs within a certain range. This sample provides an additional button in the titlebar button to allow users to change the range of interest.</p>
<p><img src="images/sample_poi_range.jpg" alt=""></p>
<p>First of all add a button in the titlebar</p>
<p><strong>index.html</strong></p>
<pre><code>&lt;!-- header of UI holding feature buttons --&gt;
&lt;div id =&quot;header-status&quot; data-role=&quot;header&quot; data-position=&quot;fixed&quot; data-theme=&quot;c&quot;&gt;
    &lt;a href=&quot;javascript: World.showRange();&quot; data-icon=&quot;gear&quot; data-inline=&quot;true&quot; data-mini=&quot;true&quot;&gt;Range&lt;/a&gt;
    &lt;h1&gt;&lt;/h1&gt;
&lt;/div&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_3_LimitingRange/index.html#L43-L47">GitHub</a>
</div>

<p>Afterwards define the panel layout for distance range. In this case the current range in meters and the number of visible POIs is shown in the panel.</p>
<p><strong>index.html</strong></p>
<pre><code>&lt;!-- range panel --&gt;
&lt;div data-role=&quot;panel&quot; id=&quot;panel-distance&quot; data-position=&quot;left&quot; data-display=&quot;overlay&quot; style=&quot;background-color:#F0F0F0;&quot; data-theme=&quot;c&quot;&gt;

    &lt;!-- header with close button --&gt;
    &lt;div data-role=&quot;header&quot; data-theme=&quot;c&quot;&gt;
        &lt;h1&gt;Range&lt;/h1&gt;
        &lt;a href=&quot;#header&quot; data-rel=&quot;close&quot;&gt;Close&lt;/a&gt;
    &lt;/div&gt;

    &lt;!-- distance information, calculated/updated in code  --&gt;
    &lt;div data-role=&quot;content&quot;&gt;

    &lt;!-- Range in m/km--&gt;
    &lt;h4&gt; Range: &lt;a id=&quot;panel-distance-value&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

    &lt;!-- Amount of visible places --&gt;
    &lt;h4&gt; Visible: &lt;a id=&quot;panel-distance-places&quot;&gt;&lt;/a&gt;&lt;/h4&gt;

    &lt;!-- default slider --&gt;
    &lt;input id=&quot;panel-distance-range&quot; type=&quot;range&quot; data-highlight=&quot;true&quot; name=&quot;rangeSlider&quot; min=&quot;0&quot; max=&quot;100&quot; value=&quot;100&quot; data-show-value=&quot;false&quot; step=&quot;5&quot; data-popup-enabled=&quot;false&quot;&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_3_LimitingRange/index.html#L94-L115">GitHub</a>
</div>

<p>The function <code>World.updateRangeValues</code> is executed every time a user changes the slider value.
Besides proper calculation of the maximum distance and total number of visible places <a href="../Reference/JavaScript%20Reference/classes/context.html#property_scene.cullingDistance"><code>AR.context.scene.cullingDistance</code></a> and <code>PoiRadar.setMaxDistance</code> are executed to update rendering of markers and drawables in the radar, compare <strong>limitingRange.js</strong></p>
<pre><code class="lang-js">    // updates values show in &quot;range panel&quot;
updateRangeValues: function updateRangeValuesFn() {

    // get current slider value (0..100);
    var slider_value = $(&quot;#panel-distance-range&quot;).val();

    // max range relative to the maximum distance of all visible places
    var maxRangeMeters = Math.round(World.getMaxDistance() * (slider_value / 100));

    // range in meters including metric m/km
    var maxRangeValue = (maxRangeMeters &gt; 999) ? ((maxRangeMeters / 1000).toFixed(2) + &quot; km&quot;) : (Math.round(maxRangeMeters) + &quot; m&quot;);

    // number of places within max-range
    var placesInRange = World.getNumberOfVisiblePlacesInRange(maxRangeMeters);

    // update UI labels accordingly
    $(&quot;#panel-distance-value&quot;).html(maxRangeValue);
    $(&quot;#panel-distance-places&quot;).html((placesInRange != 1) ? (placesInRange + &quot; Places&quot;) : (placesInRange + &quot; Place&quot;));

    // update culling distance, so only places within given range are rendered
    AR.context.scene.cullingDistance = Math.max(maxRangeMeters, 1);

    // update radar&#39;s maxDistance so radius of radar is updated too
    PoiRadar.setMaxDistance(Math.max(maxRangeMeters, 1));
},

// returns number of places with same or lower distance than given range
getNumberOfVisiblePlacesInRange: function getNumberOfVisiblePlacesInRangeFn(maxRangeMeters) {

    // sort markers by distance
    World.markerList.sort(World.sortByDistanceSorting);

    // loop through list and stop once a placemark is out of range ( -&gt; very basic implementation )
    for (var i = 0; i &lt; World.markerList.length; i++) {
        if (World.markerList[i].distanceToUser &gt; maxRangeMeters) {
            return i;
        }
    };

    // in case no placemark is out of range -&gt; all are visible
    return World.markerList.length;
},</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_3_LimitingRange/js/limitingRange.js#L162-L203">GitHub</a>
</div>

<p>The position of the radar component can be updated using another CSS style (using e.g. <code>removeClass</code> and <code>addClass</code> of jQuery) and calling <code>PoiRadar.updatePosition();</code>. In this sample the radar element moves to the right when the distance panel. Compare <strong>limitingRange.js</strong></p>
<pre><code class="lang-js">handlePanelMovements: function handlePanelMovementsFn() {

    $(&quot;#panel-distance&quot;).on(&quot;panelclose&quot;, function(event, ui) {
        $(&quot;#radarContainer&quot;).addClass(&quot;radarContainer_left&quot;);
        $(&quot;#radarContainer&quot;).removeClass(&quot;radarContainer_right&quot;);
        PoiRadar.updatePosition();
    });

    $(&quot;#panel-distance&quot;).on(&quot;panelopen&quot;, function(event, ui) {
        $(&quot;#radarContainer&quot;).removeClass(&quot;radarContainer_left&quot;);
        $(&quot;#radarContainer&quot;).addClass(&quot;radarContainer_right&quot;);
        PoiRadar.updatePosition();
    });
},</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_3_LimitingRange/js/limitingRange.js#L207-L217">GitHub</a>
</div>

<p>The <code>World.showRange</code> function is executed when a user presses the <code>Range</code> button.</p>
<pre><code class="lang-js">// display range slider
showRange: function showRangeFn() {
    if (World.markerList.length &gt; 0) {

        // update labels on every range movement
        $(&#39;#panel-distance-range&#39;).change(function() {
            World.updateRangeValues();
        });

        World.updateRangeValues();
        World.handlePanelMovements();

        // open panel
        $(&quot;#panel-distance&quot;).trigger(&quot;updatelayout&quot;);
        $(&quot;#panel-distance&quot;).panel(&quot;open&quot;, 1234);
    } else {

        // no places are visible, because the are not loaded yet
        World.updateStatusMessage(&#39;No places available yet&#39;, true);
    }
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_3_LimitingRange/js/limitingRange.js#L221-L240">GitHub</a>
</div>

<p><a id="reloadingpoidata"></a></p>
<a name="reloading-poi-data-46"></a><h3>Reloading POI Data (4/6)</h3>
<p>You may need to reload POI information because of user movements or manually for various reasons. In this example POIs are reloaded when user presses the refresh button. The button is defined in <strong>index.html</strong> and calls <code>World.reloadPlaces()</code> on click.</p>
<pre><code>&lt;a href=&quot;javascript: World.reloadPlaces()&quot; data-icon=&quot;refresh&quot; &gt;Reload&lt;/a&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_4_ReloadingContent/index.html#L46">GitHub</a>
</div>

<p>The implementation of <code>World.reloadPlaces()</code> is part of the ARchitect World (<strong>reloadingPois.js</strong>) and executes <code>World.requestDataFromServer</code> which retrieves data according to the user&#39;s current location from a web service.</p>
<p>Sidenote: In certain circumstances your web service may not be available or other connection issues can occur. To notify the user about connection problems a status message is updated, In your own implementation you may e.g. use an info popup or similar.</p>
<pre><code class="lang-js">var World = {

    […]

    // reload places from content source
    reloadPlaces: function reloadPlacesFn() {
        if (!World.isRequestingData) {
            if (World.userLocation) {
                World.requestDataFromServer(World.userLocation.latitude,
                                            World.userLocation.longitude);
            } else {
                World.updateStatusMessage(&#39;Unknown user-location.&#39;, true);
            }
        } else {
            World.updateStatusMessage(&#39;Already requesting places...&#39;, true);
        }
    }

    […]
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_4_ReloadingContent/js/reloadingPois.js#L251-L262">GitHub</a>
</div>

<p><a id="nativedetailscreen"></a></p>
<a name="displaying-native-detail-screen-56"></a><h3>Displaying Native Detail Screen (5/6)</h3>
<p>It may make sense to display POI details in your native style. In this sample a very simple native screen opens when user presses the &#39;More&#39; button in HTML. This demoes the interaction between JavaScript and native code.</p>
<p><img src="images/sample_poi_native.jpg" alt=""></p>
<p>A More button is added to <strong>index.html</strong> which calls the function <code>World.onPoiDetailMoreButtonClicked</code>.</p>
<pre><code>&lt;!-- more button--&gt;
&lt;a href=&quot;javascript: World.onPoiDetailMoreButtonClicked();&quot; 
   data-role=&quot;button&quot; data-icon=&quot;arrow-r&quot; data-iconpos=&quot;right&quot; data-inline=&quot;true&quot;&gt;
    More
&lt;/a&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_5_NativeDetailScreen/index.html#L96">GitHub</a>
</div>

<p><code>World.onPoiDetailMoreButtonClicked</code> is implemented in <strong>nativePoiDetail.js</strong> and executes <code>document.location = architectsdk://...</code>. The urlListener of the native project intercepts this call and parses the arguments. This is the only way to pass information from JavaScript to your native code. Ensure to properly encode and decode arguments.</p>
<pre><code class="lang-js">var World = {
    […]

    // user clicked &quot;More&quot; button in POI-detail panel -&gt; fire event to open native screen
    onPoiDetailMoreButtonClicked: function onPoiDetailMoreButtonClickedFn() {

        var currentMarker = World.currentMarker;
        var architectSdkUrl = &quot;architectsdk://markerselected?id=&quot; +
                            encodeURIComponent(currentMarker.poiData.id) + 
                            &quot;&amp;title=&quot; + 
                            encodeURIComponent(currentMarker.poiData.title) + 
                            &quot;&amp;description=&quot; + 
                            encodeURIComponent(currentMarker.poiData.description);
        document.location = architectSdkUrl;

    }

    […]
}</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_5_NativeDetailScreen/js/nativePoiDetail.js#L105-L117">GitHub</a>
</div>

<p>Please have a look at the <a href="#nativedetailscreenplatform">this</a> section which describes the custom url scheme native part.</p>
<p><a id="capturescreen"></a></p>
<a name="capture-screen-bonus-66"></a><h3>Capture Screen Bonus (6/6)</h3>
<p>This sample shows you how to use the function <code>captureScreen</code>  to share a snapshot with your friends. Concept of interaction between JavaScript and native code is same as in the POI Detail page sample but the <code>urlListener</code> now handles picture sharing instead. The &quot;Snapshot&quot;-button is on top right in the title bar. Once clicked the current screen is captured and user is prompted to share it.</p>
<pre><code> &lt;!-- header of UI holding feature buttons --&gt;
        &lt;div id =&quot;header-status&quot; data-role=&quot;header&quot; data-position=&quot;fixed&quot; data-theme=&quot;c&quot;&gt;
            &lt;a href=&quot;javascript: World.showRange();&quot; data-icon=&quot;gear&quot; data-inline=&quot;true&quot; data-mini=&quot;true&quot;&gt;Range&lt;/a&gt;
            &lt;a href=&quot;javascript: World.captureScreen()&quot; data-icon=&quot;refresh&quot; &gt;Snapshot&lt;/a&gt;
            &lt;h1&gt;&lt;/h1&gt;
        &lt;/div&gt;</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_5_NativeDetailScreen/js/nativePoiDetail.js#L105-L117">GitHub</a>
</div>

<p>Handling of picture sharing is done in native code.</p>
<pre><code class="lang-js">    // tell native (urlListener) that user pressed &#39;Snapshot&#39; button
    captureScreen: function captureScreenFn() {
        document.location = &quot;architectsdk://button?action=captureScreen&quot;;
    },</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/5_BrowsingPois_6_CaptureScreenBonus/js/captureScreen.js#L275-L280">GitHub</a>
</div>

<p><img src="images/sample_poi_snapshot.jpg" alt="">## Browsing POIs Android</p>
<a name="displaying-native-detail-screen-56"></a><h3>Displaying Native Detail Screen (5/6)</h3>
<p>The <code>ArchitectUrlListener</code> interface allows you to exchange information between the JavaScript and the native code. It needs to be implemented whenever you want to communicate from JavaScript wicht the native code. </p>
<p>The method  <code>urlWasInvoked(String uriString)</code> is called whenever the document.location in the Javascript file is the to the scheme <code>architectsdk://</code> with any additional information encoded as URI components.
The parameter <em>uriString</em> represents the information as a string and can be parsed e.g. with <code>Uri invokedUri = Uri.parse(uriString);</code></p>
<a name="sample-usage"></a><h5>Sample usage:</h5>
<pre><code>            // fetch e.g. document.location = &quot;architectsdk://markerselected?id=1&quot;;
            public boolean urlWasInvoked(String uriString) {
                Uri invokedUri = Uri.parse(uriString);
                if (&quot;markerselected&quot;.equalsIgnoreCase(invokedUri.getHost())) {
                        final Intent poiDetailIntent = new Intent(SampleCamHandlePoiDetailActivity.this, SamplePoiDetailActivity.class);
                        poiDetailIntent.putExtra(SamplePoiDetailActivity.EXTRAS_KEY_POI_ID, String.valueOf(invokedUri.getQueryParameter(&quot;id&quot;)) );
                        poiDetailIntent.putExtra(SamplePoiDetailActivity.EXTRAS_KEY_POI_TITILE, String.valueOf(invokedUri.getQueryParameter(&quot;title&quot;)) );
                        poiDetailIntent.putExtra(SamplePoiDetailActivity.EXTRAS_KEY_POI_DESCR, String.valueOf(invokedUri.getQueryParameter(&quot;description&quot;)) );
                        SampleCamHandlePoiDetailActivity.this.startActivity(poiDetailIntent);
                        return true;
                }
                return false;
            }</code></pre>
<p>Please refer to the <strong>presentingPoiDetails.js</strong> file for more details about the JavaScript part.</p>

<a name="video-drawables"></a><h2>Video Drawables</h2>
<p>Besides images, text and HTML content you are able to display videos in augmented reality using the Wikitude SDK. With the help of <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html"><code>AR.VideoDrawables</code></a> you can add a video on top of any target image (<a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>) or have it displayed at any geo location (<a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a>). Like any other drawable you can position, scale, rotate and change the opacity of the video drawable.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 2</a></p>
<a name="supported-devices"></a><h3>Supported Devices</h3>
<p>In general, video drawables are fully supported on devices running iOS 6+ and Android 4.0+. Other devices will still play back the video but only in fullscreen mode as a fall-back solution. </p>
<ul>
<li>iOS 6.0 or newer: full support</li>
<li>Android 4.0 or newer: full support</li>
<li>Android 3.x or older: only fullscreen videos</li>
</ul>
<p>The Wikitude SDK is detecting the appropriate mode accordingly.</p>
<a name="supported-video-codecs-and-hosting-services"></a><h3>Supported Video Codecs and Hosting Services</h3>
<p>To support all platforms make sure to use a H.264 encoded video with a maximum resolution of 720p (1280x720 pixel).</p>
<p>H.264 defines different profiles. Make sure that you are using either one of the following</p>
<ul>
<li>Baseline</li>
<li>Extended</li>
<li>Main</li>
</ul>
<p>If the profile differs Android devices will most certainly misbehave (fail to play or crash entirely) when playing back those videos. </p>
<p>Keep in mind that URLs from video hosting services need to point directly to the H.264 encoded video file. Standard YouTube and Vimeo URLs (like <a href="http://www.youtube.com/watch?v=bX98XNv8VL4">http://www.youtube.com/watch?v=bX98XNv8VL4</a>) will <strong>not</strong> work for this purpose. </p>
<p>If you like to add a YouTube video, which is then played full-screen in the native player, rather use an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> showing a poster or play-button and add the URL to the YouTube video to the <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html#event_onClick"><code>onClick</code></a> trigger. Similar to what we do in the <a href="imagerecognition.html#interactivity">image recognition sample</a>.</p>
<a name="video-sample"></a><h3>Video Sample</h3>
<p>The following examples will demonstrate how to choose a proper video and how to augment a target image. Furthermore it shows how to react on playback states and concludes with how to use transparent videos.</p>
<p>This sample consists of four parts</p>
<ol>
<li><a href="#choosingvideo">Select a Video and add it to a Target Image</a></li>
<li><a href="#playback">Control Video Playback</a></li>
<li><a href="#snappingvideo">Snapping Video</a></li>
<li><a href="#transparentvideo">Bonus: Transparent Video</a></li>
</ol>
<p><a id="choosingvideo"></a></p>
<a name="select-a-video-and-add-it-to-a-target-image-14"></a><h3>Select a Video and add it to a Target Image (1/4)</h3>
<p>The video we use for this example is &quot;video.mp4&quot;. As with all resources the video can be loaded locally from the application bundle or remotely from any server. In this example the video file is already bundled with the application.</p>
<p>To view the sample you can use the images in <a href="images/target_images_examples.pdf">this PDF on page 2 and page 3</a>. </p>
<p>With the video URL at hand the drawable is created as follows:</p>
<pre><code class="lang-js">// Create video drawable
var video = new AR.VideoDrawable(&quot;assets/video.mp4&quot;, 0.5, {
    offsetX: 0.2,
    offsetY: 0.2
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_1_SimpleVideo/js/video.js#L23-L25">GitHub</a>
</div>


<p>The URL and the size are required when creating a new <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html"><code>AR.VideoDrawable</code></a>. Optionally the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#property_offsetX"><code>offsetX</code></a> and <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#property_offsetY"><code>offsetY</code></a> parameters are set to position the video on the target. The values for the offsets are again in SDUs (more information on the concept of SDUs <a href="sdu-dbs.html">here</a>). </p>
<p>Adding the video to the target image is straight forward and similar like adding any other drawable to an image target.</p>
<pre><code class="lang-js">var pageOne = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: video
    },
    onEnterFieldOfVision: function onEnterFieldOfVisionFn () {
        video.play(-1);
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_1_SimpleVideo/js/video.js#L34-L42">GitHub</a>
</div>

<p><img src="images/simple_videos.jpg" style="width:300px;"></img> </p>
<p>To start the video immediately after the target is recognized we call <code>play</code> inside the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#event_onEnterFieldOfVision"><code>onEnterFieldOfVision</code></a> trigger. Supplying <code>-1</code> to <code>play</code> tells the Wikitude SDK to loop the video infinitely. Choose any positive number to re-play it multiple times.</p>
<p>Note that we&#39;re using the wildcard <code>*</code>as the target name. This indicates that the trackable will match any target that is defined in the supplied tracker.</p>
<p><a id="playback"></a></p>
<a name="control-video-playback-24"></a><h3>Control Video Playback (2/4)</h3>
<p>The class <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html"><code>AR.VideoDrawable</code></a> offers functions and triggers to control playback of the video and get notified of playback states. The following example makes use of the triggers and states to display an image of a play button on top of the target. Once the user clicks the play button the video starts to play. Additionally we pause and resume the video whenever the target is lost so the user does not miss any video content when looking away.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 2</a></p>
<pre><code class="lang-js">// Create video drawable
var video = new AR.VideoDrawable(&quot;assets/video.mp4&quot;, 0.5, {
    offsetX: 0.2,
    offsetY: 0.2,
    onLoaded: function videoLoaded() {
        playButton.enabled = true;
    },
    onPlaybackStarted: function videoPlaying () {
        playButton.enabled = false;
        video.enabled = true;
    },
    onFinishedPlaying: function videoFinished () {
        playButton.enabled = true;
        video.playing = false;
        video.enabled = false;
    },
    onClick: function videoClicked () {
        if (video.playing) {
            video.pause();
            video.playing = false;
            playButton.enabled = true;
        } else {
            video.resume();
            video.playing = true;
            playButton.enabled = true;
        }
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_2_PlaybackStates/js/video.js#L42-L67">GitHub</a>
</div>

<p>As before the video is positioned on the target with the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#property_offsetX"><code>offsetX</code></a> and <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#property_offsetY"><code>offsetY</code></a> properties. Additionally functions are assigned to the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#event_onLoaded"><code>onLoaded</code></a>, <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#event_onPlaybackStarted"><code>onPlaybackStarted</code></a> and <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#event_onFinishedPlaying"><code>onFinishedPlaying</code></a> triggers. The <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#event_onLoaded"><code>onLoaded</code></a> trigger fires once the video is ready for playback and the <code>playButton</code> is enabled. The <code>playButton</code> is an <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> defined as follows:</p>
<pre><code class="lang-js">// Create play button
var playButtonImg = new AR.ImageResource(&quot;assets/playButton.png&quot;);
var playButton = new AR.ImageDrawable(playButtonImg, 0.2, {
    enabled: false,
    onClick: function playButtonClicked() {
        video.play(1);
        video.playing = true;
    },
    offsetX: video.offsetX,
    offsetY: video.offsetY
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_2_PlaybackStates/js/video.js#L17-L27">GitHub</a>
</div>

<p>Once the user clicks the button the video is played once: <code>video.play(1)</code>. Starting the playback fires the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#event_onPlaybackStarted"><code>onPlaybackStarted</code></a> trigger that in this example hides the <code>playButton</code>. When playback finishes the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#event_onFinishedPlaying"><code>onFinishedPlaying</code></a> trigger is called that shows the <code>playButton</code> again.</p>
<p>To give the user the possibility to pause the video the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html"><code>AR.VideoDrawable&#39;s</code></a> click trigger is used. If the video is playing and the user is clicking the function <code>pause()</code> is called which then pauses playback. Clicking the video again resumes playback.</p>
<p>Similar to the user clicking on the video we want to pause/resume the playback if the target image is lost - as this means  the user is currently not actively watching the video. To  accomplish this the <code>onEnterFieldOfVision</code> and <code>onExitFieldOfVision</code> triggers of the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> are used:</p>
<pre><code class="lang-js">var pageOne = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: [video, playButton]
    },
    onEnterFieldOfVision: function onEnterFieldOfVisionFn () {
        if (video.playing) {
            vide.pause();
        }
    },
    onExitFieldOfVision: function onExitFieldOfVisionFn () {
        if (video.playing) {
            video.resume();
        }
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_2_PlaybackStates/js/video.js#L78-L93">GitHub</a>
</div>

<p>This concludes the example showing you how to control the playback of a <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html"><code>AR.VideoDrawable</code></a>. Have a look at the <a href="../Reference/JavaScript%20Reference">API Reference</a> for more details on each of the functions and triggers.</p>
<p><a id="snappingvideo"></a></p>
<a name="snapping-video-34"></a><h3>Snapping Video (3/4)</h3>
<p>In the <a href="#playback">previous example</a> we used several triggers to pause and resume video playback when the target image is lost so that the user doesn&#39;t miss any video content while looking away. In this example we take this approach a little further and do not pause and resume video playback but instead snap the video onto the screen so that it is still visible even when the target image is lost.
To do so the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> offers several <code>snapToScreen</code> settings. In this example we use the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#property_snapToScreen.enableOnExitFieldOfVision"><code>snapToScreen.enabledOnExitFieldOfVision</code></a> property to automatically snap all cam drawables onto the screen when the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#event_onExitFieldOfVision"><code>onExitFieldOfVision</code></a> event occurs. To disable snapping when the target image is visible again we use the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#property_snapToScreen.enabled"><code>snapToScreen.enabled</code></a> property and set it to <code>false</code> in the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#event_onEnterFieldOfVision"><code>onEnterFieldOfVision</code></a> event. Doing so will display all cam drawables on the target image again.</p>
<pre><code class="lang-js">this.pageOne = new AR.Trackable2DObject(this.tracker, &quot;*&quot;, {
    drawables: {
        cam: [this.video, playButton]
    },
    onEnterFieldOfVision: function onEnterFieldOfVision() {
        World.pageOne.snapToScreen.enabled = false;
    },
    snapToScreen: {
        enabledOnExitFieldOfVision: true,
        snapContainer: document.getElementById(&#39;snapContainer&#39;)
    }
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_3_SnappingVideo/js/video.js#L80-L92">GitHub</a>
</div>


<p>The snap position is defined through a <code>div</code> element in your HTML source. The position and size of the <code>div</code> will affect the appearance of all cam drawables in the snapped state. It&#39;s important to update the <code>div</code> for both orientations, portrait and landscape, so that the augmentations will appear as expected. This example uses css to adopt the <code>div</code> for different device orientations.</p>
<p><a id="transparentvideo"></a></p>
<a name="bonus-transparent-video-44"></a><h3>Bonus: Transparent video (4/4)</h3>
<p>This bonus example shows you how to add transparent videos on top of a target. Transparent videos require some extra preparation work.</p>
<p>Summarizing the required steps, here is what you need to do in order to use transparent videos in a simple list. We are describing each of the steps in more detail.</p>
<ol>
<li>Produce a green screen (chroma key) video</li>
<li>Edit that video using standard video processing software and remove the green screen. Export your result into a file format, which can handle alpha channel information (e.g. Apple PreRes 4444)</li>
<li>Convert the video from step 2 using the script in the tools folder</li>
<li>Add it to a target image</li>
</ol>
<p>Producing a transparent video is usually done using a green screen for filming and a technique called chroma key to replace the green background with transparency. Extensive information is available on the internet that should help you get started on this topic. </p>
<p>There are different video codecs that support alpha channels for motion picture and most of them will work as your raw material. We have extensively tested Apple ProRes 4444 codec for our own development and were satisfied with the results.</p>
<p>The Wikitude SDK can only render H.264 encoded videos, which is a codec that in practice does not support an alpha channel. The solution here is to include in the alpha channel in a separate (visible) part of the video. The video is split vertically consisting of a color and a alpha channel in the final video below each other. The following image shows how the preprocessing result should look like.</p>
<p><img src="images/video_h264_transparent.png" alt=""></p>
<p>The upper half of the image transports the color information for the final video while the lower half includes a grayscale representation of the alpha layer. White areas will be fully opaque and black areas will be fully transparent. If you are familiar with Photoshop, think of the lower half as a mask. Resulting videos have an height that is exactly twice as big as the input video.</p>
<p>To convert your raw video to a valid input video for the SDK we need to re-encode the video and automatically create the alpha mask. The script below uses <code>ffmpeg</code> to do so and wraps the necessary commands. Follow these simple steps:</p>
<a name="macos-x"></a><h4>MacOS X</h4>
<ol>
<li>Open the Terminal application</li>
<li>Input <code>cd &lt;SDK&gt;/tools/video/MacOSX</code>. Replace <code>&lt;SDK&gt;</code> with the path to the SDK folder</li>
<li>Execute <code>sh convert.sh &lt;input video&gt; &lt;output video&gt;</code>. Replace <code>&lt;input video&gt;</code> with the path to your transparent video and <code>&lt;output video&gt;</code> with the path where you want the output video to be stored.</li>
</ol>
<a name="windows"></a><h4>Windows</h4>
<ol>
<li>Open the Command Line</li>
<li><code>cd &lt;SDK&gt;\tools\video\Windows</code>. Replace <code>&lt;SDK&gt;</code> with the path to the SDK folder</li>
<li>Execute <code>convert.bat &lt;input video&gt; &lt;output video&gt;</code>. Replace <code>&lt;input video&gt;</code> with the path to your transparent video and <code>&lt;output video&gt;</code> with the path where you want the output video to be stored.</li>
</ol>
<p>This creates the required video with a vertically split color and alpha channel.</p>
<p>Adding the transparent H.264 video to a target image is easy and accomplished in the same way as any other video is added. Just make sure to set the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html#method_isTransparent"><code>isTransparent</code></a> property of the <a href="../Reference/JavaScript%20Reference/classes/VideoDrawable.html"><code>AR.VideoDrawable</code></a> to <code>true</code>.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 2</a></p>
<p><img src="images/transparent_video_1.jpg" style="width:300px;"></img> <img src="images/transparent_video.jpg" style="width:300px;"></img></p>
<pre><code class="lang-js">// Create a transparent video drawable
var video = new AR.VideoDrawable(&quot;assets/transparentVideo.mp4&quot;, 0.7, {
    offsetX: -0.2,
    offsetY: -0.12,
    isTransparent: true
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/6_Video_4_Bonus-TransparentVideo/js/video.js#L52-L56">GitHub</a>
</div>

<a name="image-recognition-and-geo"></a><h2>Image Recognition And Geo</h2>
<p>The Wikitude SDK allows you to combine location based augmented reality scenes with vision baed scenes to create a seamless experience for users. This tutorial will show you how to accomplish this and will provide you with additional advices.</p>
<p>Let’s start by creating the  <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.Tracker</code></a> for recognizing a fictional store logo and assign it to an <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>.</p>
<pre><code class="lang-js">// Create the tracker to recognize a store logo
var trackerDataSetPath = &quot;assets/ShopLogo.wtc&quot;;
IrAndGeo.tracker = new AR.Tracker(trackerDataSetPath, {
    onLoaded: IrAndGeo.loadingStepDone,
    onError: IrAndGeo.errorLoading
});

// Create drawables to display on the recognized image
var logo = new AR.ImageDrawable(IrAndGeo.res.logo, 1.0, {
    zOrder: -1
});

// ...

IrAndGeo.menuDrawables = [logo, buttonDeal, buttonWeb, buttonStores];
IrAndGeo.dealDrawable = new AR.ImageDrawable(IrAndGeo.res.deal, 1.0, {
    enabled: false,
    onClick: IrAndGeo.hideDeal
});

// Create the object by defining the tracker, target name and its drawables
var trackable2DObject = new AR.Trackable2DObject(IrAndGeo.tracker, &quot;ShopLogo&quot;, {
    drawables: {
        cam: [logo, buttonDeal, buttonWeb, buttonStores, IrAndGeo.dealDrawable, IrAndGeo.model]
    },
   // ...
});</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/99_Demo_1_ImageRecognitionAndGeo/js/irandgeo.js#L118-L156">GitHub</a>
</div>

<p><img src="images/irangeo_screenshot.jpeg" alt="Finally result of overlaid images on top of shop logo." title="Finally result of overlaid images on top of shop logo."></p>
<p>This is all it takes to display drawables on top of a recognized image. The locations based augmented reality part can be accomplished similarly to any other
ARchitect World.</p>
<pre><code class="lang-js">IrAndGeo.createMarker = function(lat, lon, name) {
    var loc = new AR.GeoLocation(lat, lon);
    var imageDrawable = new AR.ImageDrawable(IrAndGeo.res.marker, 2, {
        scale: 0.0,
        onClick: function() {
            alert(&quot;clicked&quot;);
        }
    });

    IrAndGeo.markerAnimations.push(new AR.PropertyAnimation(imageDrawable, &#39;scale&#39;, 0.0, 1.0, 1000, {
        type: AR.CONST.EASING_CURVE_TYPE.EASE_OUT_BOUNCE
    }));
    IrAndGeo.stores.push(new AR.GeoObject(loc, {
        drawables: {
            cam: imageDrawable
        },
        enabled: false
    }));
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/99_Demo_1_ImageRecognitionAndGeo/js/irandgeo.js#L26-L49">GitHub</a>
</div>

<p>The method above creates a marker at the passed latitude and longitude. As with any other <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> the visual representation can be composed of
various drawables. The <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> is created with the value <code>enabled</code> set to <code>false</code> so it won’t be initially visible. To make it visible set the created
GeoObjects to <code>enabled</code> when an element on the image target is clicked.</p>
<p><img src="images/irgeo4_s.jpg" alt="Shop location visualized." title="Shop location visualized.">  </p>
<pre><code class="lang-js">IrAndGeo.showStores = function() {
    // enable all GeoObjects
    IrAndGeo.stores.forEach(function(x, idx) {
        x.enabled = true;
    });

    // ...
};</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/99_Demo_1_ImageRecognitionAndGeo/js/irandgeo.js#L51-L63">GitHub</a>
</div>

<p>Combining vision based and locations based augmented reality  is easy and straightforward. However, you should keep in mind that vision based augmented reality requires additional computing power (and thus battery power). Therefore, you should only create a  <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.Tracker</code></a> when it is actually needed. If it is no longer needed destroy it by calling <a href="../Reference/JavaScript%20Reference/classes/Tracker.html#method_destroy"><code>AR.Tracker.destroy()</code></a>.</p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 5</a></p>

<a name="solar-system-ir"></a><h2>Solar System (IR)</h2>
<p>In this demo we combined vision based augmented reality capabilities with 3D models to visualize our solar system in an unique way. The example allows viewers to look at several planets of the solar system and receive basic information for each planet.</p>
<p><img src="images/demo_solar_ir_1.jpg" alt="Screenshot of the complete demo." title="Screenshot of the complete demo."></p>
<p>The augmentation consists of a backdrop that is used to darken the overlaid image and the planets of our solar system (still including Pluto). Each planet is loaded as a separate 3D model to allow it to be animated independently from each other.</p>
<p><img src="images/demo_solar_ir_jupiter.png" alt="3D model of the planet Jupiter." title="3D model of the planet Jupiter."></p>
<p>Looking at the code of the example there are a few components worth noting. The detail information for each planet is stored in the <code>planetsInfo</code> array which is then used to create the <a href="../Reference/JavaScript%20Reference/classes/Model.html"><code>AR.Model</code></a> object for each planet. Depending on the size and distance from the sun each planet is placed on the target using the <code>translate</code> and <code>scale</code> properties.</p>
<p>The backdrop is a simple <a href="../Reference/JavaScript%20Reference/classes/ImageDrawable.html"><code>AR.ImageDrawable</code></a> that is added together with the planets to the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a> drawables.</p>
<pre><code>var backdropImg = new AR.ImageResource(&quot;assets/backdrop.png&quot;);
    var backdrop = [new AR.ImageDrawable(backdropImg, 2)];</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/99_Demo_3_SolarSystem(ImageRecognition)/js/solarsystemir.js#L158-L159">GitHub</a>
</div>

<p>Animating the planets on a circle around the sun is accomplished by the utilizing multiple <a href="../Reference/JavaScript%20Reference/classes/PropertyAnimation.html"><code>AR.PropertyAnimation</code></a>s which are combined in <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a>s. The function <code>createOrbitAnimation(planet, info)</code> creates the necessary animations for this action. The circle is divided in 4 quadrants which require different animations for the x and y axis. Animations for the x and y axis are combined in a parallel animation and are played sequentially  in order to achieve the desired circular movement.</p>
<p>Initially the planets are static and don&#39;t move. Once the user clicks the animate button the <code>toggleAnimatePlanets()</code> function is called. It checks the current state of the animations and starts, pauses, or resumes the animations accordingly.</p>
<p>Another part of the demo is the selection of planets and the displaying of a selected planet&#39;s information. Each planets <a href="../Reference/JavaScript%20Reference/classes/Model.html"><code>AR.Model</code></a> has an <code>onClick</code> trigger set which calls the <code>planetClicked()</code> function. This call displays a selected planet&#39;s information on the HUD. Helper functions <code>selectPlanet()</code> and <code>screenClicked()</code> activate and deactivate the selected animations and reset a previously selected planets <code>scale</code> property.</p>
<p><img src="images/solar_system.jpg" alt="Target image"></p>
<p>To view the sample you can use the image in <a href="images/target_images_examples.pdf">this PDF on page 5</a></p>

<a name="solar-system-geo"></a><h2>Solar System (Geo)</h2>
<p>Similar to the <a href="solarsystemir.html">Solar System (IR) demo</a> this demo displays the planets of our solar system, but positions them in the user&#39;s vicinity using a location based approach.</p>
<p><img src="images/demo_solar_geo_1.jpg" alt="Screenshot of the complete demo." title="Screenshot of the complete demo."></p>
<p>The detail information of each planet is defined in the <code>init()</code> function. Factors are defined to scale the planets to a reasonable size and all planets are combined in the <code>planetsInfo</code> array.</p>
<pre><code>/* put sun, planets (and pluto) in an array */
    this.planetsInfo = [sun, mercury, venus, earth, mars, jupiter, saturn, uranus, neptun, pluto];</code></pre>
<div class="githubnote">
view source code on <a target="_blank" href="https://github.com/Wikitude/wikitude-sdk-samples/blob/master/99_Demo_2_SolarSystem(Geo)/js/solarsystem.js#L149-L150">GitHub</a>
</div>

<p>Planets are represented by an <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> that features the planets image and name indicated as drawables. The <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> of each planet is positioned using a <a href="../Reference/JavaScript%20Reference/classes/RelativeLocation.html"><code>AR.RelativeLocation</code></a> that allows to placement of objects relative to the user&#39;s location. Therefore it is possible to position the solar system in northerly direction regardless of the actual longitude and latitude of the user&#39;s current position.</p>
<p>An indicator is added to the suns <a href="../Reference/JavaScript%20Reference/classes/GeoObject.html"><code>AR.GeoObject</code></a> so the user is continually guided to look in the &quot;right&quot; direction.</p>
<p>Animation of the planets is done similarly to the <a href="imagerecognitionand3d.html">3D Model sample</a> where the circular movement is composed of multiple <a href="../Reference/JavaScript%20Reference/classes/PropertyAnimation.html"><code>AR.PropertyAnimation</code></a>s that are combined using <a href="../Reference/JavaScript%20Reference/classes/AnimationGroup.html"><code>AR.AnimationGroup</code></a>s. The <code>animate(planet)</code> function is responsible for creating these animations for a moving planet.</p>
<p>Again similar to the <a href="imagerecognitionand3d.html">3D Model sample</a> the <code>planetClicked()</code> function, which is assigned to the <code>onClick</code> trigger, displays the planets information on the HUD.</p>

<a name="development-workflow"></a><h1>Development Workflow</h1>
<p>The following section describes a default development workflow for writing AR content using the ARchitect JavaScript API. It demonstrates the code test and debug cycle and provides
useful tips for each step.</p>
<a name="code-test-debug"></a><h2>Code, Test, Debug</h2>
<ol>
<li>Write your HTML, JavaScript and CSS using the text editor of your choice</li>
<li>Test in your desktop browser</li>
<li>Debug in your desktop browser using e.g. WebInspector</li>
<li>Test on a physical device</li>
<li>Debug on a physical device</li>
<li>Rinse and repeat</li>
</ol>
<p>You can use any editor for writing the ARchitect World. We particularly like <a href="http://www.sublimetext.com/">Sublime</a>, which has a great selection of plugins for web developers.</p>
<p>The next step is to test it out in a desktop browser. To have the ARchitect JavaScript API available in the desktop browser you&#39;ll need to include the ARchitect Desktop Engine (ADE). See the chapter <a href="ade.html">ARchitect Desktop Engine</a> for instructions on how to use it. While this is limited in visualizing the experience, it greatly helps in finding errors in the JavaScript code and reduces the time it takes to see effects of changes you have made to the HTML and CSS parts. Desktop browsers come with great debugging tools (e.g. [Chrome&#39;s DevTools][chrome_dev_tools] ) that allow you to easily debug your JavaScript code and that you should make full use of when debugging ARchitect Worlds.</p>
<p>Once you have verified the JavaScript is working properly you should test it on the device of your choice. Either start your application that loads the ARchitect World or run it inside the Wikitude World Browser app.</p>
<p>[chrome_dev_tools]: <a href="https://developers.google.com/chrome-developer-tools/###">https://developers.google.com/chrome-developer-tools/###</a> Run the ARchitect World within the Wikitude World Browser on Android</p>
<p>AR experiences can be tested on Android using the <a href="https://play.google.com/store/apps/details?id=com.wikitude" target="_top">Wikitude World Browser for Android</a>. Download the Wikitude app from Google Play. Launch the application and press the menu button in the upper left corner of the screen.</p>
<p><img src="images/WT8_Android_OpenMenu.png" alt=" "></p>
<p>Then tap the <code>Developer</code> button to open the developer login page.</p>
<p><img src="images/WT8_Android_DeveloperMenu.png" alt=" "></p>
<p>Enter your username and password of your Wikitude developer account and tap the login button to get to your user account. If you don&#39;t have a developer account yet register at the <a href='http://www.wikitude.com/developer/sign-in?p_p_id=58&p_p_lifecycle=0&p_p_state=maximized&p_p_mode=view&saveLastPath=0&_58_struts_action=%2Flogin%2Fcreate_account' target='top'>Wikitude developer page</a>.</p>
<p><img src="images/WT8_Android_DeveloperLogin.png" alt=" "></p>
<p>In this view, tap on the text box below the <code>Launch via URL</code> label and enter the URL of your ARchitect World. After tapping the <code>Launch</code> button your AR experience will be opened in Wikitude.</p>
<p><img src="images/WT8_Android_TestWorld.png" alt=" "></p>
<p><a id="on_device_debugging"></a></p>
<a name="on-device-debugging"></a><h2>On-Device Debugging</h2>
<p>Remote debugging is only available for devices running Android 4.4</p>
<p>To enable remote debugging of a WebView add the following line to your CamActivity.</p>
<pre><code class="lang-java">if(Build.VERSION.SDK_INT &gt;= 19) {
    WebView.setWebContentsDebuggingEnabled(true);
}</code></pre>
<p><code>setWebContentsDebuggingEnabled</code> is available for Android 4.4+, you may need to capsule that to avoid runtime errors on devices running Android lower version 4.4. Additionally set <code>TargetSDK</code> to 19 in your Android Manifest.</p>
<p>To actually start debugging  follow the steps outlined on the official <a href="https://developers.google.com/chrome-developer-tools/docs/remote-debugging">Android Developer site</a>.</p>

<a name="3d-assets-workflow"></a><h2>3D Assets Workflow</h2>
<a name="prerequisites"></a><h4>Prerequisites</h4>
<ul>
<li>A 3D model in FBX 2013 (.fbx) or Collada (.dae) file format</li>
<li>Wikitude 3D Encoder for Windows or MacOS X</li>
</ul>
<p>3D content within Wikitude can only be loaded from so-called <em>Wikitude 3D Format</em> files (.wt3).  This is a compressed binary format for describing 3D content, which is optimized for fast loading and handling of 3D content on a mobile devices. You still can use 3D models from your favorite 3D modeling tools (like Autodesk® Maya® or Blender) but need to convert them into wt3 file format. Wikitude offers a desktop application called Wikitude 3D Encoder, which takes over the task of encoding your 3D source file.  The Encoder can handle Autodesk® FBX® files (.fbx) and the open standard Collada (.dae) file formats for encoding to .wt3.</p>
<p>This section should give an overview on how to choose the right 3D models for displaying it in Wikitude&#39;s augmented reality SDK. As Wikitude is basing 3D support on a converted file format (.wt3) it is good to follow the best practices below.</p>
<a name="input-format"></a><h3>Input format</h3>
<a name="supported-3d-model-files-for-encoding-it-into-wt3-files-are"></a><h4>Supported 3D model files for encoding it into wt3 files are:</h4>
<ul>
<li>FBX (.fbx) - max version: FBX 2013</li>
<li>Collada (.dae)</li>
</ul>
<p>We recommend using FBX wherever possible as tools support for FBX is widely available. Furthermore Collada allows to include customized attributes that might not be understood by the Wikitude 3D Encoder.</p>
<a name="features-you-can-use-in-your-3d-model-source-files"></a><h4>Features you can use in your 3D model source files:</h4>
<ul>
<li>Static model (made-up of triangles)   </li>
<li><a href="#working-with-3d-animations">Animations</a><ul>
<li>Transformation Animations</li>
<li>Skinning</li>
</ul>
</li>
<li>Materials<ul>
<li>Phong, Lambert, Blinn</li>
<li>Transparency</li>
</ul>
</li>
<li>NURBS (will be tessellated on import)</li>
</ul>
<a name="features-that-are-not-yet-supported"></a><h4>Features that are not (yet) supported</h4>
<ul>
<li>Normal Mapping</li>
<li>Multi Textures</li>
<li>FBX 2014</li>
</ul>
<a name="good-practice"></a><h3>Good practice</h3>
<a name="use-png-textures"></a><h4>Use png textures</h4>
<p>Textures are stored in png format within wt3 files. While Wikitude 3D Encoder takes care of automatically converting textures to png, it is good practice to use png textures in the source 3D Model file.</p>
<a name="use-power-of-2-textures"></a><h4>Use power of 2 textures</h4>
<p>The current rendering hardware on mobile devices requires certain texture attributes if the texture is not a power of 2 textures. This can result in unexpectedly textured models. Additionally using power of 2 textures yields to a better performance when running on the device. A power of 2 textures has a width and height of 2<sup>x</sup> - like. 64x64, 128x128, and so on.</p>
<a name="validate-texture-paths"></a><h4>Validate texture paths</h4>
<p>If your opened model appears without textures, very often the texture paths are not set correctly. Make sure your texture paths are valid and accessible. For example check that they reference the texture files in a relative way and that all required textures exist and are accessible.</p>
<a name="keep-texture-size-as-low-as-possible"></a><h4>Keep texture size as low as possible</h4>
<p>Keeping texture sizes as low as possible, while maintaining the required details has several benefits. The exported .wt3 file will be smaller and therefore quicker to load over the network or from the application bundle. Additionally it will take up less graphics memory thus freeing up space for additional models or content.</p>
<a name="use-only-one-light"></a><h4>Use only one light</h4>
<p>To maintain a good rendering performance each part of your model (node) is only affected by a single light source. You may use multiple lights in the source file but at render time only a single node is selected to affect a mesh part. We make a best guess, utilizing the scene graph to assign a light to the node. If lighting is not required simply remove the lights from your source 3D model file and/or set the corresponding material properties. This helps to speed up rendering.</p>
<a name="resolving-problems"></a><h3>Resolving problems</h3>
<a name="3d-model-which-uses-joints-bones-is-distorted"></a><h4>3D Model which uses joints (bones) is distorted</h4>
<p>Create a master joint where all other joints are attached to.</p>
<a name="3d-model-shows-up-correctly-in-wikitude-3d-encoder-but-does-not-show-on-the-device"></a><h4>3D Model shows up correctly in Wikitude 3D Encoder but does not show on the device.</h4>
<p>Check that your textures have a reasonable size. Limiting the textures to the lowest size that maintains the required details is recommended.</p>
<a name="textures-are-missing"></a><h4>Textures are missing</h4>
<p>Check the error/warning dialog during the import process of the model it will give you detailed information on which textures are problematic. Make sure the texture paths are valid and accessible.</p>
<p><a id="working-with-3d-animations"></a></p>
<a name="working-with-3d-animations"></a><h2>Working with 3D Animations</h2>
<a name="quick-start"></a><h4>Quick start</h4>
<p>Export a model that contains one or more animations from your preferred 3D modeling tool to a DAE or FBX file. After you load the 3D model into the Wikitude 3D Encoder the animations are displayed in a list on the right side of your application window.</p>
<p><img src="images/encoder_animation_01.png" alt="Animation listed in Wikitude 3D Encoder"></p>
<p>Each row of the list contains the ID of the animation, a control button and the time that passed after you started the animation. Clicking the play button  will start the animation  from the beginning and play back the animation in the 3D view of the application. The stop button will stop animation and displays the frame, that was drawn last.</p>
<p>Check if your model looks and animates as expected and export it to a wt3 file. You need the  IDs of the animations you want to use in your application. The IDs are displayed next to the animation control button (on the screenshot the animation ID is <em>butterfly_animation</em>). In your code you start an animation like this.</p>
<pre><code class="lang-js">// instantiate the model object
var model = new AR.Model(&quot;butterfly.wt3&quot;);

// instantiate the model animation with the animation id
var animation = new AR.ModelAnimation(model, &quot;butterfly_animation&quot;);

// start the animation
animation.start();</code></pre>
<a name="export-animations"></a><h4>Export Animations</h4>
<p>The Wikitude 3D Encoder supports animation of joints and transformation animations. This includes transformation animations along motion paths.</p>
<p>When exporting the model from the 3D modeling tool you have to <strong>bake</strong> your animations. As an example Maya bakes all unsupported constraints, including Maya-supported and FBX constraints, into animation curves.</p>
<a name="grouping-animations"></a><h4>Grouping Animations</h4>
<p>Animations will be grouped automatically to a top level node. In order to create two separate animations you need to group them in your modeling tool accordingly.</p>
<p>To illustrate that let&#39;s create an example with 3 spheres and 3 cylinders with different translation animations. In the scene graph this example looks like the following:</p>
<pre><code>• sphere1
• sphere2
• sphere3
• cylinder1
• cylinder2
• cylinder3</code></pre>
<p>Once the example is exported into a DAE or FBX file and imported into the Wikitude 3D Encoder  six separate animations, one for each object, will be generated.</p>
<p>Let&#39;s assume we want to group all sphere animations into one animation and all cylinders into a second animation. This can achieved by creating two separate groups. One group containing all spheres and another one containing all cylinders. In the scene graph this is going to look like this:</p>
<pre><code>• all_spheres_group
  • sphere1
  • sphere2
  • sphere3
• all_cylinders_group
  • cylinder1
  • cylinder2
  • cylinder3</code></pre>
<p>Once we export this into a DAE or an FBX file and import it into the Wikitude 3D Encoder we would get the desired result: one animation that animates all spheres and another animation animating all cylinders.</p>
<p><em>Note: Do not group joints, especially when they were already skinned to a mesh.</em></p>
<a name="known-issues"></a><h4>Known Issues</h4>
<ul>
<li>Baking animations doesn’t work in Blender as of version 2.66a and 2.67a when exporting the 3D model as DAE file.</br></br>
<em>Reason: Blender 2.66a does not offer a baking option. There is a new option in Blender 2.67a when exporting to Collada DAE files among the Collada Options which is called &quot;Transformation Type&quot;. You can bake transformations to one transformation matrix but for some reason the channel is still referring to the separate matrices (translation, rotation, scale)  instead of the baked matrix. For this reason the animations will not be encoded on import to the Wikitude 3D Encoder.</em>
</br></br></li>
<li>In Blender avoid transformations on bones before you skin them to a mesh and export it to an FBX file.</li>
<li>Exporting a model (with animations) as FBX from Blender creates additional animations for camera, lights or motion paths. These can be safely ignored.</li>
</ul>

<a name="free-trial-license"></a><h1>Free Trial License</h1>
<a name="how-to-obtain-a-free-trial-license"></a><h2>How to obtain a free trial license</h2>
<p>The Wikitude SDK requires a valid license key to be able to run properly. An empty license key will block the augmented reality view from showing any meaningful content. </p>
<p>When downloading the Wikitude SDK 4.0 you will be forwarded to the <a href="http://www.wikitude.com/developer/sdk-licenses">license generation page</a>, where a trial license key is automatically generated for you. </p>
<p>It is also possible to generate a trial license key manually by opening the same <a href="http://www.wikitude.com/developer/sdk-licenses">license generation page</a> and click the <code>Generate Trial License</code>. </p>
<p>Copy the key into your app, which will unlock the trial mode of the Wikitude SDK. The trial mode of the Wikitude SDK contains the full feature set of the Wikitude SDK but will show a <code>Trial</code> watermark across the screen.</p>
<p>Each trial license key is valid for every application ID on every operating system. You can use the same trial license key in multiple apps.</p>
<p>Using the Wikitude SDK without any license key will only enable the camera with a <code>Unlicensed SDK</code> watermark rendered. All JavaScript API calls will be ignored and not interpreted.</p>
<a name="where-should-i-enter-the-license-key"></a><h2>Where should I enter the license key</h2>
<a name="android"></a><h3>Android</h3>
<p>To use the Wikitude Android SDK you need to provide a valid license key to the <code>onCreate</code> lifecycle-method of the ArchitectView. This can either be done directly by providing the key as a string and the call the <code>onCreate(final String key)</code> method or creating an <code>ArchitectConfig</code> object, passing it the license as a string and then call the <code>onCreate(final ArchitectConfig config)</code> method. Please refer to the <code>AbstractArchitectCamActivity</code> of the SDK Examples project for a practical example of how to set the license key.</p>
<a name="epson-moverio"></a><h3>Epson Moverio</h3>
<p>To use the Wikitude Epson Moverio SDK you need to provide a valid license key to the <code>onCreate</code> lifecycle-method of the ArchitectView. This can either be done directly by providing the key as a string and the call the <code>onCreate(final String key)</code> method or creating an <code>ArchitectConfig</code> object, passing it the license as a string and then call the <code>onCreate(final ArchitectConfig config)</code> method. Please refer to the <code>AbstractArchitectCamActivity</code> of the SDK Examples project for a practical example of how to set the license key.</p>
<a name="ios"></a><h3>iOS</h3>
<p>To use the Wikitude iOS SDK with a certain license key, use the method <code>-setLicenseKey:</code> defined in <code>WTArchitectView.h</code> and provide a valid license key.
The SDK Example application demonstrates the license handling in the file <code>WTStandardARViewController.m</code>. The license key is defined in line 17 and used in line 71.</p>
<a name="google-glass"></a><h3>Google Glass</h3>
<p>To use the Google Glass SDK you need to provide a valid license key to the <code>onCreate</code> lifecycle-method of the ArchitectView. This can either be done directly by providing the key as a string and the call the <code>onCreate(final String key)</code> method or creating an <code>ArchitectConfig</code> object, passing it the license as a string and then call the <code>onCreate(final ArchitectConfig config)</code> method. Please refer to the <code>AbstractArchitectCamActivity</code> of the SDK Examples project for a practical example of how to set the license key.</p>
<a name="phonegap-plugin"></a><h3>PhoneGap Plugin</h3>
<p>To use the Wikitude PhoneGap Plugin with a certain license key, use the <code>this._sdkKey</code> property defined in <code>WikitudePlugin.js</code> line <code>12</code>. 
Please make sure that the license key is set in the appropriate <code>WikitudePlugin.js</code> file since PhoneGap is duplicating this particular file in both <code>www</code> folder.</p>
<a name="titanium-module"></a><h3>Titanium Module</h3>
<p>To use the Wikitude Titanium Module with a certain license key, enter the key while calling the Wikitude Module function <code>createWikitudeView</code>. This is demonstrated in the Wikitude Titanium sample application file <code>ARchitectWindow.js</code> line <code>31</code> and the key is defined in <code>MainWindow.js</code> line <code>14</code>.</p>
<a name="vuzix"></a><h3>Vuzix</h3>
<p>To use the Wikitude Vuzix SDK you need to provide a valid license key to the <code>onCreate</code> lifecycle-method of the ArchitectView. This can either be done directly by providing the key as a string and the call the <code>onCreate(final String key)</code> method or creating an <code>ArchitectConfig</code> object, passing it the license as a string and then call the <code>onCreate(final ArchitectConfig config)</code> method. Please refer to the <code>AbstractArchitectCamActivity</code> of the SDK Examples project for a practical example of how to set the license key.</p>
<a name="xamarin-component"></a><h3>Xamarin Component</h3>
<a name="xamarinios"></a><h5>Xamarin.iOS</h5>
<p>To use the Wikitude iOS SDK with a certain license key, use the method <code>-setLicenseKey:</code> defined in the Xamarin Binding and provide a valid license key.
The Wikitude Xamarin Example application demonstrates the license handling in the file <code>ARViewController.cs</code> line 34.</p>
<a name="xamarinandroid"></a><h5>Xamarin.Android</h5>
<p>To use the Wikitude iOS SDK with a certain license key, create a <code>ArchitectConfig</code> with your license key and pass this config object to the <code>ArchitectView.OnCreate</code> method.
The Wikitude Xamarin Example application demonstrates the license handling in the file <code>BasicArchitectActivity.cs</code> line 49 - 51.</p>

<a name="tools"></a><h1>Tools</h1>
<p>In this section of the documentation we are covering tools shipped with the Wikitude SDK, which help you in your development. </p>
<ol>
<li><a href="ade.html">ADE</a></li>
<li><a href="logger.html">Logger</a></li>
<li><a href="targetmanagement.html#target-management">Target Manager</a></li>
<li><a href="targetguide.html">Best practice for target images</a></li>
<li><a href="encoder.html">Wikitude 3D Encoder</a></li>
</ol>

<a name="ade"></a><h2>ADE</h2>
<p>The ARchitect Desktop Environment (ADE) allows you to simulate the
behavior of your ARchitect file on an ordinary web browser, and observe the
properties of your AR objects and simulate user interaction and events.</p>
<a name="how-can-i-enable-the-ade-for-my-architect-file"></a><h3>How can I enable the ADE for my ARchitect file?</h3>
<p>To enable ADE functionality, simply add the ade.js file included in the
ARchitect Tools to the list of imported scripts in the header-section of
your ARchitect file:</p>
<pre><code class="lang-html">&lt;html&gt;
    &lt;head&gt;
        &lt;script src=&quot;architect://architect.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;[your_path_to_the_ade_file]/ade.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
    ...
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Next, open the ARchitect file in an ordinary web browser. Your browser will immediately render the HTML content specified in your ARchitect file, as well as starting to execute the provided JavaScript functionality.</p>
<p>When the file was successfully loaded, you will see your specified HTML content at top of the page. Immediately below your HTML content, you will see the list of ARchitect objects that you have  created (if you did not yet create any ARchitect objects, you will only see the
automatically generated &quot;context&quot; object). This list represents all ARchitect objects known to the system, and the list will be automatically updated as soon as new objects are created or existing ones are modified.</p>
<p>The list will always specify the type of the ARchitect object (for example <code>GeoLocation</code>) and the id of the object, which is stored in the immutable <code>__id</code> property.</p>
<p><img src="images/image05.png" alt="An example of an ADE tree" title="Example of ADE tree"></p>
<p>For instance, the second line in the list represents a GeoLocation with the <code>__id</code> property set to <code>a_0</code>.</p>
<a name="how-can-i-use-the-ade"></a><h3>How can I use the ADE?</h3>
<p>As soon as you create new ARchitect objects, they will appear in the list. Click on the &#39;+&#39; symbol next to the object&#39;s description to expand it and observe the values of the object&#39;s properties defined in the ARchitect specification.</p>
<p><img src="images/image04.png" alt="Example of ADE tree with an expanded object" title="Example of ADE tree with expanded object"></p>
<p>Blue color-coding of a property indicates that the trigger or function is defined and can be executed; black color-coding indicates that the trigger or function is undefined and thus can not be executed. In the example above, we have defined an onExitFieldOfVision trigger. Clicking on the trigger will execute the specified function. If your trigger
changes a certain property of the GeoObject, you will immediately see the change in the above list of properties.</p>
<p>Additionally, you can simulate other events occurring in regards to certain objects. For a GeoObject, you can simulate that the GeoObject is in, or outside of the field of vision, of the user. Clicking on <code>Toggle Visibility</code> will simulate that the GeoObject is
coming into the field of vision, or is leaving the field of vision
respectively. Associated triggers will automatically be triggered (just as they are triggered on the mobile device), and the artificial property
`visible changes its value. Artificial properties are properties that
do not exist on a mobile device; they are solely used in the ADE to
simulate the status of the ARchitect object.</p>
<p>ARchitect objects, triggers and events will behave in the exact same way
in the ADE as they would on a mobile device. The only exception is the
PropertyAnimation object, which will not change the value over time and
according to the specified EasingCurve in the ADE, PropertyAnimations
will change the value only once at the end of the Animation, rather than
continuously.</p>

<a name="logger"></a><h2>Logger</h2>
<p>ARchitect Tools come equipped with a logging console that is shared by the system and the developer. </p>
<p>On start up of each world, the ARchitect library creates a singleton <code>AR.logger</code> instance, which can be used by the developer to log messages.</p>
<p>To see the log messages, you need to call the JavaScript function <code>AR.logger.activateDebugMode()</code>. For example in the `body.onLoad trigger:</p>
<pre><code class="lang-html">&lt;html&gt;
&lt;body onLoad=&quot;javascript:AR.logger.activateDebugMode();&quot;&gt;
    &lt;!-- your body content --&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>When <code>activateDebugMode()</code> is called, it automatically creates a button at the bottom of your display, which allows you to open the Logging console. When you click the button, the logging window
appears. Within this window, you can select the log-levels you would like to see, as well as
 close the logging console again.</p>
<p>Bear in mind that the system itself will also use the logging framework
to log messages, thus allowing you to debug if anything unexpected
happens.</p>
<p>Please remember to deactivate the logging framework before you actually
publish your world by removing the call to <code>AR.logger.activateDebugMode()</code>.
Otherwise, the users of your ARchitect world will always see the button
at the bottom of the page, and would be able to follow debug messages.</p>

<a name="target-management"></a><h2>Target Management</h2>
<p>This guide gives you an overview of how to create a target collection that you can use to detect and track images within your ARchitect World.</p>
<a name="add-a-new-project"></a><h3>Add a new project</h3>
<ul>
<li>Open <a href="http://www.wikitude.com/developer/tools/target-manager" target="_top"><a href="http://www.wikitude.com/developer/tools/target-manager">http://www.wikitude.com/developer/tools/target-manager</a></a> and login with your Wikitude Developer account</li>
<li>Add a new project to your project collection</li>
</ul>
<p><img src="images/tmt_CreateProject.png" alt="Add new project"></p>
<a name="add-target-images-to-your-own-project"></a><h3>Add target images to your own project</h3>
<ul>
<li>Enter the newly created project </li>
<li>Add new target images to the project either by clicking on <code>Add images</code> or drag  &amp; drop them on the gray area. Supported file formats include PNG and JPEG. If you are using PNG images, please make sure that it does not contain any transparent pixels, only solid colored images are supported.</li>
</ul>
<p><img src="images/tmt_Targets.png" alt="Target images">    </p>
<ul>
<li><p>The file name will be set as the <code>target name</code> that will later be used to reference a particular target in your ARchitect World. If the <code>target name</code> is not completely visible, hover over it to reveal the full name.</p>
</li>
<li><p>The target management tool will take a couple of seconds to calculate how suitable the provided target images are for detection and tracking purposes and generate a 3-star rating for each of them. Hover over the star rating to get additional information.</p>
</li>
</ul>
<div class="warning">
<strong>Important</strong> <br />
If you add your own target images  you need the target name to set them in  <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>AR.Trackable2DObject</code></a>.</div>


<a name="star-rating-explained"></a><h3>Star rating explained</h3>
<ul>
<li><strong>0 stars:</strong> Not suitable for tracking. This target image cannot be tracked because it lacks textured features with high local contrast. Please consider choosing another target image.</li>
<li><strong>1 star:</strong>  Limited tracking ability. This target image provides basic tracking performance in good lightning conditions. Please consider improving the image</li>
<li><strong>2 stars:</strong> Good tracking ability. This target image will track well in most conditions.</li>
<li><strong>3 stars:</strong> Very good tracking ability. This target image will track very well in most conditions.</li>
</ul>
<p>General advice for reference images</p>
<ul>
<li>Good image characteristics:<ul>
<li>Diversely textured image with high local contrast</li>
</ul>
</li>
<li>Bad image characteristics:<ul>
<li>Large areas with solid color or smooth color transitions</li>
<li>Repetitive patterns</li>
<li>Logos, signs        </li>
</ul>
</li>
</ul>
<a name="create-a-target-collection"></a><h3>Create a target collection</h3>
<ul>
<li>Select all desired targets you want to recognize/track, enter a name for the target collection and click on <em>Generate target collection</em>. Depending on the number of selected targets, it can take a moment to generate the target collection.</li>
</ul>
<p><img src="images/tmt_CreateTargetCollection.png" alt="Target images"></p>
<ul>
<li>After the target collection has been generated, it will be listed in the target collections page. Here you can review all target collections you&#39;ve created. Use the provided download link to load the target collection directly from the Wikitude server or download it to package it together with your application for offline usage.</li>
</ul>
<p><img src="images/tmt_TargetCollections.png" alt="Target images"> </p>
<a name="use-the-target-collection-in-your-architect-world"></a><h3>Use the target collection in your ARchitect World</h3>
<p>Look at one of the image recognition <a href="imagerecognition.html">examples</a> or refer to the JavaScript API reference of <a href="../Reference/JavaScript%20Reference/classes/Tracker.html"><code>AR.Tracker</code></a> for instructions on how to use the created target collection for augmentations in your ARchitect Worlds.</p>

<a name="best-practice-for-target-images"></a><h2>Best practice for target images</h2>
<p>This guide gives you an overview of how to create a target collection that you can use to detect and track images within your ARchitect World.</p>
<a name="summary"></a><h3>Summary</h3>
<p><strong>Preferred images have:</strong></p>
<ul>
<li>between 500 to 1000 pixels in each dimension</li>
<li>Rich contrast</li>
<li>Evenly distributed textured areas</li>
<li>Many corner like structures</li>
</ul>
<p><strong>Unsuitable images have:</strong></p>
<ul>
<li>Smaller dimensions than 500 pixels</li>
<li>Larger than 1000 pixels as they do not provide more accurate results</li>
<li>Large amounts of text</li>
<li>Many repetitive patterns</li>
<li>Large single-colored areas </li>
<li>Color contrast only e.g. green to red edge), because all images are processed as grayscale images</li>
</ul>
<a name="optimal-image-dimensions"></a><h3>Optimal Image Dimensions</h3>
<ul>
<li>Optimal images are sized between 500 and 1000 pixels in each dimension</li>
<li>Small images do not contain enough graphical information to extract so called feature points. The uniqueness, amount and distribution of features points are the key indicators for good detection and tracking quality</li>
<li>Larger images do not improve the tracking quality
<img src="images/guide_dimension_wrong.png" alt="Target image too small">
<img src="images/guide_dimension_good.png" alt="Optimal size of target image"></li>
</ul>
<a name="low-contrast-images"></a><h3>Low contrast images</h3>
<ul>
<li>Images with high local contrast and large amount of rich textured areas is best suited for reliable detection and tracking</li>
<li>Color contrast only (i.e. green to red edge) appears as high contrast to the human eye but is not discriminative to computer vision algorithms as they are operating on grayscale images
<strong><em>Tip</em></strong>: For low contrast images, try to increase the contrast of your target image with an image editing tool like Gimp or PhotoShop to improve detection and tracking quality</li>
</ul>
<p><img src="images/low_contrast_wrong.png" alt="Target image with low contrast">
<img src="images/low_contrast_good.png" alt="Target image with good contrast"></p>
<a name="distribution-of-textured-areas"></a><h3>Distribution of textured areas</h3>
<ul>
<li>Images with evenly distributed textured areas are good candidates for reliable detection and tracking</li>
<li>This might be the hardest part to be in control of and often can’t be changed.
<strong><em>Tip</em></strong>: Try to crop the most prominent part of your image and use only this as target image.</li>
</ul>
<p><img src="images/texture_distribution_wrong.png" alt="Target image with not optimal distribution">
<img src="images/texture_distribution_good.png" alt="Even distribution of features"></p>
<a name="images-with-whitespace"></a><h3>Images with whitespace</h3>
<ul>
<li>Single-colored areas or smooth color transitions often found in backgrounds do not exhibit graphical information suitable for detection and tracking. 
<strong><em>Tip</em></strong>: Try to crop the most prominent part of your image and use only this as target image.</li>
</ul>
<p><img src="images/whitespace_wrong.png" alt="Too much whitespace">
<img src="images/whitespace_good.png" alt="Image reduced to the most relevant part"></p>
<a name="vector-based-graphics"></a><h3>Vector-based graphics</h3>
<ul>
<li>Logos and vector-based graphics usually consist of very few areas with high local contrast and textured structures and are therefore hard to detect and track. </li>
</ul>
<p><strong><em>Tip</em></strong>: Try to add additional elements to the graphic like your logotype or any other specific elements, which can go along with your graphic.</p>
<p><img src="images/vector_wrong.png" alt="Vector-based image">
<img src="images/vector_good.png" alt="Target image mixed with graphic elements"></p>
<a name="images-with-a-lot-of-text"></a><h3>Images with a lot of text</h3>
<ul>
<li>Images consisting primarily of large areas of text are hard to detect and track.</li>
</ul>
<p><strong><em>Tip</em></strong>: Try to have at least some graphical material and images next to your text for your target image.</p>
<p><img src="images/text_wrong.png" alt="Pure text">
<img src="images/text_good.png" alt="Text mixed with graphic elements"></p>
<a name="repetitive-patterns"></a><h3>Repetitive patterns</h3>
<ul>
<li>Repetitive patterns exhibit the same graphical information information at each feature point and therefore cannot be localized reliably</li>
<li>Images with slightly irregular structures can convey a similar information to the target audience while providing enough unique feature points to be detected (second image)</li>
</ul>
<p><strong><em>Tip</em></strong>: Try a different selection of your image including non pattern parts or use images with irregular patterns</p>
<p><img src="images/patterns_wrong.png" alt="Reptetive patterns that do not track">
<img src="images/patterns_good.png" alt="Pattern with irregular structures"></p>

<a name="wikitude-3d-encoder"></a><h2>Wikitude 3D Encoder</h2>
<p>3D content within Wikitude can only be loaded from so-called <em>Wikitude 3D Format</em> files (.wt3).  This is a compressed binary format for describing 3D content, which is optimized for fast loading and handling of 3D content on a mobile devices. You still can use 3D models from your favorite 3D modeling tools (such as Autodesk® Maya® or Blender) but you&#39;ll need to convert them to the wt3 file format. Wikitude offers a desktop application called the Wikitude 3D Encoder, which handles the task of
encoding your 3D source file.  The Encoder is compatible with Autodesk® FBX® files (.fbx) and the open standard Collada (.dae) file formats for encoding to .wt3.</p>
<p>Each step for getting a .wt3 file from your 3D content is explained in more detail below.</p>
<ol>
<li>How to install the Wikitude 3D Encoder</li>
<li>Supported 3D Models</li>
<li>The Wikitude 3D Encoder user interface</li>
<li>First Steps Using the Wikitude 3D Encoder</li>
<li>Working with 3D Models</li>
</ol>
<a name="how-to-install-wikitude-3d-encoder-on-windows-xp-windows-7-windows-8"></a><h3>How to install Wikitude 3D Encoder on Windows XP/ Windows 7/ Windows 8</h3>
<ul>
<li>Download the Encoder from <a href="http://www.wikitude.com/download" target="_top">www.wikitude.com/download</a></li>
<li>Run the setup.exe installation file and follow the installation wizard</li>
</ul>
<a name="how-to-install-wikitude-3d-encoder-on-mac-os-x"></a><h3>How to install Wikitude 3D Encoder on Mac OS X</h3>
<ul>
<li>Download the Encoder from <a href="http://www.wikitude.com/download" target="_top">www.wikitude.com/download</a></li>
<li>Open the .dmg installation image and drag the Wikitude 3D Encoder application to your Applications folder.</li>
</ul>
<a name="supported-3d-models"></a><h3>Supported 3D Models</h3>
<p>The Wikitude 3D Encoder can import Autodesk® FBX® and Collada files. FBX is the preferred way as Collada&#39;s open standard allows for customized tags that might not be supported.</p>
<p>Features you can use in your 3D model source files:</p>
<ul>
<li>Static model (made-up of triangles)   </li>
<li><a href="assetsworkflow.html#working-with-3d-animations">Animations</a><ul>
<li>Transformation Animations</li>
<li>Skinning</li>
</ul>
</li>
<li>Materials<ul>
<li>Phong, Lambert, Blinn</li>
<li>Transparency</li>
</ul>
</li>
<li>NURBS (will be tessellated on import)</li>
</ul>
<p>Features that are not (yet) supported</p>
<ul>
<li>Normal Mapping</li>
<li>Multi Textures</li>
</ul>
<p>If you are not sure whether the 3D model at hand fits the requirements, try to encode it. You will receive a list of warnings and errors that tell you if the 3D content will work within Wikitude or uses unsupported features.</p>
<a name="the-wikitude-3d-encoder-user-interface"></a><h3>The Wikitude 3D Encoder user interface</h3>
<p>On startup you are presented with the following interface.</p>
<ol>
<li>Toolbar for frequently used functions</li>
<li>3D working area to view your 3D content.</li>
<li>Scene graph that lists all 3D content in a tree view</li>
<li>A properties area that shows details about a selected node from the scene graph</li>
<li>Status bar</li>
</ol>
<p><img src="images/Wikitude3DEncoderInterface.png" alt="Wikitude 3D Encoder Interface"></p>
<a name="first-steps-using-the-wikitude-3d-encoder"></a><h3>First steps using the Wikitude 3D Encoder</h3>
<p>Start by opening a supported 3D model file (.fbx, .dae). Select <code>Open</code> from the toolbar or drag and drop a supported file onto the 3D working area. Depending on the size of the file this can take a while. Once finished, the 3D content will be shown in the 3D working area.</p>
<p>In case the Wikitude 3D Encoder encounters features not supported in your file, it will present a list of errors or warnings in a dialog box. The popup window summarizes the issues found during the import process. You can bring up this information again at a later time via <code>Window-&gt;Show Logging Window</code>. Check the message and details carefully to identify areas that need to be altered in your 3D model file, ensuring that it can be encoded properly.</p>
<p>The 3D working area shows your encoded 3D model file in the exact way as it would show in Wikitude. Drag, pan and zoom to verify that your model looks ok.  If you need to check specific properties (e.g. materials or lights) select the corresponding node in the scene graph. The details of a selected node are displayed in the properties view.</p>
<a name="export-files-to-wt3"></a><h3>Export files to .wt3</h3>
<p>Once you are satisfied with the encoded file, choose <code>Export</code> from the toolbar. Then choose the location where the exported file should be saved. Exported .wt3 files can be used directly in an augmented reality experience using Wikitude. If you want to view a .wt3 file on the desktop, simply choose <code>Open</code> or drag and drop it into the Wikitude 3D Encoder.</p>
<p>More information on the workflow with 3D content can be found in the dedicated chapter called <a href="assetsworkflow.html">3D Asset Workflow</a>.</p>

<a name="reference"></a><h1>Reference</h1>
<a name="javascript-api"></a><h2>JavaScript API</h2>
<p>Goto <a href="../Reference/JavaScript%20Reference/index.html">JavaScript API Reference</a> for a complete reference of all JavaScript API objects and functions.</p>
<a name="android-javadocs"></a><h2>Android JavaDocs</h2>
<p>Goto <a href="../Reference/Android%20Reference/html/index.html">Android JavaDoc Reference</a> for a complete reference of all Android Wikitude API objects and functions.</p>

<a name="sdu-and-dbs"></a><h2>SDU and DBS</h2>
<a name="scaled-distance-units-sdus"></a><h3>Scaled Distance Units (SDUs)</h3>
<p>In AR applications, the term &quot;size of an object&quot; cannot be defined just in pixels or similar size measurements. Unlike in 2-dimensional applications, such as maps, the size of an object inherently depends on the distance from the viewer to the object.</p>
<p>Imagine a virtual 2-dimensional logo which should be placed right on top of a certain store location. In a map-based application, the size can easily be defined by specifying the width and height of the logo in pixels. In AR applications, the logo should appear as big as the building itself, which is dependent on the distance in a natural way. Additionally for geobased usecases objects should be readable even if far away. We use a distance based scaling (see below) to accomplish this.</p>
<p>The term &quot;pixels&quot; or physical units cannot be used in AR applications, as they are defined in a static way and do not allow the application to scale the objects in the desired way. Thus, the Wikitude ARchitect introduces Scaled Distance Units (SDU). SDUs are defined not only in relation to the object&#39;s size itself, but also in relation to the distance from the viewer to the object itself.</p>
<p>For drawables attached to <code>GeoObjects</code>, 1 SDU is defined as the screen-size of an object which is exactly 1 meter high and located 10 meters away from the viewer. If a drawable&#39;s width is defined as 5 SDU, it will exactly overlap an object which is 5 meters wide and is located in 10 meters distance.
For drawables attached to <code>Trackable2DObjects</code>, SDUs are determined by the underlying trackable&#39;s size. The drawables anchor point will be set to the center of the <code>Trackable2DObject</code>, and 1 SDU is defined to be the height of the image, as described in the figure below:</p>
<p><img src="images/sdu_Trackable2DDrawables.jpg" alt=""></p>
<p>A circle with radius set to 0.25 will then be rendered accordingly like shown in the image below:
<img src="images/sdu_circleInTrackable.jpg" alt=""></p>
<a name="distance-based-scaling-dbs"></a><h3>Distance Based Scaling (DBS)</h3>
<p>Another important concept of an AR application is &quot;Distance Based Scaling&quot;. Think about the logo again, which represents the store location of a certain brand. If the viewer is about 10 meters away and looking at the store, the logo will perfectly overlap the building, given that we have set the drawable&#39;s width and height to the right SDUs. Now, let&#39;s put the view further away from the store location. Without the concept of DSB, the logo will quickly vanish from the screen, as it will be too small to see - especially when the SDUs are not set to a high value. A similar situation appears when we are moving towards the location - the logo will soon appear very big and obstruct the entire screen.</p>
<p>To avoid situations, where drawables are only clearly visible in a certain viewing distance or are otherwise too big or too small to recognize respectively, the Wikitude ARchitect introduces  a concept called Distance Based Scaling (DBS). It ensures that drawables do not exceed certain limits of their original appearance.</p>
<p>We define two values, <code>cutoff_min</code> and <code>cutoff_max</code>.</p>
<p><code>cutoff_min</code> is set to 10 meters and defines the viewing distance at which the drawables will not be scaled anymore. Regardless whether the viewing distance is 10 meters or even closer to the original location, the drawable will still have the same size on the screen. This avoids drawables obstructing the entire screen.</p>
<p><code>cutoff_max</code> is set to 20 kilometers and defines the viewing distance beyond which the drawables will not be scaled anymore. The drawable will still appear in the same size on the screen, regardless if the distance to the object is 20 kilometers, or even more. This avoids drawables getting too small to see on the screen.</p>
<p>The <code>cutoff_max</code> size of the drawable is set to 10% of its size at cutoff_min (the defined SDU-value), resulting in any drawable not appearing smaller than 10% of its size if the object was only 10 meters away.</p>
<p>Between <code>cutoff_min</code> and <code>cutoff_max</code>, the objects are scaled based on a scaling function of x^(0.2). The effect of this particular scaling function is that drawables representing near objects are downscaled fairly quickly as the user is moving away from the object. The further the user moves away from the object, the lesser the loss of size will be visible for the user, to allow a smooth user experience.</p>

<a name="migration"></a><h1>Migration</h1>
<a name="migrate-from-33-to-40"></a><h2>Migrate from 3.3 to 4.0</h2>
<ul>
<li>Make sure to set the required permissions for your application when using the new <code>AR.context.hardware.flashlight</code> API.</li>
<li>Starting with Wikitude SDK 4.0 a valid license key is mandatory for starting the SDK. An empty license key will block the SDK. A free trial key can be generated on the <a href="http://www.wikitude.com/developer/sdk-licenses">license page</a> (free account required).</li>
<li>The Wikitude SDK 4.0 introduces a new file format for target collections (wtc). In order to unleash the full power of the new Wikitude SDK 4.0 read <a href="migration-common.html#upgrading-targets-for-sdk-4x">this section</a> and re-generate your targets. </li>
</ul>
<a name="migrate-from-32-to-33"></a><h2>Migrate from 3.2 to 3.3</h2>
<p>The SDK is compatible with Android 4.4, so we recommend to update ADT to the latest version and set the target SDK version to &#39;19&#39; in your Android Manifest XML file.</p>
<a name="migrate-from-31-to-32"></a><h2>Migrate from 3.1 to 3.2</h2>
<p><code>ArchitectUrlListener</code> and <code>SensorAccuracyChangeListener</code> are now inner interfaces of the <code>ArchitectView</code> class. Update your imports in your Android code accordingly to get rid of compile time errors (<code>ArchitectUrlListener</code> becomes <code>ArchitectView.ArchitectUrlListener</code>).</p>
<a name="migrate-from-30-to-31"></a><h2>Migrate from 3.0 to 3.1</h2>
<a name="image-recognition-and-tracking"></a><h3>Image Recognition and Tracking</h3>
<p>The image recognition engine of Wikitude SDK 3.1 has been updated resulting in shorter time interval to successfully recognize a target image. As a consequence the format of the digital footprint of target image has changed. The format is backward compatible. Developers still can use target collections (.wtc) generated with Wikitude SDK 3.0 (prior to 27th August 2013) together with the SDK 3.1 and vice versa.</p>
<p>However we recommend to generate your target collections again in the Target Manager Tool and update the files when you are using Wikitude SDK 3.1</p>
<a name="html-drawables"></a><h3>HTML Drawables</h3>
<p>Developers using HTML Drawables in projects prior to Wikitude SDK 3.1 and like to upgrade to 3.1 need to define the <code>viewportHeight</code> similar to the already defined <code>viewportWidth</code>. In addition HTML Drawables do not have to be created as static or dynamic anymore. All are created as dynamic ones.</p>
<a name="migrate-from-20-to-30"></a><h2>Migrate from 2.0 to 3.0</h2>
<p>Wikitude SDK version 3.0 introduces Wikitude&#39;s own image recognition and tracking solution and removes support for the Vuforia Plugin. </p>
<p>If you are not using image recognition features in your app you only need to update the jar file and are good to go.</p>
<p>In case you are making use of image recognition features and want to switch from 2.0 to 3.x version remove any Qualcomm/Vuforia related assets (QCAR.so, QCAR.lib) from your project.
Also the <code>READ_PHONE_STATE</code> permission is no longer required in your AndroidManifest.xml.</p>
<p>Find a step-by-step guide about how to convert your existing target collection from Vuforia to Wikitude <a href="targetmanagement.html#migrate_targets">here</a>.</p>

<a name="upgrading-targets-for-sdk-4x"></a><h2>Upgrading targets for SDK 4.x</h2>
<p>The Wikitude SDK 4.0 introduces an updated format for the target collection. The new format improves the tracking quality and recognition phase. The updated format is not backward compatible with Wikitude SDK 3.x and can not be used in projects using Wikitude SDK 3.x. You can use the old format in projects using Wikitude SDK 4.x though.</p>
<p>To use the new format you need to re-create your target collection in the <a href="http://www.wikitude.com/developer/tools/target-manager" target="_top">target manager</a> and dwonload the <code>.wtc</code> file under the <code>Download 4.x</code> link. Put this <code>.wtc</code> file in your app and replace the previous one.</p>
<div class="warning">
    It is not possible to use a wtc 4.x file together with Wikitude SDK 3.x
</div>

<table>
    <tr>
        <th></th>
        <th>Wikitude SDK 3.x</th>
        <th>Wikitude SDK 4.x</th>
    </tr>
    <tr>
        <td>wtc 3.x</td>
        <td>supported</td>
        <td>supported</td>
    </tr>
    <tr>
        <td>wtc 4.x</td>
        <td>not supported</td>
        <td>supported</td><br>    </tr>

</table>


<a name="migrating-targets-from-sdk-1x"></a><h2>Migrating targets from SDK 1.x</h2>
<p>If you have been using a dataset from the Qualcomm Vuforia target management, please follow these steps to convert your ARchitect World to the new approach:</p>
<ol>
<li>Create a new project with the Wikitude target management tool and upload your targets (see instructions above)</li>
<li>Create a target collection and store it in the same location as the previously used <em>dataset</em></li>
<li>In your ARchitect World, update the  <a href="../Reference/JavaScript%20Reference/classes/Tracker.html"><code>AR.Tracker</code></a> initialization to point to the URL of your new target collection</li>
</ol>

<a name="wikitude-sdk-android-release-notes"></a><h1>Wikitude SDK Android Release Notes</h1>
<a name="wikitude-sdk-40"></a><h2>Wikitude SDK 4.0</h2>
<a name="wikitude-sdk-403"></a><h3>Wikitude SDK 4.0.3</h3>
<p>Release Date: 28.10.14</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Compatibility with Android 5.0</li>
</ul>
<a name="wikitude-sdk-402"></a><h3>Wikitude SDK 4.0.2</h3>
<p>Release Date: 09.10.14</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Android L compliance, according to the new guidelines</li>
<li>AR Mode configurable on startup (default is IR+Geo)</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Image target recognition</li>
<li>Optimized SDK for Android 2.3+ by removing fallbacks for older Android versions</li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Fixes an issue with flickering augmentations for certain image targets</li>
<li>Fixes an issue where the &#39;onSnappedToScreen&#39; function was not called when using the &#39;enabledOnExitFieldOfVision&#39; property</li>
<li>It is safe to call normal lifecycle events of the ARchitectView even if initialization fails</li>
<li>ARchitect WebView lifecycle doesn&#39;t interfere with other WebViews in the same application</li>
</ul>
<a name="wikitude-sdk-401"></a><h3>Wikitude SDK 4.0.1</h3>
<p>Release Date: 07.08.14</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Fixes Videodrawable crash related to code obfuscation when creating a Play Store application</li>
<li>Fixes Videodrawable loop behaviour on Samsung devices.</li>
</ul>
<a name="wikitude-sdk-400"></a><h3>Wikitude SDK 4.0.0</h3>
<p>Release Date: 29.07.14</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Support for x86 architecture</li>
<li>&quot;Snap-to-screen&quot; feature (see samples <a href="imagerecognitionand3d.html#snapToScreen">3D Model</a> and <a href="video.html#snappedvideo">Video</a> for implementation)</li>
<li>Wildcard support for the <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html#property_targetName"><code>targetName</code></a> property of <a href="../Reference/JavaScript%20Reference/classes/Trackable2DObject.html"><code>Trackable2DObject</code></a></li>
<li>New tracking engine with increased performance </li>
<li>Control flash light from augmented reality scene (<a href="../Reference/JavaScript%20Reference/classes/context.html#property_hardware.flashlight"><code>AR.context.hardware.flashlight</code></a>)</li>
<li>SDK version number is now accessible from JS (<a href="../Reference/JavaScript%20Reference/classes/context.html#property_versionNumber"><code>AR.context.versionNumber</code></a>)</li>
<li>Updates OpenSSL version to 1.0.1h</li>
<li>Required license key</li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>A potential issue that caused rendering artifacts when objects were created outside of the current culling distance</li>
<li>Fixes a problem with wrong camera orientation</li>
<li>Fixes various problems with VideoDrawables</li>
<li>Fixes a potential issue with 3D models that were not deleted correctly from a temporary directory</li>
<li>Fixes a potential issue with 3D models that were not destroyed correctly when using the JS <code>destroy()</code> API</li>
<li>Transparent videos on PowerVR SGX 540 devices</li>
<li>Can load the same 3D model more than once</li>
<li>VideoDrawables crash on pause / resume</li>
<li>Load and show more than one video in a single AR world</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Samples to reflect Snap-to-screen feature and wildcard support</li>
<li>Comments in sample apps source code</li>
</ul>
<a name="wikitude-sdk-33"></a><h2>Wikitude SDK 3.3</h2>
<a name="wikitude-sdk-332"></a><h3>Wikitude SDK 3.3.2</h3>
<p>Release Date: 29.07.14</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Fixes various problems with VideoDrawables</li>
<li>Fixes a potential issue with 3D models that were not deleted correctly from a temporary directory</li>
<li>Updates OpenSSL version to 1.0.1h</li>
<li>Transparent videos on PowerVR SGX 540 devices</li>
<li>Can load the same 3D model more than once</li>
<li>VideoDrawables crash on pause / resume</li>
<li>Load and show more than one video in a single AR world</li>
</ul>
<a name="wikitude-sdk-331"></a><h3>Wikitude SDK 3.3.1</h3>
<p>Release Date: 24.04.2014</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Listener for PageLoaded Event</li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Possible memory allocation issues during application close</li>
<li>Possible error where screenshot was not captured</li>
<li>Crash when exiting and reentering the same architect world</li>
<li>Some PNG images couldn&#39;t be loaded</li>
</ul>
<a name="wikitude-sdk-330"></a><h3>Wikitude SDK 3.3.0</h3>
<p>Release Date: 01.04.2014</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Multiple AR views supported</li>
<li>URL scheme support for <code>tel:</code>, <code>sms:</code> and <code>mailto:</code></li>
<li>Scaling mode: Global Scene (See <a href="../Reference/JavaScript%20Reference/classes/context.html">JavaScript API Reference</a> for more details)</li>
<li>Method getSupportedARModeForDevice to retrieve suitable AR mode for device</li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>JavaScript error reported at start-up (Uncaught ReferenceError)</li>
<li>Possible mix-up of 3D textures with the same name in different 3D models</li>
<li>Possible exception when using Video Drawable (ConcurrentModificationException) fixed</li>
<li>Possible crash when sending app to background and back when playing video</li>
<li>Loading of worlds from SD card on Android 3.0 (and earlier) and sound loading from SD card</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Camera View on low-end devices</li>
<li>Injection of JavaScript API on Android 3.0+</li>
<li>Compatibility with Android 4.4 and SDK 19</li>
</ul>
<a name="wikitude-sdk-32"></a><h2>Wikitude SDK 3.2</h2>
<a name="wikitude-sdk-321"></a><h3>Wikitude SDK 3.2.1</h3>
<p>Release Date: 04.12.2013</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Compilation error preventing gif files to be shown in AR scene</li>
<li>Animation loops of 3D models</li>
<li>onError trigger not called for images in not supported format</li>
<li>Rare cases where Android UI becomes unresponsive when opening an activity on top of Wikitude SDK</li>
</ul>
<a name="wikitude-sdk-320"></a><h3>Wikitude SDK 3.2.0</h3>
<p>Release Date: 10.10.2013</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>VideoDrawables to display videos on top of image targets or as part of <code>GeoObjects</code></li>
<li>Taking screenshot of AR scene</li>
<li>Examples for VideoDrawables</li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li><code>AR.context.startVideoPlayer</code> was unable to play videos from asset folder</li>
<li>ADE.js interfered with architect.js under certain circumstances when loaded from bundle/assets</li>
<li>Rare case of crashing in <code>onDestroy</code></li>
<li>Under certain circumstances the sensors where not paused </li>
<li>Camera uses auto focus for better recognition performance</li>
<li>Fixed loading worlds from any source</li>
<li>Changing viewport of HTML drawable after creation results in crash</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Resource loading and caching of images, 3D models and tracker files</li>
<li>Images can be loaded from any source</li>
<li>Loading time of image recognition tracker</li>
<li>Radar position and size is now defined as a DOM element (e.g. div-tag styled in CSS). That way you can define scale and position in HTML instead of defining offsets in SDU unit.</li>
<li>Browse POI samples</li>
</ul>
<a name="wikitude-sdk-31"></a><h2>Wikitude SDK 3.1</h2>
<a name="wikitude-sdk-310"></a><h3>Wikitude SDK 3.1.0</h3>
<p>Release Date: 27.08.2013</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Problem with included ade.js on device interfered with ARchitect API</li>
<li>AnimatedImageDrawable&#39;s frame rate was ignored after resume.</li>
<li>Executing onDocumentLocationChanged trigger for HTML Drawable in ADE was broken.</li>
<li>Under certain circumstances SDK didn&#39;t pause when switched to background.</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>HTML Drawables work correctly with dynamic content</li>
<li>Image detection two times faster</li>
<li>Better support for target images with low contrast</li>
<li>More reliable tracking, especially for difficult target images</li>
<li>Optimized texture memory usage for non square images</li>
</ul>
<a name="wikitude-sdk-30"></a><h2>Wikitude SDK 3.0</h2>
<a name="wikitude-sdk-301"></a><h3>Wikitude SDK 3.0.1</h3>
<p>Release Date: 25.07.2013</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Orientation issue for Android tablets</li>
</ul>
<a name="wikitude-sdk-300"></a><h3>Wikitude SDK 3.0.0</h3>
<p>Release Date: 18.06.2013</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Integrated image recognition and tracking engine</li>
<li>Examples application</li>
<li>Support for 3D model animations</li>
<li>Support for transparent materials, textures and colors on 3D models</li>
<li>API method for setting distance based scaling parameters. See reference on AR.context.scene</li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Under certain circumstances the light of a 3D model was ignored</li>
<li>Issue when locking screen and radar is visible</li>
<li>Possible crash when using wrong license key</li>
<li>Possible crash when returning to an ArchitectView that uses HTMLDrawables</li>
<li>Aspect ratio in camera for devices with image recognition capability</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Image recognition supports up to 1000 targets</li>
<li>Rewritten, extended and improved SDK documentation.</li>
<li>Significant increase of performance at start up and general performance increase</li>
<li>Minor fixes</li>
</ul>
<a name="removed"></a><h4>Removed</h4>
<ul>
<li>Support for Vuforia SDK</li>
</ul>
<a name="wikitude-sdk-20"></a><h2>Wikitude SDK 2.0</h2>
<a name="wikitude-sdk-200"></a><h3>Wikitude SDK 2.0.0</h3>
<p>Release Date: 26.02.2013</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Support for 3D models via new ARchitect class Model </li>
</ul>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Missing SD card prevented image recognition from running successfully.</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Minor fixes and performance improvements</li>
</ul>
<a name="wikitude-sdk-12"></a><h2>Wikitude SDK 1.2</h2>
<a name="wikitude-sdk-120"></a><h3>Wikitude SDK 1.2.0</h3>
<p>Release Date: 18.12.2012</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>Improved bridge performance (SteelBridge and Weasel)</li>
<li>onFinish trigger for AnimatedImageDrawables</li>
<li>ImageResource onLoad() reports width and height of loaded image</li>
<li>PropertyAnimation can be paused and resumed</li>
<li>Customize clicking behavior (click, touch down, touch up)</li>
<li>Set culling distance from JavaScript</li>
<li>Support for Vuforia SDK v2.0</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Architect Desktop Engine (ADE) now overlays world</li>
</ul>
<a name="wikitude-sdk-11"></a><h2>Wikitude SDK 1.1</h2>
<a name="wikitude-sdk-111"></a><h3>Wikitude SDK 1.1.1</h3>
<p>Release Date: 26.09.2012</p>
<a name="fixed"></a><h4>Fixed</h4>
<ul>
<li>Possible crash when using openInBorwser or startVideoPlayer while IR is active</li>
<li>Possible crash when calling start / stop while IR is active</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>Minor performance increase for rendering HTML drawables.</li>
<li>Handling of images with semi transparency</li>
</ul>
<a name="wikitude-sdk-110"></a><h3>Wikitude SDK 1.1.0</h3>
<p>Release Date: 16.08.2012</p>
<a name="new"></a><h4>New</h4>
<ul>
<li>HTML Drawables </li>
<li>Relative locations </li>
<li>Customizable AR radar</li>
<li>Sprite Animations</li>
<li>3D Transformation</li>
<li>Animation Groups</li>
<li>Extension for Qualcomm Vuforia SDK for Image Recognition</li>
<li>Possibility to turn off camera and sensors</li>
<li>Possibility to add a single drawable to multiple GeoObjects</li>
</ul>
<a name="improved"></a><h4>Improved</h4>
<ul>
<li>New tutorials and snippets</li>
<li>Library Reference examples and texts</li>
<li>New simple IR example</li>
<li>Streamlined trigger properties</li>
<li>Rendering performance in general</li>
<li>Performance of AR.logger output on device</li>
</ul>
<a name="wikitude-sdk-10"></a><h2>Wikitude SDK 1.0</h2>
<a name="wikitude-sdk-105"></a><h3>Wikitude SDK 1.0.5</h3>
<a name="new"></a><h4>New</h4>
<ul>
<li>Added setCullingDistance to ArchitectView (SDK)</li>
<li>Added possibility for better error handling when loading an ARchitect World (SDK)</li>
<li>Improved SimpleARBrowser example</li>
</ul>
<a name="note"></a><h4>Note</h4>
<ul>
<li>Including a viewport meta-tag in your ARchitect World is recommended if you target different screen resolutions (see ARchitectTools/Hello World/Hello World.html for more details)</li>
</ul>
<a name="wikitude-sdk-104"></a><h3>Wikitude SDK 1.0.4</h3>
<ul>
<li>Licensable SDK</li>
</ul>
<a name="wikitude-sdk-103"></a><h3>Wikitude SDK 1.0.3</h3>
<ul>
<li>Initial Public SDK Release</li>
</ul>


        </div>
      
    </div>
</body>
</html>
